import{c as dt,r as We,R as ft,j as t,L as Le,b as Y,H as ht}from"./app-CyulpZ4l.js";import{B as Ue}from"./createLucideIcon-BQY_2rDi.js";import{I as xt}from"./input-DZO_bzLb.js";import{T as qe,a as m,b as h,c as ut,d as jt,e as pt}from"./table-C6noO-ui.js";import{D as Ye,a as Ze,b as et,c as K,d as tt,S as gt}from"./separator-C9WSIPQc.js";import{a as ze,b as Xe,d,c as Ge,S as Je}from"./select-ltAgklA8.js";import{B as st}from"./badge-CzRquX7r.js";import{C as lt}from"./checkbox-Bx6-NURT.js";import{A as at,a as rt}from"./alert-C04XUOS6.js";import{P as bt}from"./pagination-DZ5BrUHJ.js";import{D as Nt}from"./DashboardLayout-CJuE1ZNF.js";import{P as vt}from"./PageHeader-kw0-uq8p.js";import{C as Ke}from"./users-oYdqotjr.js";import{C as Oe}from"./circle-check-big-B9kmu0mx.js";import{C as Qe}from"./circle-x-Dvx7atPi.js";import{T as it}from"./trash-2-CVtaWyO2.js";import{E as _t}from"./ellipsis-vertical-DnEz3Ch7.js";import{E as St}from"./eye-DDyiKe5G.js";import{S as wt}from"./square-pen-BP298jC8.js";import{P as yt}from"./plus-Cntibx7C.js";import{T as Ct}from"./trending-up-vHO8iMjj.js";import{C as Tt}from"./calendar-CKoc8gf1.js";import{F as Dt}from"./funnel-BRJ9qA-s.js";/* empty css            */import"./sheet-Cxg_ZlmL.js";import"./index-_vAUJaj-.js";import"./check-CjUWd-kM.js";import"./index-DwM1dw0K.js";import"./file-text-Dg4dGPiw.js";import"./dollar-sign-BTVKeyIs.js";import"./user-B3FC1fbi.js";import"./house-CbOgEd2s.js";function ds(i){const e=dt.c(133),{frais:l,filters:c,stats:r,annees:Pe,flash:o}=i;let Z;e[0]===Symbol.for("react.memo_cache_sentinel")?(Z=[],e[0]=Z):Z=e[0];const[a,O]=We.useState(Z),[f,ct]=We.useState(c.search||"");let ee,te;e[1]!==f?(ee=()=>{const s=setTimeout(()=>{Y.get("/configuration-frais",{search:f},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(s)},te=[f],e[1]=f,e[2]=ee,e[3]=te):(ee=e[2],te=e[3]),ft.useEffect(ee,te);let se;e[4]!==c?(se=(s,W)=>{Y.get("/configuration-frais",{...c,[s]:W},{preserveState:!0,replace:!0})},e[4]=c,e[5]=se):se=e[5];const n=se;let le;e[6]!==l.data?(le=s=>{O(s?l.data.map(It):[])},e[6]=l.data,e[7]=le):le=e[7];const Re=le;let ae;e[8]!==a?(ae=(s,W)=>{O(W?[...a,s]:a.filter(mt=>mt!==s))},e[8]=a,e[9]=ae):ae=e[9];const $e=ae;let re;e[10]!==a?(re=s=>{a.length!==0&&confirm(`Êtes-vous sûr de vouloir effectuer cette action sur ${a.length} configuration(s) ?`)&&Y.post("/configuration-frais/bulk-action",{ids:a,action:s},{onSuccess:()=>O([])})},e[10]=a,e[11]=re):re=e[11];const Q=re,nt=Ft,Me=kt;let ie;e[12]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(ht,{title:"Configuration des frais"}),e[12]=ie):ie=e[12];const ot=l.total;let ce;e[13]!==r.montant_total?(ce=Me(r.montant_total),e[13]=r.montant_total,e[14]=ce):ce=e[14];const Ee=`${ot} configurations - Total: ${ce}`;let ne;e[15]===Symbol.for("react.memo_cache_sentinel")?(ne=[{label:"Dashboard",href:"/dashboard"},{label:"Configuration frais",href:"/configuration-frais"}],e[15]=ne):ne=e[15];let x;e[16]!==Q||e[17]!==a.length?(x=a.length>0&&t.jsxs(Ye,{children:[t.jsx(Ze,{asChild:!0,children:t.jsxs(Ue,{variant:"outline",children:[t.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Actions (",a.length,")"]})}),t.jsxs(et,{align:"end",children:[t.jsxs(K,{onClick:()=>Q("activate"),children:[t.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Activer"]}),t.jsxs(K,{onClick:()=>Q("deactivate"),children:[t.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Désactiver"]}),t.jsx(tt,{}),t.jsxs(K,{onClick:()=>Q("delete"),className:"text-destructive",children:[t.jsx(it,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]}),e[16]=Q,e[17]=a.length,e[18]=x):x=e[18];let oe;e[19]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(Le,{href:"/configuration-frais/create",children:t.jsxs(Ue,{children:[t.jsx(yt,{className:"h-4 w-4 mr-2"}),"Nouvelle configuration"]})}),e[19]=oe):oe=e[19];let u;e[20]!==x?(u=t.jsxs("div",{className:"flex items-center gap-2",children:[x,oe]}),e[20]=x,e[21]=u):u=e[21];let j;e[22]!==Ee||e[23]!==u?(j=t.jsx(vt,{title:"Configuration des frais",description:Ee,breadcrumb:ne,actions:u}),e[22]=Ee,e[23]=u,e[24]=j):j=e[24];let p;e[25]!==o?(p=o?.success&&t.jsx(at,{className:"mb-6",children:t.jsx(rt,{children:o.success})}),e[25]=o,e[26]=p):p=e[26];let g;e[27]!==o?(g=o?.error&&t.jsx(at,{variant:"destructive",className:"mb-6",children:t.jsx(rt,{children:o.error})}),e[27]=o,e[28]=g):g=e[28];let me;e[29]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total configurations"}),e[29]=me):me=e[29];let b;e[30]!==r.total?(b=t.jsxs("div",{children:[me,t.jsx("p",{className:"text-2xl font-bold",children:r.total})]}),e[30]=r.total,e[31]=b):b=e[31];let de;e[32]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(Ke,{className:"h-8 w-8 text-primary"}),e[32]=de):de=e[32];let N;e[33]!==b?(N=t.jsx("div",{className:"bg-card rounded-lg border p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[b,de]})}),e[33]=b,e[34]=N):N=e[34];let fe;e[35]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Actifs"}),e[35]=fe):fe=e[35];let v;e[36]!==r.actifs?(v=t.jsxs("div",{children:[fe,t.jsx("p",{className:"text-2xl font-bold",children:r.actifs})]}),e[36]=r.actifs,e[37]=v):v=e[37];let he;e[38]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(Oe,{className:"h-8 w-8 text-green-500"}),e[38]=he):he=e[38];let _;e[39]!==v?(_=t.jsx("div",{className:"bg-card rounded-lg border p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[v,he]})}),e[39]=v,e[40]=_):_=e[40];let xe;e[41]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Inactifs"}),e[41]=xe):xe=e[41];let S;e[42]!==r.inactifs?(S=t.jsxs("div",{children:[xe,t.jsx("p",{className:"text-2xl font-bold",children:r.inactifs})]}),e[42]=r.inactifs,e[43]=S):S=e[43];let ue;e[44]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(Qe,{className:"h-8 w-8 text-amber-500"}),e[44]=ue):ue=e[44];let w;e[45]!==S?(w=t.jsx("div",{className:"bg-card rounded-lg border p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[S,ue]})}),e[45]=S,e[46]=w):w=e[46];let je;e[47]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"}),e[47]=je):je=e[47];let y;e[48]!==r.montant_total?(y=Me(r.montant_total),e[48]=r.montant_total,e[49]=y):y=e[49];let C;e[50]!==y?(C=t.jsxs("div",{children:[je,t.jsx("p",{className:"text-2xl font-bold",children:y})]}),e[50]=y,e[51]=C):C=e[51];let pe;e[52]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(Ct,{className:"h-8 w-8 text-blue-500"}),e[52]=pe):pe=e[52];let T;e[53]!==C?(T=t.jsx("div",{className:"bg-card rounded-lg border p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[C,pe]})}),e[53]=C,e[54]=T):T=e[54];let D;e[55]!==N||e[56]!==_||e[57]!==w||e[58]!==T?(D=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[N,_,w,T]}),e[55]=N,e[56]=_,e[57]=w,e[58]=T,e[59]=D):D=e[59];let ge;e[60]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e[60]=ge):ge=e[60];let be;e[61]===Symbol.for("react.memo_cache_sentinel")?(be=s=>ct(s.target.value),e[61]=be):be=e[61];let A;e[62]!==f?(A=t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[ge,t.jsx(xt,{placeholder:"Rechercher par nom ou année...",value:f,onChange:be,className:"pl-10"})]})}),e[62]=f,e[63]=A):A=e[63];const Be=c.annee_scolaire||"";let k;e[64]!==n?(k=s=>n("annee_scolaire",s),e[64]=n,e[65]=k):k=e[65];let Ne;e[66]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsxs(ze,{className:"w-[160px]",children:[t.jsx(Tt,{className:"h-4 w-4 mr-2"}),t.jsx(Xe,{placeholder:"Année scolaire"})]}),e[66]=Ne):Ne=e[66];let ve;e[67]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx(d,{value:"all",children:"Toutes années"}),e[67]=ve):ve=e[67];let F;e[68]!==Pe?(F=Pe.map(At),e[68]=Pe,e[69]=F):F=e[69];let I;e[70]!==F?(I=t.jsxs(Ge,{children:[ve,F]}),e[70]=F,e[71]=I):I=e[71];let P;e[72]!==Be||e[73]!==k||e[74]!==I?(P=t.jsxs(Je,{value:Be,onValueChange:k,children:[Ne,I]}),e[72]=Be,e[73]=k,e[74]=I,e[75]=P):P=e[75];const Ve=c.est_actif||"";let R;e[76]!==n?(R=s=>n("est_actif",s),e[76]=n,e[77]=R):R=e[77];let _e;e[78]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsxs(ze,{className:"w-[140px]",children:[t.jsx(Dt,{className:"h-4 w-4 mr-2"}),t.jsx(Xe,{placeholder:"Statut"})]}),e[78]=_e):_e=e[78];let Se;e[79]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsxs(Ge,{children:[t.jsx(d,{value:"all",children:"Tous statuts"}),t.jsx(d,{value:"true",children:"Actif"}),t.jsx(d,{value:"false",children:"Inactif"})]}),e[79]=Se):Se=e[79];let $;e[80]!==Ve||e[81]!==R?($=t.jsxs(Je,{value:Ve,onValueChange:R,children:[_e,Se]}),e[80]=Ve,e[81]=R,e[82]=$):$=e[82];let M;e[83]!==c.per_page?(M=c.per_page?.toString()||"10",e[83]=c.per_page,e[84]=M):M=e[84];let E;e[85]!==n?(E=s=>n("per_page",s),e[85]=n,e[86]=E):E=e[86];let we;e[87]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx(ze,{className:"w-[100px]",children:t.jsx(Xe,{placeholder:"Par page"})}),e[87]=we):we=e[87];let ye;e[88]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsxs(Ge,{children:[t.jsx(d,{value:"10",children:"10"}),t.jsx(d,{value:"25",children:"25"}),t.jsx(d,{value:"50",children:"50"})]}),e[88]=ye):ye=e[88];let B;e[89]!==M||e[90]!==E?(B=t.jsxs(Je,{value:M,onValueChange:E,children:[we,ye]}),e[89]=M,e[90]=E,e[91]=B):B=e[91];let V;e[92]!==P||e[93]!==$||e[94]!==B?(V=t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[P,$,B]}),e[92]=P,e[93]=$,e[94]=B,e[95]=V):V=e[95];let H;e[96]!==A||e[97]!==V?(H=t.jsx("div",{className:"bg-card rounded-lg border p-4 mb-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[A,V]})}),e[96]=A,e[97]=V,e[98]=H):H=e[98];const He=a.length===l.data.length&&l.data.length>0;let L;e[99]!==Re||e[100]!==He?(L=t.jsx(h,{className:"w-12",children:t.jsx(lt,{checked:He,onCheckedChange:Re})}),e[99]=Re,e[100]=He,e[101]=L):L=e[101];let Ce,Te,De,Ae,ke,Fe;e[102]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx(h,{children:"Nom du frais"}),Te=t.jsx(h,{children:"Année scolaire"}),De=t.jsx(h,{children:"Montant total"}),Ae=t.jsx(h,{children:"Statut"}),ke=t.jsx(h,{children:"Créé le"}),Fe=t.jsx(h,{className:"text-right",children:"Actions"}),e[102]=Ce,e[103]=Te,e[104]=De,e[105]=Ae,e[106]=ke,e[107]=Fe):(Ce=e[102],Te=e[103],De=e[104],Ae=e[105],ke=e[106],Fe=e[107]);let U;e[108]!==L?(U=t.jsx(ut,{children:t.jsxs(qe,{children:[L,Ce,Te,De,Ae,ke,Fe]})}),e[108]=L,e[109]=U):U=e[109];let q;e[110]!==l.data||e[111]!==$e||e[112]!==a?(q=l.data.length===0?t.jsx(qe,{children:t.jsxs(m,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:[t.jsx(Ke,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),t.jsx("p",{className:"text-lg",children:"Aucune configuration trouvée"})]})}):l.data.map(s=>t.jsxs(qe,{className:"hover:bg-muted/50",children:[t.jsx(m,{children:t.jsx(lt,{checked:a.includes(s.id),onCheckedChange:W=>$e(s.id,W===!0)})}),t.jsx(m,{children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:s.nom_frais}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:["Réf: ",s.ref]})]})}),t.jsx(m,{children:t.jsx(st,{variant:"outline",children:s.annee_scolaire})}),t.jsx(m,{className:"font-semibold",children:Me(s.montant_total)}),t.jsx(m,{children:t.jsx(st,{variant:s.est_actif?"default":"secondary",children:s.est_actif?t.jsxs(t.Fragment,{children:[t.jsx(Oe,{className:"h-3 w-3 mr-1"}),"Actif"]}):t.jsxs(t.Fragment,{children:[t.jsx(Qe,{className:"h-3 w-3 mr-1"}),"Inactif"]})})}),t.jsx(m,{children:t.jsx("div",{className:"text-sm",children:new Date(s.created_at).toLocaleDateString("fr-FR")})}),t.jsx(m,{className:"text-right",children:t.jsxs(Ye,{children:[t.jsx(Ze,{asChild:!0,children:t.jsx(Ue,{variant:"ghost",size:"icon",children:t.jsx(_t,{className:"h-4 w-4"})})}),t.jsxs(et,{align:"end",children:[t.jsx(Le,{href:`/configuration-frais/${s.id}`,children:t.jsxs(K,{children:[t.jsx(St,{className:"h-4 w-4 mr-2"}),"Voir"]})}),t.jsx(Le,{href:`/configuration-frais/${s.id}/edit`,children:t.jsxs(K,{children:[t.jsx(wt,{className:"h-4 w-4 mr-2"}),"Modifier"]})}),t.jsx(tt,{}),t.jsxs(K,{onClick:()=>nt(s),className:"text-destructive",children:[t.jsx(it,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]})})]},s.id)),e[110]=l.data,e[111]=$e,e[112]=a,e[113]=q):q=e[113];let z;e[114]!==q?(z=t.jsx(jt,{children:q}),e[114]=q,e[115]=z):z=e[115];let X;e[116]!==U||e[117]!==z?(X=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs(pt,{children:[U,z]})}),e[116]=U,e[117]=z,e[118]=X):X=e[118];let G;e[119]!==c||e[120]!==l.current_page||e[121]!==l.last_page?(G=l.last_page>1&&t.jsx("div",{className:"border-t p-4",children:t.jsx(bt,{currentPage:l.current_page,totalPages:l.last_page,onPageChange:s=>{Y.get("/configuration-frais",{...c,page:s},{preserveState:!0,replace:!0})}})}),e[119]=c,e[120]=l.current_page,e[121]=l.last_page,e[122]=G):G=e[122];let J;e[123]!==X||e[124]!==G?(J=t.jsxs("div",{className:"bg-card rounded-lg border overflow-hidden",children:[X,G]}),e[123]=X,e[124]=G,e[125]=J):J=e[125];let Ie;return e[126]!==j||e[127]!==p||e[128]!==g||e[129]!==D||e[130]!==H||e[131]!==J?(Ie=t.jsxs(t.Fragment,{children:[ie,t.jsxs(Nt,{activeRoute:"/configuration-frais",children:[j,p,g,D,H,J]})]}),e[126]=j,e[127]=p,e[128]=g,e[129]=D,e[130]=H,e[131]=J,e[132]=Ie):Ie=e[132],Ie}function At(i){return t.jsx(d,{value:i,children:i},i)}function kt(i){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD"}).format(i).replace("$US","$")}function Ft(i){confirm(`Êtes-vous sûr de vouloir supprimer "${i.nom_frais}" ?`)&&Y.delete(`/configuration-frais/${i.id}`)}function It(i){return i.id}export{ds as default};
