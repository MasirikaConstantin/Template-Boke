import{c as xs,r as Ke,R as hs,j as s,L as Y,b as Z,H as fs}from"./app-5Dbz7raP.js";import{B as He}from"./createLucideIcon-BbQnreOs.js";import{I as ps}from"./input-n7OeVstE.js";import{T as Ge,a as m,b as x,c as us,d as js,e as vs}from"./table-Bm781hcr.js";import{a as Qe,b as We,c as Ye,d as h,e as Ze,S as gs,D as bs}from"./DashboardLayout-ByUj4ROS.js";import{c as qe,a as ze,b as Oe,S as Xe,d as f}from"./select-DSj7oFl5.js";import{B as Je}from"./badge-_QgTGLp4.js";import{C as es}from"./checkbox-BHn2uz1N.js";import{A as ss,a as ts}from"./alert-Dr0NOMKL.js";import{P as Ns}from"./pagination-CSyV-AEn.js";import{P as _s}from"./PageHeader-C2_xgV5F.js";import{U as Ie}from"./users-DC4hzx-j.js";import{C as ls}from"./circle-check-big-CplMLszt.js";import{C as rs}from"./circle-x-BDmlNNr6.js";import{T as as}from"./trash-2-Dbv03aAw.js";import{P as Ss}from"./phone-BUaYeWc-.js";import{M as ys}from"./mail-DuPvuC6b.js";import{E as ws}from"./ellipsis-vertical-KWQZLSjj.js";import{E as Cs}from"./eye-B_ld2xZG.js";import{L as Ts}from"./link-BwD2qVO6.js";import{S as ks}from"./square-pen-CE_HZanB.js";import{P as Ps}from"./plus-p4KsQSb1.js";import{U as Rs}from"./user-plus-Ig-hp-zJ.js";import{F as As}from"./funnel-D90CAqSM.js";import{U as Ms}from"./user-C_rpr3N_.js";/* empty css            */import"./index-BlzE7Lae.js";import"./calendar-ByLnJ856.js";import"./file-text-CCJGyrxq.js";import"./index-B-6lPV8j.js";import"./check-CkeGpNl8.js";import"./house-Dl9tCatm.js";function jt(c){const e=xs.c(133),{responsables:l,filters:i,stats:a,typesResponsable:$e,flash:o}=c;let ee;e[0]===Symbol.for("react.memo_cache_sentinel")?(ee=[],e[0]=ee):ee=e[0];const[r,K]=Ke.useState(ee),[d,cs]=Ke.useState(i.search||"");let se,te;e[1]!==d?(se=()=>{const t=setTimeout(()=>{Z.get("/responsables",{search:d},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(t)},te=[d],e[1]=d,e[2]=se,e[3]=te):(se=e[2],te=e[3]),hs.useEffect(se,te);let le;e[4]!==i?(le=(t,W)=>{Z.get("/responsables",{...i,[t]:W},{preserveState:!0,replace:!0})},e[4]=i,e[5]=le):le=e[5];const n=le;let re;e[6]!==l.data?(re=t=>{K(t?l.data.map(Ls):[])},e[6]=l.data,e[7]=re):re=e[7];const Be=re;let ae;e[8]!==r?(ae=(t,W)=>{K(W?[...r,t]:r.filter(ds=>ds!==t))},e[8]=r,e[9]=ae):ae=e[9];const Ee=ae;let ce;e[10]!==r?(ce=t=>{r.length!==0&&confirm(`√ätes-vous s√ªr de vouloir effectuer cette action sur ${r.length} responsable(s) ?`)&&Z.post("/responsables/bulk-action",{ids:r,action:t},{onSuccess:()=>K([])})},e[10]=r,e[11]=ce):ce=e[11];const Q=ce,is=Es,ns=Bs,os=$s,ms=Is;let ie;e[12]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(fs,{title:"Gestion des responsables"}),e[12]=ie):ie=e[12];const Le=`${l.total} responsable(s) - ${a.avec_eleves} avec √©l√®ves`;let ne;e[13]===Symbol.for("react.memo_cache_sentinel")?(ne=[{label:"Dashboard",href:"/dashboard"},{label:"Responsables",href:"/responsables"}],e[13]=ne):ne=e[13];let p;e[14]!==Q||e[15]!==r.length?(p=r.length>0&&s.jsxs(Qe,{children:[s.jsx(We,{asChild:!0,children:s.jsxs(He,{variant:"outline",children:[s.jsx(Ie,{className:"h-4 w-4 mr-2"}),"Actions (",r.length,")"]})}),s.jsxs(Ye,{align:"end",children:[s.jsxs(h,{onClick:()=>Q("activate"),children:[s.jsx(ls,{className:"h-4 w-4 mr-2"}),"Activer"]}),s.jsxs(h,{onClick:()=>Q("deactivate"),children:[s.jsx(rs,{className:"h-4 w-4 mr-2"}),"D√©sactiver"]}),s.jsx(Ze,{}),s.jsxs(h,{onClick:()=>Q("delete"),className:"text-destructive",children:[s.jsx(as,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]}),e[14]=Q,e[15]=r.length,e[16]=p):p=e[16];let oe;e[17]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(Y,{href:"/responsables/create",children:s.jsxs(He,{children:[s.jsx(Ps,{className:"h-4 w-4 mr-2"}),"Nouveau responsable"]})}),e[17]=oe):oe=e[17];let u;e[18]!==p?(u=s.jsxs("div",{className:"flex items-center gap-2",children:[p,oe]}),e[18]=p,e[19]=u):u=e[19];let j;e[20]!==u||e[21]!==Le?(j=s.jsx(_s,{title:"Responsables l√©gaux",description:Le,breadcrumb:ne,actions:u}),e[20]=u,e[21]=Le,e[22]=j):j=e[22];let v;e[23]!==o?(v=o?.success&&s.jsxs(ss,{className:"mb-6",children:[s.jsx(ls,{className:"h-4 w-4"}),s.jsx(ts,{children:o.success})]}),e[23]=o,e[24]=v):v=e[24];let g;e[25]!==o?(g=o?.error&&s.jsxs(ss,{variant:"destructive",className:"mb-6",children:[s.jsx(rs,{className:"h-4 w-4"}),s.jsx(ts,{children:o.error})]}),e[25]=o,e[26]=g):g=e[26];let me;e[27]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e[27]=me):me=e[27];let b;e[28]!==a.total?(b=s.jsxs("div",{children:[me,s.jsx("p",{className:"text-2xl font-bold",children:a.total})]}),e[28]=a.total,e[29]=b):b=e[29];let de;e[30]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(Ie,{className:"h-8 w-8 text-primary"}),e[30]=de):de=e[30];let N;e[31]!==b?(N=s.jsx("div",{className:"bg-card rounded-lg border p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[b,de]})}),e[31]=b,e[32]=N):N=e[32];let xe;e[33]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Avec √©l√®ves"}),e[33]=xe):xe=e[33];let _;e[34]!==a.avec_eleves?(_=s.jsxs("div",{children:[xe,s.jsx("p",{className:"text-2xl font-bold",children:a.avec_eleves})]}),e[34]=a.avec_eleves,e[35]=_):_=e[35];let he;e[36]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(Rs,{className:"h-8 w-8 text-green-500"}),e[36]=he):he=e[36];let S;e[37]!==_?(S=s.jsx("div",{className:"bg-card rounded-lg border p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[_,he]})}),e[37]=_,e[38]=S):S=e[38];let fe;e[39]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx("p",{className:"text-sm text-muted-foreground",children:"P√®res"}),e[39]=fe):fe=e[39];let y;e[40]!==a.pere?(y=s.jsxs("div",{children:[fe,s.jsx("p",{className:"text-2xl font-bold",children:a.pere})]}),e[40]=a.pere,e[41]=y):y=e[41];let pe;e[42]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx("span",{className:"text-2xl",children:"üë®"}),e[42]=pe):pe=e[42];let w;e[43]!==y?(w=s.jsx("div",{className:"bg-card rounded-lg border p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[y,pe]})}),e[43]=y,e[44]=w):w=e[44];let ue;e[45]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx("p",{className:"text-sm text-muted-foreground",children:"M√®res"}),e[45]=ue):ue=e[45];let C;e[46]!==a.mere?(C=s.jsxs("div",{children:[ue,s.jsx("p",{className:"text-2xl font-bold",children:a.mere})]}),e[46]=a.mere,e[47]=C):C=e[47];let je;e[48]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx("span",{className:"text-2xl",children:"üë©"}),e[48]=je):je=e[48];let T;e[49]!==C?(T=s.jsx("div",{className:"bg-card rounded-lg border p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[C,je]})}),e[49]=C,e[50]=T):T=e[50];let ve;e[51]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Tuteurs"}),e[51]=ve):ve=e[51];let k;e[52]!==a.tuteur?(k=s.jsxs("div",{children:[ve,s.jsx("p",{className:"text-2xl font-bold",children:a.tuteur})]}),e[52]=a.tuteur,e[53]=k):k=e[53];let ge;e[54]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx("span",{className:"text-2xl",children:"üë§"}),e[54]=ge):ge=e[54];let P;e[55]!==k?(P=s.jsx("div",{className:"bg-card rounded-lg border p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[k,ge]})}),e[55]=k,e[56]=P):P=e[56];let R;e[57]!==N||e[58]!==S||e[59]!==w||e[60]!==T||e[61]!==P?(R=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-6",children:[N,S,w,T,P]}),e[57]=N,e[58]=S,e[59]=w,e[60]=T,e[61]=P,e[62]=R):R=e[62];let be;e[63]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e[63]=be):be=e[63];let Ne;e[64]===Symbol.for("react.memo_cache_sentinel")?(Ne=t=>cs(t.target.value),e[64]=Ne):Ne=e[64];let A;e[65]!==d?(A=s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[be,s.jsx(ps,{placeholder:"Rechercher par nom, t√©l√©phone, email...",value:d,onChange:Ne,className:"pl-10"})]})}),e[65]=d,e[66]=A):A=e[66];const Ue=i.type_responsable||"all";let M;e[67]!==n?(M=t=>n("type_responsable",t),e[67]=n,e[68]=M):M=e[68];let _e;e[69]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsxs(ze,{className:"w-[160px]",children:[s.jsx(As,{className:"h-4 w-4 mr-2"}),s.jsx(Oe,{placeholder:"Type"})]}),e[69]=_e):_e=e[69];let D;e[70]!==$e?(D=s.jsx(qe,{children:Object.entries($e).map(Ds)}),e[70]=$e,e[71]=D):D=e[71];let I;e[72]!==Ue||e[73]!==M||e[74]!==D?(I=s.jsxs(Xe,{value:Ue,onValueChange:M,children:[_e,D]}),e[72]=Ue,e[73]=M,e[74]=D,e[75]=I):I=e[75];const Ve=i.est_actif||"all";let $;e[76]!==n?($=t=>n("est_actif",t),e[76]=n,e[77]=$):$=e[77];let Se;e[78]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsxs(ze,{className:"w-[140px]",children:[s.jsx(Ms,{className:"h-4 w-4 mr-2"}),s.jsx(Oe,{placeholder:"Statut"})]}),e[78]=Se):Se=e[78];let ye;e[79]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsxs(qe,{children:[s.jsx(f,{value:"all",children:"Tous"}),s.jsx(f,{value:"true",children:"Avec √©l√®ves"}),s.jsx(f,{value:"false",children:"Sans √©l√®ves"})]}),e[79]=ye):ye=e[79];let B;e[80]!==Ve||e[81]!==$?(B=s.jsxs(Xe,{value:Ve,onValueChange:$,children:[Se,ye]}),e[80]=Ve,e[81]=$,e[82]=B):B=e[82];let E;e[83]!==i.per_page?(E=i.per_page?.toString()||"10",e[83]=i.per_page,e[84]=E):E=e[84];let L;e[85]!==n?(L=t=>n("per_page",t),e[85]=n,e[86]=L):L=e[86];let we;e[87]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsx(ze,{className:"w-[100px]",children:s.jsx(Oe,{placeholder:"Par page"})}),e[87]=we):we=e[87];let Ce;e[88]===Symbol.for("react.memo_cache_sentinel")?(Ce=s.jsxs(qe,{children:[s.jsx(f,{value:"10",children:"10"}),s.jsx(f,{value:"25",children:"25"}),s.jsx(f,{value:"50",children:"50"})]}),e[88]=Ce):Ce=e[88];let U;e[89]!==E||e[90]!==L?(U=s.jsxs(Xe,{value:E,onValueChange:L,children:[we,Ce]}),e[89]=E,e[90]=L,e[91]=U):U=e[91];let V;e[92]!==I||e[93]!==B||e[94]!==U?(V=s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[I,B,U]}),e[92]=I,e[93]=B,e[94]=U,e[95]=V):V=e[95];let F;e[96]!==A||e[97]!==V?(F=s.jsx("div",{className:"bg-card rounded-lg border p-4 mb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[A,V]})}),e[96]=A,e[97]=V,e[98]=F):F=e[98];const Fe=r.length===l.data.length&&l.data.length>0;let H;e[99]!==Be||e[100]!==Fe?(H=s.jsx(x,{className:"w-12",children:s.jsx(es,{checked:Fe,onCheckedChange:Be})}),e[99]=Be,e[100]=Fe,e[101]=H):H=e[101];let Te,ke,Pe,Re,Ae,Me;e[102]===Symbol.for("react.memo_cache_sentinel")?(Te=s.jsx(x,{children:"Responsable"}),ke=s.jsx(x,{children:"Type"}),Pe=s.jsx(x,{children:"Contact"}),Re=s.jsx(x,{children:"√âl√®ves"}),Ae=s.jsx(x,{children:"Sexe"}),Me=s.jsx(x,{className:"text-right",children:"Actions"}),e[102]=Te,e[103]=ke,e[104]=Pe,e[105]=Re,e[106]=Ae,e[107]=Me):(Te=e[102],ke=e[103],Pe=e[104],Re=e[105],Ae=e[106],Me=e[107]);let G;e[108]!==H?(G=s.jsx(us,{children:s.jsxs(Ge,{children:[H,Te,ke,Pe,Re,Ae,Me]})}),e[108]=H,e[109]=G):G=e[109];let q;e[110]!==Ee||e[111]!==l.data||e[112]!==r?(q=l.data.length===0?s.jsx(Ge,{children:s.jsxs(m,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:[s.jsx(Ie,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),s.jsx("p",{className:"text-lg",children:"Aucun responsable trouv√©"}),s.jsx("p",{className:"text-sm mt-2",children:s.jsx(Y,{href:"/responsables/create",className:"text-primary hover:underline",children:"Cr√©er votre premier responsable"})})]})}):l.data.map(t=>s.jsxs(Ge,{className:"hover:bg-muted/50",children:[s.jsx(m,{children:s.jsx(es,{checked:r.includes(t.id),onCheckedChange:W=>Ee(t.id,W===!0)})}),s.jsx(m,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:t.nom_complet}),t.profession&&s.jsx("div",{className:"text-xs",children:t.profession})]})}),s.jsx(m,{children:s.jsxs(Je,{variant:"outline",className:"gap-1",children:[s.jsx("span",{className:"text-sm",children:os(t.type_responsable)}),ns(t.type_responsable)]})}),s.jsx(m,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(Ss,{className:"h-3 w-3 text-muted-foreground"}),t.telephone_1]}),t.email&&s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(ys,{className:"h-3 w-3 text-muted-foreground"}),s.jsx("span",{className:"truncate max-w-[150px]",children:t.email})]})]})}),s.jsx(m,{children:s.jsx("div",{className:"flex flex-col gap-1",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ie,{className:"h-3 w-3 text-muted-foreground"}),s.jsxs("span",{className:"font-medium",children:[t.eleves_count," √©l√®ve(s)"]})]})})}),s.jsx(m,{children:ms(t.sexe)}),s.jsx(m,{className:"text-right",children:s.jsxs(Qe,{children:[s.jsx(We,{asChild:!0,children:s.jsx(He,{variant:"ghost",size:"icon",children:s.jsx(ws,{className:"h-4 w-4"})})}),s.jsxs(Ye,{align:"end",children:[s.jsx(Y,{href:`/responsables/${t.id}`,children:s.jsxs(h,{children:[s.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Voir"]})}),s.jsx(Y,{href:`/responsables/${t.id}/eleves`,children:s.jsxs(h,{children:[s.jsx(Ts,{className:"h-4 w-4 mr-2"}),"G√©rer √©l√®ves"]})}),s.jsx(Y,{href:`/responsables/${t.id}/edit`,children:s.jsxs(h,{children:[s.jsx(ks,{className:"h-4 w-4 mr-2"}),"Modifier"]})}),s.jsx(Ze,{}),s.jsxs(h,{onClick:()=>is(t),className:"text-destructive",disabled:t.eleves_count>0,children:[s.jsx(as,{className:"h-4 w-4 mr-2"}),"Supprimer",t.eleves_count>0&&s.jsx("span",{className:"text-xs ml-2",children:"(avec √©l√®ves)"})]})]})]})})]},t.id)),e[110]=Ee,e[111]=l.data,e[112]=r,e[113]=q):q=e[113];let z;e[114]!==q?(z=s.jsx(js,{children:q}),e[114]=q,e[115]=z):z=e[115];let O;e[116]!==G||e[117]!==z?(O=s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(vs,{children:[G,z]})}),e[116]=G,e[117]=z,e[118]=O):O=e[118];let X;e[119]!==i||e[120]!==l.current_page||e[121]!==l.last_page?(X=l.last_page>1&&s.jsx("div",{className:"border-t p-4",children:s.jsx(Ns,{currentPage:l.current_page,totalPages:l.last_page,onPageChange:t=>{Z.get("/responsables",{...i,page:t},{preserveState:!0,replace:!0})}})}),e[119]=i,e[120]=l.current_page,e[121]=l.last_page,e[122]=X):X=e[122];let J;e[123]!==O||e[124]!==X?(J=s.jsxs("div",{className:"bg-card rounded-lg border overflow-hidden",children:[O,X]}),e[123]=O,e[124]=X,e[125]=J):J=e[125];let De;return e[126]!==j||e[127]!==v||e[128]!==g||e[129]!==R||e[130]!==F||e[131]!==J?(De=s.jsxs(s.Fragment,{children:[ie,s.jsxs(bs,{activeRoute:"/responsables",children:[j,v,g,R,F,J]})]}),e[126]=j,e[127]=v,e[128]=g,e[129]=R,e[130]=F,e[131]=J,e[132]=De):De=e[132],De}function Ds(c){const[e,l]=c;return s.jsx(f,{value:e,children:l},e)}function Is(c){return c==="M"?s.jsx(Je,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:"üë® Masculin"}):s.jsx(Je,{variant:"outline",className:"bg-pink-50 text-pink-700 border-pink-200",children:"üë© F√©minin"})}function $s(c){switch(c){case"pere":return"üë®";case"mere":return"üë©";case"tuteur":return"üë§";default:return"üë•"}}function Bs(c){switch(c){case"pere":return"P√®re";case"mere":return"M√®re";case"tuteur":return"Tuteur";default:return"Autre"}}function Es(c){if(c.eleves_count>0){alert("Impossible de supprimer ce responsable car il est associ√© √† des √©l√®ves.");return}confirm(`√ätes-vous s√ªr de vouloir supprimer "${c.nom_complet}" ?`)&&Z.delete(`/responsables/${c.id}`)}function Ls(c){return c.id}export{jt as default};
