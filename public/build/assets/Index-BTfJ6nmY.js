import{c as mt,r as We,R as ft,j as t,L as Le,b as Y,H as ht}from"./app-D-231Fnt.js";import{B as qe}from"./index-C-s1mqx-.js";import{I as xt}from"./input-sUimVrWt.js";import{T as ze,a as d,b as h,c as ut,d as jt,e as pt}from"./table-Caj-Fxr3.js";import{a as Ye,b as Ze,h as Ue,d as et,e as K,f as tt,S as gt,C as bt,D as Nt}from"./DashboardLayout-D6ki3XIQ.js";import{a as Xe,b as Ge,d as m,c as Je,S as Ke}from"./select-X6BbxeMk.js";import{B as st}from"./badge-DgIKhVRa.js";import{C as lt}from"./checkbox-DirYlvr0.js";import{A as at,a as rt}from"./alert-Fsv0Ayvc.js";import{T as it,E as vt,P as _t,a as St}from"./pagination-Ccj68PWC.js";import{P as wt}from"./PageHeader-odzADJsY.js";import{C as Oe}from"./circle-check-big-DwrXzvBC.js";import{C as Qe}from"./circle-x-CMaWMXds.js";import{E as yt}from"./eye-BWv7RI_h.js";import{S as Ct}from"./square-pen-BBZe8Pwi.js";import{T as Tt}from"./trending-up-BVl_lIrx.js";import{F as At}from"./funnel-Dwh-Ul1c.js";/* empty css            */import"./user-DOQl8h22.js";import"./index-DSBDNaI8.js";import"./house-Bh8iUq9b.js";function es(i){const e=mt.c(133),{frais:l,filters:c,stats:r,annees:Pe,flash:o}=i;let Z;e[0]===Symbol.for("react.memo_cache_sentinel")?(Z=[],e[0]=Z):Z=e[0];const[a,O]=We.useState(Z),[f,ct]=We.useState(c.search||"");let ee,te;e[1]!==f?(ee=()=>{const s=setTimeout(()=>{Y.get("/configuration-frais",{search:f},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(s)},te=[f],e[1]=f,e[2]=ee,e[3]=te):(ee=e[2],te=e[3]),ft.useEffect(ee,te);let se;e[4]!==c?(se=(s,W)=>{Y.get("/configuration-frais",{...c,[s]:W},{preserveState:!0,replace:!0})},e[4]=c,e[5]=se):se=e[5];const n=se;let le;e[6]!==l.data?(le=s=>{O(s?l.data.map(It):[])},e[6]=l.data,e[7]=le):le=e[7];const Re=le;let ae;e[8]!==a?(ae=(s,W)=>{O(W?[...a,s]:a.filter(dt=>dt!==s))},e[8]=a,e[9]=ae):ae=e[9];const Me=ae;let re;e[10]!==a?(re=s=>{a.length!==0&&confirm(`Êtes-vous sûr de vouloir effectuer cette action sur ${a.length} configuration(s) ?`)&&Y.post("/configuration-frais/bulk-action",{ids:a,action:s},{onSuccess:()=>O([])})},e[10]=a,e[11]=re):re=e[11];const Q=re,nt=Ft,Ee=kt;let ie;e[12]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(ht,{title:"Configuration des frais"}),e[12]=ie):ie=e[12];const ot=l.total;let ce;e[13]!==r.montant_total?(ce=Ee(r.montant_total),e[13]=r.montant_total,e[14]=ce):ce=e[14];const $e=`${ot} configurations - Total: ${ce}`;let ne;e[15]===Symbol.for("react.memo_cache_sentinel")?(ne=[{label:"Dashboard",href:"/dashboard"},{label:"Configuration frais",href:"/configuration-frais"}],e[15]=ne):ne=e[15];let x;e[16]!==Q||e[17]!==a.length?(x=a.length>0&&t.jsxs(Ye,{children:[t.jsx(Ze,{asChild:!0,children:t.jsxs(qe,{variant:"outline",children:[t.jsx(Ue,{className:"h-4 w-4 mr-2"}),"Actions (",a.length,")"]})}),t.jsxs(et,{align:"end",children:[t.jsxs(K,{onClick:()=>Q("activate"),children:[t.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Activer"]}),t.jsxs(K,{onClick:()=>Q("deactivate"),children:[t.jsx(Qe,{className:"h-4 w-4 mr-2"}),"Désactiver"]}),t.jsx(tt,{}),t.jsxs(K,{onClick:()=>Q("delete"),className:"text-destructive",children:[t.jsx(it,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]}),e[16]=Q,e[17]=a.length,e[18]=x):x=e[18];let oe;e[19]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(Le,{href:"/configuration-frais/create",children:t.jsxs(qe,{children:[t.jsx(St,{className:"h-4 w-4 mr-2"}),"Nouvelle configuration"]})}),e[19]=oe):oe=e[19];let u;e[20]!==x?(u=t.jsxs("div",{className:"flex items-center gap-2",children:[x,oe]}),e[20]=x,e[21]=u):u=e[21];let j;e[22]!==$e||e[23]!==u?(j=t.jsx(wt,{title:"Configuration des frais",description:$e,breadcrumb:ne,actions:u}),e[22]=$e,e[23]=u,e[24]=j):j=e[24];let p;e[25]!==o?(p=o?.success&&t.jsx(at,{className:"mb-6",children:t.jsx(rt,{children:o.success})}),e[25]=o,e[26]=p):p=e[26];let g;e[27]!==o?(g=o?.error&&t.jsx(at,{variant:"destructive",className:"mb-6",children:t.jsx(rt,{children:o.error})}),e[27]=o,e[28]=g):g=e[28];let de;e[29]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total configurations"}),e[29]=de):de=e[29];let b;e[30]!==r.total?(b=t.jsxs("div",{children:[de,t.jsx("p",{className:"text-2xl font-bold",children:r.total})]}),e[30]=r.total,e[31]=b):b=e[31];let me;e[32]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(Ue,{className:"h-8 w-8 text-primary"}),e[32]=me):me=e[32];let N;e[33]!==b?(N=t.jsx("div",{className:"bg-card rounded-lg border p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[b,me]})}),e[33]=b,e[34]=N):N=e[34];let fe;e[35]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Actifs"}),e[35]=fe):fe=e[35];let v;e[36]!==r.actifs?(v=t.jsxs("div",{children:[fe,t.jsx("p",{className:"text-2xl font-bold",children:r.actifs})]}),e[36]=r.actifs,e[37]=v):v=e[37];let he;e[38]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(Oe,{className:"h-8 w-8 text-green-500"}),e[38]=he):he=e[38];let _;e[39]!==v?(_=t.jsx("div",{className:"bg-card rounded-lg border p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[v,he]})}),e[39]=v,e[40]=_):_=e[40];let xe;e[41]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Inactifs"}),e[41]=xe):xe=e[41];let S;e[42]!==r.inactifs?(S=t.jsxs("div",{children:[xe,t.jsx("p",{className:"text-2xl font-bold",children:r.inactifs})]}),e[42]=r.inactifs,e[43]=S):S=e[43];let ue;e[44]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(Qe,{className:"h-8 w-8 text-amber-500"}),e[44]=ue):ue=e[44];let w;e[45]!==S?(w=t.jsx("div",{className:"bg-card rounded-lg border p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[S,ue]})}),e[45]=S,e[46]=w):w=e[46];let je;e[47]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant total"}),e[47]=je):je=e[47];let y;e[48]!==r.montant_total?(y=Ee(r.montant_total),e[48]=r.montant_total,e[49]=y):y=e[49];let C;e[50]!==y?(C=t.jsxs("div",{children:[je,t.jsx("p",{className:"text-2xl font-bold",children:y})]}),e[50]=y,e[51]=C):C=e[51];let pe;e[52]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(Tt,{className:"h-8 w-8 text-blue-500"}),e[52]=pe):pe=e[52];let T;e[53]!==C?(T=t.jsx("div",{className:"bg-card rounded-lg border p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[C,pe]})}),e[53]=C,e[54]=T):T=e[54];let A;e[55]!==N||e[56]!==_||e[57]!==w||e[58]!==T?(A=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[N,_,w,T]}),e[55]=N,e[56]=_,e[57]=w,e[58]=T,e[59]=A):A=e[59];let ge;e[60]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e[60]=ge):ge=e[60];let be;e[61]===Symbol.for("react.memo_cache_sentinel")?(be=s=>ct(s.target.value),e[61]=be):be=e[61];let D;e[62]!==f?(D=t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[ge,t.jsx(xt,{placeholder:"Rechercher par nom ou année...",value:f,onChange:be,className:"pl-10"})]})}),e[62]=f,e[63]=D):D=e[63];const Be=c.annee_scolaire||"";let k;e[64]!==n?(k=s=>n("annee_scolaire",s),e[64]=n,e[65]=k):k=e[65];let Ne;e[66]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsxs(Xe,{className:"w-[160px]",children:[t.jsx(bt,{className:"h-4 w-4 mr-2"}),t.jsx(Ge,{placeholder:"Année scolaire"})]}),e[66]=Ne):Ne=e[66];let ve;e[67]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx(m,{value:"all",children:"Toutes années"}),e[67]=ve):ve=e[67];let F;e[68]!==Pe?(F=Pe.map(Dt),e[68]=Pe,e[69]=F):F=e[69];let I;e[70]!==F?(I=t.jsxs(Je,{children:[ve,F]}),e[70]=F,e[71]=I):I=e[71];let P;e[72]!==Be||e[73]!==k||e[74]!==I?(P=t.jsxs(Ke,{value:Be,onValueChange:k,children:[Ne,I]}),e[72]=Be,e[73]=k,e[74]=I,e[75]=P):P=e[75];const Ve=c.est_actif||"";let R;e[76]!==n?(R=s=>n("est_actif",s),e[76]=n,e[77]=R):R=e[77];let _e;e[78]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsxs(Xe,{className:"w-[140px]",children:[t.jsx(At,{className:"h-4 w-4 mr-2"}),t.jsx(Ge,{placeholder:"Statut"})]}),e[78]=_e):_e=e[78];let Se;e[79]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsxs(Je,{children:[t.jsx(m,{value:"all",children:"Tous statuts"}),t.jsx(m,{value:"true",children:"Actif"}),t.jsx(m,{value:"false",children:"Inactif"})]}),e[79]=Se):Se=e[79];let M;e[80]!==Ve||e[81]!==R?(M=t.jsxs(Ke,{value:Ve,onValueChange:R,children:[_e,Se]}),e[80]=Ve,e[81]=R,e[82]=M):M=e[82];let E;e[83]!==c.per_page?(E=c.per_page?.toString()||"10",e[83]=c.per_page,e[84]=E):E=e[84];let $;e[85]!==n?($=s=>n("per_page",s),e[85]=n,e[86]=$):$=e[86];let we;e[87]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx(Xe,{className:"w-[100px]",children:t.jsx(Ge,{placeholder:"Par page"})}),e[87]=we):we=e[87];let ye;e[88]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsxs(Je,{children:[t.jsx(m,{value:"10",children:"10"}),t.jsx(m,{value:"25",children:"25"}),t.jsx(m,{value:"50",children:"50"})]}),e[88]=ye):ye=e[88];let B;e[89]!==E||e[90]!==$?(B=t.jsxs(Ke,{value:E,onValueChange:$,children:[we,ye]}),e[89]=E,e[90]=$,e[91]=B):B=e[91];let V;e[92]!==P||e[93]!==M||e[94]!==B?(V=t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[P,M,B]}),e[92]=P,e[93]=M,e[94]=B,e[95]=V):V=e[95];let H;e[96]!==D||e[97]!==V?(H=t.jsx("div",{className:"bg-card rounded-lg border p-4 mb-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[D,V]})}),e[96]=D,e[97]=V,e[98]=H):H=e[98];const He=a.length===l.data.length&&l.data.length>0;let L;e[99]!==Re||e[100]!==He?(L=t.jsx(h,{className:"w-12",children:t.jsx(lt,{checked:He,onCheckedChange:Re})}),e[99]=Re,e[100]=He,e[101]=L):L=e[101];let Ce,Te,Ae,De,ke,Fe;e[102]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx(h,{children:"Nom du frais"}),Te=t.jsx(h,{children:"Année scolaire"}),Ae=t.jsx(h,{children:"Montant total"}),De=t.jsx(h,{children:"Statut"}),ke=t.jsx(h,{children:"Créé le"}),Fe=t.jsx(h,{className:"text-right",children:"Actions"}),e[102]=Ce,e[103]=Te,e[104]=Ae,e[105]=De,e[106]=ke,e[107]=Fe):(Ce=e[102],Te=e[103],Ae=e[104],De=e[105],ke=e[106],Fe=e[107]);let q;e[108]!==L?(q=t.jsx(ut,{children:t.jsxs(ze,{children:[L,Ce,Te,Ae,De,ke,Fe]})}),e[108]=L,e[109]=q):q=e[109];let z;e[110]!==l.data||e[111]!==Me||e[112]!==a?(z=l.data.length===0?t.jsx(ze,{children:t.jsxs(d,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:[t.jsx(Ue,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),t.jsx("p",{className:"text-lg",children:"Aucune configuration trouvée"})]})}):l.data.map(s=>t.jsxs(ze,{className:"hover:bg-muted/50",children:[t.jsx(d,{children:t.jsx(lt,{checked:a.includes(s.id),onCheckedChange:W=>Me(s.id,W===!0)})}),t.jsx(d,{children:t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:s.nom_frais}),t.jsxs("div",{className:"text-xs text-muted-foreground",children:["Réf: ",s.ref]})]})}),t.jsx(d,{children:t.jsx(st,{variant:"outline",children:s.annee_scolaire})}),t.jsx(d,{className:"font-semibold",children:Ee(s.montant_total)}),t.jsx(d,{children:t.jsx(st,{variant:s.est_actif?"default":"secondary",children:s.est_actif?t.jsxs(t.Fragment,{children:[t.jsx(Oe,{className:"h-3 w-3 mr-1"}),"Actif"]}):t.jsxs(t.Fragment,{children:[t.jsx(Qe,{className:"h-3 w-3 mr-1"}),"Inactif"]})})}),t.jsx(d,{children:t.jsx("div",{className:"text-sm",children:new Date(s.created_at).toLocaleDateString("fr-FR")})}),t.jsx(d,{className:"text-right",children:t.jsxs(Ye,{children:[t.jsx(Ze,{asChild:!0,children:t.jsx(qe,{variant:"ghost",size:"icon",children:t.jsx(vt,{className:"h-4 w-4"})})}),t.jsxs(et,{align:"end",children:[t.jsx(Le,{href:`/configuration-frais/${s.id}`,children:t.jsxs(K,{children:[t.jsx(yt,{className:"h-4 w-4 mr-2"}),"Voir"]})}),t.jsx(Le,{href:`/configuration-frais/${s.id}/edit`,children:t.jsxs(K,{children:[t.jsx(Ct,{className:"h-4 w-4 mr-2"}),"Modifier"]})}),t.jsx(tt,{}),t.jsxs(K,{onClick:()=>nt(s),className:"text-destructive",children:[t.jsx(it,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]})})]},s.id)),e[110]=l.data,e[111]=Me,e[112]=a,e[113]=z):z=e[113];let U;e[114]!==z?(U=t.jsx(jt,{children:z}),e[114]=z,e[115]=U):U=e[115];let X;e[116]!==q||e[117]!==U?(X=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs(pt,{children:[q,U]})}),e[116]=q,e[117]=U,e[118]=X):X=e[118];let G;e[119]!==c||e[120]!==l.current_page||e[121]!==l.last_page?(G=l.last_page>1&&t.jsx("div",{className:"border-t p-4",children:t.jsx(_t,{currentPage:l.current_page,totalPages:l.last_page,onPageChange:s=>{Y.get("/configuration-frais",{...c,page:s},{preserveState:!0,replace:!0})}})}),e[119]=c,e[120]=l.current_page,e[121]=l.last_page,e[122]=G):G=e[122];let J;e[123]!==X||e[124]!==G?(J=t.jsxs("div",{className:"bg-card rounded-lg border overflow-hidden",children:[X,G]}),e[123]=X,e[124]=G,e[125]=J):J=e[125];let Ie;return e[126]!==j||e[127]!==p||e[128]!==g||e[129]!==A||e[130]!==H||e[131]!==J?(Ie=t.jsxs(t.Fragment,{children:[ie,t.jsxs(Nt,{activeRoute:"/configuration-frais",children:[j,p,g,A,H,J]})]}),e[126]=j,e[127]=p,e[128]=g,e[129]=A,e[130]=H,e[131]=J,e[132]=Ie):Ie=e[132],Ie}function Dt(i){return t.jsx(m,{value:i,children:i},i)}function kt(i){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"CDF"}).format(i)}function Ft(i){confirm(`Êtes-vous sûr de vouloir supprimer "${i.nom_frais}" ?`)&&Y.delete(`/configuration-frais/${i.id}`)}function It(i){return i.id}export{es as default};
