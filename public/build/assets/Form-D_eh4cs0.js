import{c as We,u as Xe,r as Ue,j as t,H as Ye,L as ke}from"./app-DGSNNkrG.js";import{B as qe}from"./createLucideIcon-Uuj4pdsM.js";import{I as Ne}from"./input-XYJxKMah.js";import{L as X}from"./label-CW5PwnjD.js";import{b as Ze,a as et,d as tt,c as st,S as at}from"./select-BpwhUyeJ.js";import{A as Oe,a as Ve}from"./alert-CXKem-lg.js";import{C as Pe,a as Ge,d as it,b as Je,c as Ke}from"./card-B5T1-of4.js";import{D as rt}from"./DashboardLayout-DOd2BJeH.js";import{B as lt}from"./badge-I5fyqHqU.js";import{A as nt}from"./arrow-left-DVBRpkvQ.js";import{a as ot,C as ct}from"./users-Bc8nYIP1.js";import{S as dt}from"./save-6fij_-7b.js";import{H as mt}from"./hash-BwyoMwS_.js";/* empty css            */import"./index-DlNuphDD.js";import"./index-Dp6su7tU.js";import"./check-DG9Xblsj.js";import"./user-Cg7A2IXi.js";function Lt(ve){const e=We.c(144),{tranche:n,configurations:o,flash:c}=ve,be=n?.configuration_frai_id||o[0]?.id||"",ye=n?.nom_tranche||"",Se=n?.montant||0,Ce=n?.date_limite||"",we=n?.ordre||1;let Y;e[0]!==be||e[1]!==ye||e[2]!==Se||e[3]!==Ce||e[4]!==we?(Y={configuration_frai_id:be,nom_tranche:ye,montant:Se,date_limite:Ce,ordre:we},e[0]=be,e[1]=ye,e[2]=Se,e[3]=Ce,e[4]=we,e[5]=Y):Y=e[5];const{data:a,setData:l,errors:s,processing:Z,post:Fe,put:Ie}=Xe(Y),[r,Qe]=Ue.useState(null);let ee,te;e[6]!==o||e[7]!==a.configuration_frai_id?(ee=()=>{if(a.configuration_frai_id){const i=o.find(d=>d.id===parseInt(a.configuration_frai_id));Qe(i||null)}},te=[a.configuration_frai_id,o],e[6]=o,e[7]=a.configuration_frai_id,e[8]=ee,e[9]=te):(ee=e[8],te=e[9]),Ue.useEffect(ee,te);let se;e[10]!==Fe||e[11]!==Ie||e[12]!==n?(se=i=>{i.preventDefault(),n?.id?Ie(`/tranches/${n.id}`):Fe("/tranches")},e[10]=Fe,e[11]=Ie,e[12]=n,e[13]=se):se=e[13];const De=se,Ae=ft,Le=n?.id?"Modifier la tranche":"Nouvelle tranche";let m;e[14]!==Le?(m=t.jsx(Ye,{title:Le}),e[14]=Le,e[15]=m):m=e[15];const Me=n?.id?"Modifier la tranche":"Nouvelle tranche";let f;e[16]!==Me?(f=t.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:Me}),e[16]=Me,e[17]=f):f=e[17];const Ee=n?.id?"Modifiez les informations de cette tranche de paiement":"Créez une nouvelle tranche de paiement pour une configuration de frais";let h;e[18]!==Ee?(h=t.jsx("p",{className:"text-muted-foreground",children:Ee}),e[18]=Ee,e[19]=h):h=e[19];let u;e[20]!==f||e[21]!==h?(u=t.jsxs("div",{children:[f,h]}),e[20]=f,e[21]=h,e[22]=u):u=e[22];let ae;e[23]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(ke,{href:"/tranches",children:t.jsxs(qe,{variant:"outline",children:[t.jsx(nt,{className:"h-4 w-4 mr-2"}),"Retour à la liste"]})}),e[23]=ae):ae=e[23];let x;e[24]!==u?(x=t.jsxs("div",{className:"flex items-center justify-between",children:[u,ae]}),e[24]=u,e[25]=x):x=e[25];let _;e[26]!==c?(_=c?.success&&t.jsx(Oe,{className:"bg-green-50 border-green-200",children:t.jsx(Ve,{children:c.success})}),e[26]=c,e[27]=_):_=e[27];let p;e[28]!==c?(p=c?.error&&t.jsx(Oe,{variant:"destructive",children:t.jsx(Ve,{children:c.error})}),e[28]=c,e[29]=p):p=e[29];let ie;e[30]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsxs(Pe,{children:[t.jsxs(Ge,{className:"flex items-center gap-2",children:[t.jsx(ot,{className:"h-5 w-5"}),"Informations de la tranche"]}),t.jsx(it,{children:"Remplissez les détails de cette tranche de paiement"})]}),e[30]=ie):ie=e[30];let re;e[31]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx(X,{htmlFor:"configuration_frai_id",children:"Configuration de frais *"}),e[31]=re):re=e[31];let j;e[32]!==a.configuration_frai_id?(j=a.configuration_frai_id.toString(),e[32]=a.configuration_frai_id,e[33]=j):j=e[33];let g;e[34]!==l?(g=i=>l("configuration_frai_id",parseInt(i)),e[34]=l,e[35]=g):g=e[35];const Re=s.configuration_frai_id?"border-destructive":"";let le;e[36]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(Ze,{placeholder:"Sélectionnez une configuration"}),e[36]=le):le=e[36];let N;e[37]!==Re?(N=t.jsx(et,{className:Re,children:le}),e[37]=Re,e[38]=N):N=e[38];let v;if(e[39]!==o){let i;e[41]===Symbol.for("react.memo_cache_sentinel")?(i=d=>t.jsxs(tt,{value:d.id.toString(),children:[d.nom_frais," (",d.annee_scolaire,") - ",Ae(d.montant_total),d.est_actif?"":" (Inactif)"]},d.id),e[41]=i):i=e[41],v=o.map(i),e[39]=o,e[40]=v}else v=e[40];let b;e[42]!==v?(b=t.jsx(st,{children:v}),e[42]=v,e[43]=b):b=e[43];let y;e[44]!==j||e[45]!==g||e[46]!==N||e[47]!==b?(y=t.jsxs(at,{value:j,onValueChange:g,children:[N,b]}),e[44]=j,e[45]=g,e[46]=N,e[47]=b,e[48]=y):y=e[48];let S;e[49]!==s.configuration_frai_id?(S=s.configuration_frai_id&&t.jsx("p",{className:"text-sm text-destructive",children:s.configuration_frai_id}),e[49]=s.configuration_frai_id,e[50]=S):S=e[50];let C;e[51]!==r?(C=r&&t.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Configuration sélectionnée: ",r.nom_frais," (",r.annee_scolaire,")"]}),e[51]=r,e[52]=C):C=e[52];let w;e[53]!==y||e[54]!==S||e[55]!==C?(w=t.jsxs("div",{className:"space-y-2",children:[re,y,S,C]}),e[53]=y,e[54]=S,e[55]=C,e[56]=w):w=e[56];let ne;e[57]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(X,{htmlFor:"ordre",children:"Ordre *"}),e[57]=ne):ne=e[57];let F;e[58]!==l?(F=i=>l("ordre",parseInt(i.target.value)||1),e[58]=l,e[59]=F):F=e[59];const ze=s.ordre?"border-destructive":"";let I;e[60]!==a.ordre||e[61]!==F||e[62]!==ze?(I=t.jsx(Ne,{id:"ordre",type:"number",min:"1",value:a.ordre,onChange:F,placeholder:"1",className:ze}),e[60]=a.ordre,e[61]=F,e[62]=ze,e[63]=I):I=e[63];let D;e[64]!==s.ordre?(D=s.ordre&&t.jsx("p",{className:"text-sm text-destructive",children:s.ordre}),e[64]=s.ordre,e[65]=D):D=e[65];let oe;e[66]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Ordre d'apparition dans la configuration"}),e[66]=oe):oe=e[66];let A;e[67]!==I||e[68]!==D?(A=t.jsxs("div",{className:"space-y-2",children:[ne,I,D,oe]}),e[67]=I,e[68]=D,e[69]=A):A=e[69];let ce;e[70]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(X,{htmlFor:"nom_tranche",children:"Nom de la tranche *"}),e[70]=ce):ce=e[70];let L;e[71]!==l?(L=i=>l("nom_tranche",i.target.value),e[71]=l,e[72]=L):L=e[72];const He=s.nom_tranche?"border-destructive":"";let M;e[73]!==a.nom_tranche||e[74]!==L||e[75]!==He?(M=t.jsx(Ne,{id:"nom_tranche",value:a.nom_tranche,onChange:L,placeholder:"Ex: Premier trimestre",className:He}),e[73]=a.nom_tranche,e[74]=L,e[75]=He,e[76]=M):M=e[76];let E;e[77]!==s.nom_tranche?(E=s.nom_tranche&&t.jsx("p",{className:"text-sm text-destructive",children:s.nom_tranche}),e[77]=s.nom_tranche,e[78]=E):E=e[78];let R;e[79]!==M||e[80]!==E?(R=t.jsxs("div",{className:"space-y-2",children:[ce,M,E]}),e[79]=M,e[80]=E,e[81]=R):R=e[81];let de;e[82]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx(X,{htmlFor:"montant",children:"Montant (USD) *"}),e[82]=de):de=e[82];let z;e[83]!==l?(z=i=>l("montant",parseFloat(i.target.value)||0),e[83]=l,e[84]=z):z=e[84];const $e=s.montant?"border-destructive":"";let H;e[85]!==a.montant||e[86]!==z||e[87]!==$e?(H=t.jsx(Ne,{id:"montant",type:"number",min:"0",step:"0.01",value:a.montant,onChange:z,placeholder:"0.00",className:$e}),e[85]=a.montant,e[86]=z,e[87]=$e,e[88]=H):H=e[88];let $;e[89]!==s.montant?($=s.montant&&t.jsx("p",{className:"text-sm text-destructive",children:s.montant}),e[89]=s.montant,e[90]=$):$=e[90];let B;e[91]!==r?(B=r&&t.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Total configuration: ",Ae(r.montant_total)]}),e[91]=r,e[92]=B):B=e[92];let T;e[93]!==H||e[94]!==$||e[95]!==B?(T=t.jsxs("div",{className:"space-y-2",children:[de,H,$,B]}),e[93]=H,e[94]=$,e[95]=B,e[96]=T):T=e[96];let me;e[97]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(X,{htmlFor:"date_limite",children:"Date limite *"}),e[97]=me):me=e[97];let fe;e[98]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(ct,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e[98]=fe):fe=e[98];let q;e[99]!==l?(q=i=>l("date_limite",i.target.value),e[99]=l,e[100]=q):q=e[100];const Be=`pl-10 ${s.date_limite?"border-destructive":""}`;let U;e[101]!==a.date_limite||e[102]!==q||e[103]!==Be?(U=t.jsxs("div",{className:"relative",children:[fe,t.jsx(Ne,{id:"date_limite",type:"date",value:a.date_limite,onChange:q,className:Be})]}),e[101]=a.date_limite,e[102]=q,e[103]=Be,e[104]=U):U=e[104];let k;e[105]!==s.date_limite?(k=s.date_limite&&t.jsx("p",{className:"text-sm text-destructive",children:s.date_limite}),e[105]=s.date_limite,e[106]=k):k=e[106];let he;e[107]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Date limite de paiement"}),e[107]=he):he=e[107];let O;e[108]!==U||e[109]!==k?(O=t.jsxs("div",{className:"space-y-2",children:[me,U,k,he]}),e[108]=U,e[109]=k,e[110]=O):O=e[110];let V;e[111]!==w||e[112]!==A||e[113]!==R||e[114]!==T||e[115]!==O?(V=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w,A,R,T,O]}),e[111]=w,e[112]=A,e[113]=R,e[114]=T,e[115]=O,e[116]=V):V=e[116];let ue;e[117]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx(ke,{href:"/tranches",children:t.jsx(qe,{type:"button",variant:"outline",children:"Annuler"})}),e[117]=ue):ue=e[117];let xe;e[118]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx(dt,{className:"h-4 w-4 mr-2"}),e[118]=xe):xe=e[118];const Te=Z?"Enregistrement...":n?.id?"Mettre à jour":"Créer";let P;e[119]!==Z||e[120]!==Te?(P=t.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[ue,t.jsxs(qe,{type:"submit",disabled:Z,children:[xe,Te]})]}),e[119]=Z,e[120]=Te,e[121]=P):P=e[121];let G;e[122]!==De||e[123]!==V||e[124]!==P?(G=t.jsxs(Je,{className:"lg:col-span-2",children:[ie,t.jsx(Ke,{children:t.jsxs("form",{onSubmit:De,className:"space-y-6",children:[V,P]})})]}),e[122]=De,e[123]=V,e[124]=P,e[125]=G):G=e[125];let _e;e[126]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx(Pe,{children:t.jsxs(Ge,{className:"flex items-center gap-2",children:[t.jsx(mt,{className:"h-5 w-5"}),"Informations utiles"]})}),e[126]=_e):_e=e[126];let pe;e[127]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx("h3",{className:"text-sm font-semibold",children:"À propos des tranches"}),e[127]=pe):pe=e[127];let je;e[128]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsxs("div",{className:"space-y-2",children:[pe,t.jsxs("ul",{className:"text-sm text-muted-foreground space-y-2 list-disc pl-4",children:[t.jsx("li",{children:"Les tranches permettent de diviser le paiement total en plusieurs échéances"}),t.jsx("li",{children:"Chaque tranche a un ordre qui définit sa position dans le calendrier de paiement"}),t.jsx("li",{children:"La date limite est la date butoir pour le paiement de la tranche"}),t.jsx("li",{children:"Assurez-vous que la somme des tranches correspond au montant total de la configuration"})]})]}),e[128]=je):je=e[128];let J;e[129]!==r?(J=r&&t.jsxs("div",{className:"space-y-2 p-4 bg-muted rounded-lg",children:[t.jsx("h3",{className:"text-sm font-semibold",children:"Configuration sélectionnée"}),t.jsxs("div",{className:"text-sm space-y-1",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Nom:"}),t.jsx("span",{className:"font-medium",children:r.nom_frais})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Année:"}),t.jsx("span",{children:r.annee_scolaire})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Montant total:"}),t.jsx("span",{className:"font-semibold",children:Ae(r.montant_total)})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-muted-foreground",children:"Statut:"}),t.jsx(lt,{variant:r.est_actif?"default":"secondary",children:r.est_actif?"Actif":"Inactif"})]})]})]}),e[129]=r,e[130]=J):J=e[130];let K;e[131]!==J?(K=t.jsxs(Je,{children:[_e,t.jsxs(Ke,{className:"space-y-4",children:[je,J]})]}),e[131]=J,e[132]=K):K=e[132];let Q;e[133]!==G||e[134]!==K?(Q=t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[G,K]}),e[133]=G,e[134]=K,e[135]=Q):Q=e[135];let W;e[136]!==x||e[137]!==_||e[138]!==p||e[139]!==Q?(W=t.jsx(rt,{activeRoute:"/tranches",children:t.jsxs("div",{className:"space-y-6",children:[x,_,p,Q]})}),e[136]=x,e[137]=_,e[138]=p,e[139]=Q,e[140]=W):W=e[140];let ge;return e[141]!==m||e[142]!==W?(ge=t.jsxs(t.Fragment,{children:[m,W]}),e[141]=m,e[142]=W,e[143]=ge):ge=e[143],ge}function ft(ve){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD"}).format(ve).replace("$US","$")}export{Lt as default};
