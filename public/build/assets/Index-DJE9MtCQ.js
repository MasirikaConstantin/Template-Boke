import{c as pl,r as j,j as s,H as bl}from"./app-5Dbz7raP.js";import{B as d}from"./createLucideIcon-BbQnreOs.js";import{I as Nl}from"./input-n7OeVstE.js";import{b as p,c as b,C as Je,a as Ge,d as gl,e as vl}from"./card-M1rE4DpJ.js";import{B as M}from"./badge-_QgTGLp4.js";import{P as Ie}from"./progress-C3Te4DVd.js";import{A as _l,a as yl}from"./alert-Dr0NOMKL.js";import{T as Ft,a as y,b as C,c as Sl,d as wl,e as Cl}from"./table-Bm781hcr.js";import{a as Kt,b as Ot,d as S,c as Qt,S as Wt}from"./select-DSj7oFl5.js";import{a as Vt,b as Ht,c as It,d as f,e as Yt,S as Ml,D as El}from"./DashboardLayout-ByUj4ROS.js";import{d as al,i as Dl,f as Qe,P as Tl,b as Pl,C as Al,a as ut,c as Ll}from"./popover-D0YhiJMK.js";import{C as Zt}from"./checkbox-BHn2uz1N.js";import{P as kl}from"./PageHeader-C2_xgV5F.js";import{U as qt}from"./users-DC4hzx-j.js";import{C as Ke}from"./circle-check-big-CplMLszt.js";import{C as ft}from"./circle-x-BDmlNNr6.js";import{C as Oe}from"./clock-CkLaDOCy.js";import{M as Xe}from"./mail-DuPvuC6b.js";import{U as el}from"./user-C_rpr3N_.js";import{C as E}from"./circle-alert-CoLmvAti.js";import{P as $l}from"./phone-BUaYeWc-.js";import{E as Rl}from"./ellipsis-vertical-KWQZLSjj.js";import{E as Bl}from"./eye-B_ld2xZG.js";import{F as zl}from"./file-text-CCJGyrxq.js";import{P as sl}from"./printer-BzJ9h5hu.js";import{P as Fl}from"./plus-p4KsQSb1.js";import{C as ht}from"./calendar-days-DAsg3DQR.js";import{C as Vl}from"./calendar-ByLnJ856.js";import{S as Hl}from"./school-BXkNhQ-O.js";import{F as Il}from"./funnel-D90CAqSM.js";import{D as tl}from"./download-C_dzuTED.js";import{C as ql}from"./chart-column-B32HSahk.js";import{T as ll}from"./trending-up-gzyvFDSN.js";/* empty css            */import"./index-BlzE7Lae.js";import"./index-B-6lPV8j.js";import"./check-CkeGpNl8.js";import"./house-Dl9tCatm.js";function rl(e,m,l){return al(e,-m,l)}const Ul=()=>{const e=["Martin","Bernard","Dubois","Thomas","Robert","Richard","Petit","Durand","Leroy","Moreau"],m=["Lucas","Emma","Hugo","Chloé","Nathan","Léa","Tom","Manon","Louis","Julie"],l=[{id:1,nom:"6ème A",niveau:"Collège"},{id:2,nom:"5ème B",niveau:"Collège"},{id:3,nom:"4ème C",niveau:"Collège"},{id:4,nom:"3ème D",niveau:"Collège"},{id:5,nom:"Terminale S",niveau:"Lycée"}];return Array.from({length:50},(x,n)=>({id:n+1,matricule:`ELEV${(n+1e3).toString().padStart(4,"0")}`,nom:e[Math.floor(Math.random()*e.length)],prenom:m[Math.floor(Math.random()*m.length)],photo:`https://api.dicebear.com/7.x/avataaars/svg?seed=${n}`,classe:l[Math.floor(Math.random()*l.length)],date_naissance:`200${Math.floor(Math.random()*6)+4}-${String(Math.floor(Math.random()*12)+1).padStart(2,"0")}-${String(Math.floor(Math.random()*28)+1).padStart(2,"0")}`,age:Math.floor(Math.random()*6)+12,parent_contact:`06${Math.floor(Math.random()*9e7)+1e7}`,parent_email:`parent${n}@example.com`}))},Jl=(e,m)=>{const l=["present","absent","retard","exclu","malade"];return e.map(x=>{const n=l[Math.floor(Math.random()*l.length)],_={id:Math.floor(Math.random()*1e4),eleve_id:x.id,date:Qe(m,"yyyy-MM-dd"),statut:n};return(n==="present"||n==="retard")&&(_.heure_arrivee=`0${Math.floor(Math.random()*2)+7}:${String(Math.floor(Math.random()*60)).padStart(2,"0")}`,_.heure_depart=`${Math.floor(Math.random()*4)+16}:${String(Math.floor(Math.random()*60)).padStart(2,"0")}`,n==="retard"&&(_.retard_minutes=Math.floor(Math.random()*60)+5)),n==="absent"&&(_.raison_absence=["Maladie","Rendez-vous médical","Voyage","Autre"][Math.floor(Math.random()*4)],_.justificatif=Math.random()>.5),_})},Gl=()=>[{id:1,nom:"6ème A",niveau:"Collège",effectif:28,professeur_principal:"Mme. Dubois"},{id:2,nom:"5ème B",niveau:"Collège",effectif:25,professeur_principal:"M. Martin"},{id:3,nom:"4ème C",niveau:"Collège",effectif:30,professeur_principal:"Mme. Bernard"},{id:4,nom:"3ème D",niveau:"Collège",effectif:27,professeur_principal:"M. Thomas"},{id:5,nom:"Terminale S",niveau:"Lycée",effectif:32,professeur_principal:"Mme. Robert"},{id:6,nom:"Première L",niveau:"Lycée",effectif:24,professeur_principal:"M. Richard"},{id:7,nom:"Seconde Générale",niveau:"Lycée",effectif:35,professeur_principal:"Mme. Petit"}];function Ja(){const e=pl.c(269);let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m=new Date,e[0]=m):m=e[0];const[l,x]=j.useState(m),[n,_]=j.useState(""),[g,nl]=j.useState("all"),[v,il]=j.useState("all");let We;e[1]===Symbol.for("react.memo_cache_sentinel")?(We=[],e[1]=We):We=e[1];const[u,cl]=j.useState(We);let Ye;e[2]===Symbol.for("react.memo_cache_sentinel")?(Ye=[],e[2]=Ye):Ye=e[2];const[i,jt]=j.useState(Ye);let Ze;e[3]===Symbol.for("react.memo_cache_sentinel")?(Ze=[],e[3]=Ze):Ze=e[3];const[w,ol]=j.useState(Ze);let es;e[4]===Symbol.for("react.memo_cache_sentinel")?(es={total:0,presents:0,absents:0,retards:0,taux_presence:0,par_classe:[]},e[4]=es):es=e[4];const[a,ml]=j.useState(es);let ss;e[5]===Symbol.for("react.memo_cache_sentinel")?(ss=[],e[5]=ss):ss=e[5];const[o,D]=j.useState(ss);let ts,ls;e[6]!==l?(ts=()=>{const t=Ul(),r=Jl(t,l),c=Gl();cl(t),jt(r),ol(c)},ls=[l],e[6]=l,e[7]=ts,e[8]=ls):(ts=e[7],ls=e[8]),j.useEffect(ts,ls);let as,rs;e[9]!==w||e[10]!==u||e[11]!==i?(as=()=>{if(i.length===0)return;const t=i.length,r=i.filter(na).length,c=i.filter(ra).length,N=i.filter(aa).length,$t=r/t*100,Rt=w.map(Gt=>{const hl=u.filter(zt=>zt.classe.nom===Gt.nom),Bt=i.filter(zt=>hl.some(jl=>jl.id===zt.eleve_id)),Xt=Bt.filter(la).length,fl=Bt.filter(ta).length,ul=Xt/Bt.length*100||0;return{classe:Gt.nom,taux:ul,presents:Xt,absents:fl}});ml({total:t,presents:r,absents:c,retards:N,taux_presence:$t,par_classe:Rt})},rs=[i,u,w],e[9]=w,e[10]=u,e[11]=i,e[12]=as,e[13]=rs):(as=e[12],rs=e[13]),j.useEffect(as,rs);let ns;if(e[14]!==u||e[15]!==i||e[16]!==n||e[17]!==g||e[18]!==v){let t;e[20]!==i||e[21]!==n||e[22]!==g||e[23]!==v?(t=r=>{const c=n===""||r.nom.toLowerCase().includes(n.toLowerCase())||r.prenom.toLowerCase().includes(n.toLowerCase())||r.matricule.toLowerCase().includes(n.toLowerCase()),N=g==="all"||r.classe.nom===g;if(v==="all")return c&&N;const $t=i.find(Rt=>Rt.eleve_id===r.id);return c&&N&&$t?.statut===v},e[20]=i,e[21]=n,e[22]=g,e[23]=v,e[24]=t):t=e[24],ns=u.filter(t),e[14]=u,e[15]=i,e[16]=n,e[17]=g,e[18]=v,e[19]=ns}else ns=e[19];const h=ns;let is;e[25]!==h?(is=t=>{D(t?h.map(sa):[])},e[25]=h,e[26]=is):is=e[26];const pt=is;let cs;e[27]!==o?(cs=(t,r)=>{D(r?[...o,t]:o.filter(c=>c!==t))},e[27]=o,e[28]=cs):cs=e[28];const bt=cs;let os;e[29]===Symbol.for("react.memo_cache_sentinel")?(os=(t,r)=>{jt(c=>c.map(N=>N.eleve_id===t?{...N,statut:r}:N))},e[29]=os):os=e[29];const qe=os;let ms;e[30]!==o?(ms=t=>{o.length!==0&&(jt(r=>r.map(c=>o.includes(c.eleve_id)?{...c,statut:t}:c)),D([]))},e[30]=o,e[31]=ms):ms=e[31];const Ue=ms;let ds;e[32]!==l?(ds=()=>{x(rl(l,1))},e[32]=l,e[33]=ds):ds=e[33];const Nt=ds;let xs;e[34]!==l?(xs=()=>{x(al(l,1))},e[34]=l,e[35]=xs):xs=e[35];const gt=xs;let hs;e[36]===Symbol.for("react.memo_cache_sentinel")?(hs=()=>{x(new Date)},e[36]=hs):hs=e[36];const dl=hs,Ut=ea,xl=Zl,Jt=Yl;let fs;e[37]!==l?(fs=Dl(l,new Date),e[37]=l,e[38]=fs):fs=e[38];const vt=fs;let us;e[39]===Symbol.for("react.memo_cache_sentinel")?(us=s.jsx(bl,{title:"Gestion des présences des élèves"}),e[39]=us):us=e[39];let js;e[40]!==l?(js=Jt(l),e[40]=l,e[41]=js):js=e[41];const _t=`Suivi quotidien des présences - ${js}`;let ps;e[42]===Symbol.for("react.memo_cache_sentinel")?(ps=[{label:"Dashboard",href:"/dashboard"},{label:"Vie scolaire",href:"#"},{label:"Présences",href:"/presences-eleves"}],e[42]=ps):ps=e[42];let T;e[43]!==Ue||e[44]!==o.length?(T=o.length>0&&s.jsxs(Vt,{children:[s.jsx(Ht,{asChild:!0,children:s.jsxs(d,{variant:"outline",children:[s.jsx(qt,{className:"h-4 w-4 mr-2"}),"Actions (",o.length,")"]})}),s.jsxs(It,{align:"end",children:[s.jsxs(f,{onClick:()=>Ue("present"),children:[s.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Marquer comme présent"]}),s.jsxs(f,{onClick:()=>Ue("absent"),children:[s.jsx(ft,{className:"h-4 w-4 mr-2"}),"Marquer comme absent"]}),s.jsxs(f,{onClick:()=>Ue("retard"),children:[s.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Marquer comme retard"]}),s.jsx(Yt,{}),s.jsxs(f,{children:[s.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Notifier les parents"]})]})]}),e[43]=Ue,e[44]=o.length,e[45]=T):T=e[45];let bs;e[46]===Symbol.for("react.memo_cache_sentinel")?(bs=s.jsxs(d,{variant:"outline",children:[s.jsx(sl,{className:"h-4 w-4 mr-2"}),"Imprimer"]}),e[46]=bs):bs=e[46];let Ns;e[47]===Symbol.for("react.memo_cache_sentinel")?(Ns=s.jsxs(d,{children:[s.jsx(Fl,{className:"h-4 w-4 mr-2"}),"Nouvelle absence"]}),e[47]=Ns):Ns=e[47];let P;e[48]!==T?(P=s.jsxs("div",{className:"flex items-center gap-2",children:[T,bs,Ns]}),e[48]=T,e[49]=P):P=e[49];let A;e[50]!==_t||e[51]!==P?(A=s.jsx(kl,{title:"Présences des élèves",description:_t,breadcrumb:ps,actions:P}),e[50]=_t,e[51]=P,e[52]=A):A=e[52];let gs;e[53]===Symbol.for("react.memo_cache_sentinel")?(gs=s.jsx(ht,{className:"h-4 w-4 rotate-180"}),e[53]=gs):gs=e[53];let L;e[54]!==Nt?(L=s.jsx(d,{variant:"outline",size:"icon",onClick:Nt,children:gs}),e[54]=Nt,e[55]=L):L=e[55];let vs;e[56]===Symbol.for("react.memo_cache_sentinel")?(vs=s.jsx(Vl,{className:"mr-2 h-4 w-4"}),e[56]=vs):vs=e[56];let k;e[57]!==l?(k=Jt(l),e[57]=l,e[58]=k):k=e[58];let $;e[59]!==vt?($=vt&&s.jsx(M,{variant:"outline",className:"ml-2",children:"Aujourd'hui"}),e[59]=vt,e[60]=$):$=e[60];let R;e[61]!==k||e[62]!==$?(R=s.jsx(Tl,{asChild:!0,children:s.jsxs(d,{variant:"outline",className:"w-[240px] justify-start text-left font-normal",children:[vs,k,$]})}),e[61]=k,e[62]=$,e[63]=R):R=e[63];let _s;e[64]===Symbol.for("react.memo_cache_sentinel")?(_s=t=>t&&x(t),e[64]=_s):_s=e[64];let B;e[65]!==l?(B=s.jsx(Pl,{className:"w-auto p-0",children:s.jsx(Al,{mode:"single",selected:l,onSelect:_s,locale:ut,className:"rounded-md border"})}),e[65]=l,e[66]=B):B=e[66];let z;e[67]!==R||e[68]!==B?(z=s.jsxs(Ll,{children:[R,B]}),e[67]=R,e[68]=B,e[69]=z):z=e[69];let ys;e[70]===Symbol.for("react.memo_cache_sentinel")?(ys=s.jsx(ht,{className:"h-4 w-4"}),e[70]=ys):ys=e[70];let F;e[71]!==gt?(F=s.jsx(d,{variant:"outline",size:"icon",onClick:gt,children:ys}),e[71]=gt,e[72]=F):F=e[72];let Ss;e[73]===Symbol.for("react.memo_cache_sentinel")?(Ss=s.jsx(d,{variant:"outline",onClick:dl,children:"Aujourd'hui"}),e[73]=Ss):Ss=e[73];let V;e[74]!==L||e[75]!==z||e[76]!==F?(V=s.jsxs("div",{className:"flex items-center gap-14",children:[L,z,F,Ss]}),e[74]=L,e[75]=z,e[76]=F,e[77]=V):V=e[77];let ws;e[78]===Symbol.for("react.memo_cache_sentinel")?(ws=s.jsx(ht,{className:"h-3 w-3 mr-1"}),e[78]=ws):ws=e[78];let H;e[79]!==l?(H=Qe(l,"EEE",{locale:ut}),e[79]=l,e[80]=H):H=e[80];let I;e[81]!==H?(I=s.jsxs(M,{variant:"outline",children:[ws,H]}),e[81]=H,e[82]=I):I=e[82];const yt=Math.ceil(l.getDate()/7);let q;e[83]!==yt?(q=s.jsxs(M,{variant:"outline",children:["Semaine ",yt]}),e[83]=yt,e[84]=q):q=e[84];let U;e[85]!==I||e[86]!==q?(U=s.jsxs("div",{className:"flex items-center gap-2",children:[I,q]}),e[85]=I,e[86]=q,e[87]=U):U=e[87];let J;e[88]!==V||e[89]!==U?(J=s.jsx(p,{className:"mb-6",children:s.jsx(b,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-14",children:[V,U]})})}),e[88]=V,e[89]=U,e[90]=J):J=e[90];let Cs;e[91]===Symbol.for("react.memo_cache_sentinel")?(Cs=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total élèves"}),e[91]=Cs):Cs=e[91];let G;e[92]!==a.total?(G=s.jsxs("div",{children:[Cs,s.jsx("p",{className:"text-2xl font-bold",children:a.total})]}),e[92]=a.total,e[93]=G):G=e[93];let Ms;e[94]===Symbol.for("react.memo_cache_sentinel")?(Ms=s.jsx(qt,{className:"h-8 w-8 text-primary"}),e[94]=Ms):Ms=e[94];let X;e[95]!==G?(X=s.jsxs("div",{className:"flex items-center justify-between",children:[G,Ms]}),e[95]=G,e[96]=X):X=e[96];let Es;e[97]===Symbol.for("react.memo_cache_sentinel")?(Es=s.jsx(Ie,{value:100,className:"h-2 mt-4"}),e[97]=Es):Es=e[97];let K;e[98]!==X?(K=s.jsx(p,{children:s.jsxs(b,{className:"pt-6",children:[X,Es]})}),e[98]=X,e[99]=K):K=e[99];let Ds;e[100]===Symbol.for("react.memo_cache_sentinel")?(Ds=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Présents"}),e[100]=Ds):Ds=e[100];let O;e[101]!==a.presents?(O=s.jsxs("div",{children:[Ds,s.jsx("p",{className:"text-2xl font-bold",children:a.presents})]}),e[101]=a.presents,e[102]=O):O=e[102];let Ts;e[103]===Symbol.for("react.memo_cache_sentinel")?(Ts=s.jsx(Ke,{className:"h-8 w-8 text-green-500"}),e[103]=Ts):Ts=e[103];let Q;e[104]!==O?(Q=s.jsxs("div",{className:"flex items-center justify-between",children:[O,Ts]}),e[104]=O,e[105]=Q):Q=e[105];const St=`h-2 mt-4 ${a.taux_presence>=90?"bg-green-500":a.taux_presence>=80?"bg-amber-500":"bg-red-500"}`;let W;e[106]!==a.taux_presence||e[107]!==St?(W=s.jsx(Ie,{value:a.taux_presence,className:St}),e[106]=a.taux_presence,e[107]=St,e[108]=W):W=e[108];let Y;e[109]!==a.taux_presence?(Y=a.taux_presence.toFixed(1),e[109]=a.taux_presence,e[110]=Y):Y=e[110];let Z;e[111]!==Y?(Z=s.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[Y,"% de présence"]}),e[111]=Y,e[112]=Z):Z=e[112];let ee;e[113]!==Q||e[114]!==W||e[115]!==Z?(ee=s.jsx(p,{children:s.jsxs(b,{className:"pt-6",children:[Q,W,Z]})}),e[113]=Q,e[114]=W,e[115]=Z,e[116]=ee):ee=e[116];let Ps;e[117]===Symbol.for("react.memo_cache_sentinel")?(Ps=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Absents"}),e[117]=Ps):Ps=e[117];let se;e[118]!==a.absents?(se=s.jsxs("div",{children:[Ps,s.jsx("p",{className:"text-2xl font-bold",children:a.absents})]}),e[118]=a.absents,e[119]=se):se=e[119];let As;e[120]===Symbol.for("react.memo_cache_sentinel")?(As=s.jsx(ft,{className:"h-8 w-8 text-red-500"}),e[120]=As):As=e[120];let te;e[121]!==se?(te=s.jsxs("div",{className:"flex items-center justify-between",children:[se,As]}),e[121]=se,e[122]=te):te=e[122];const wt=a.absents/a.total*100;let le;e[123]!==wt?(le=s.jsx(Ie,{value:wt,className:"h-2 mt-4 bg-red-500"}),e[123]=wt,e[124]=le):le=e[124];const Ct=a.absents/a.total*100;let ae;e[125]!==Ct?(ae=Ct.toFixed(1),e[125]=Ct,e[126]=ae):ae=e[126];let re;e[127]!==ae?(re=s.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:[ae,"% d'absence"]}),e[127]=ae,e[128]=re):re=e[128];let ne;e[129]!==te||e[130]!==le||e[131]!==re?(ne=s.jsx(p,{children:s.jsxs(b,{className:"pt-6",children:[te,le,re]})}),e[129]=te,e[130]=le,e[131]=re,e[132]=ne):ne=e[132];let Ls;e[133]===Symbol.for("react.memo_cache_sentinel")?(Ls=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Retards"}),e[133]=Ls):Ls=e[133];let ie;e[134]!==a.retards?(ie=s.jsxs("div",{children:[Ls,s.jsx("p",{className:"text-2xl font-bold",children:a.retards})]}),e[134]=a.retards,e[135]=ie):ie=e[135];let ks;e[136]===Symbol.for("react.memo_cache_sentinel")?(ks=s.jsx(Oe,{className:"h-8 w-8 text-amber-500"}),e[136]=ks):ks=e[136];let ce;e[137]!==ie?(ce=s.jsxs("div",{className:"flex items-center justify-between",children:[ie,ks]}),e[137]=ie,e[138]=ce):ce=e[138];const Mt=a.retards/a.total*100;let oe;e[139]!==Mt?(oe=s.jsx(Ie,{value:Mt,className:"h-2 mt-4 bg-amber-500"}),e[139]=Mt,e[140]=oe):oe=e[140];const Et=a.retards>0?"15 min":"0 min";let me;e[141]!==Et?(me=s.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Retard moyen: ",Et]}),e[141]=Et,e[142]=me):me=e[142];let de;e[143]!==ce||e[144]!==oe||e[145]!==me?(de=s.jsx(p,{children:s.jsxs(b,{className:"pt-6",children:[ce,oe,me]})}),e[143]=ce,e[144]=oe,e[145]=me,e[146]=de):de=e[146];let xe;e[147]!==K||e[148]!==ee||e[149]!==ne||e[150]!==de?(xe=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[K,ee,ne,de]}),e[147]=K,e[148]=ee,e[149]=ne,e[150]=de,e[151]=xe):xe=e[151];let $s;e[152]===Symbol.for("react.memo_cache_sentinel")?($s=s.jsx(Ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e[152]=$s):$s=e[152];let Rs;e[153]===Symbol.for("react.memo_cache_sentinel")?(Rs=t=>_(t.target.value),e[153]=Rs):Rs=e[153];let he;e[154]!==n?(he=s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[$s,s.jsx(Nl,{placeholder:"Rechercher un élève...",value:n,onChange:Rs,className:"pl-10"})]})}),e[154]=n,e[155]=he):he=e[155];let Bs;e[156]===Symbol.for("react.memo_cache_sentinel")?(Bs=s.jsxs(Kt,{className:"w-[180px]",children:[s.jsx(Hl,{className:"h-4 w-4 mr-2"}),s.jsx(Ot,{placeholder:"Toutes classes"})]}),e[156]=Bs):Bs=e[156];let zs;e[157]===Symbol.for("react.memo_cache_sentinel")?(zs=s.jsx(S,{value:"all",children:"Toutes classes"}),e[157]=zs):zs=e[157];let fe;e[158]!==w?(fe=w.map(Wl),e[158]=w,e[159]=fe):fe=e[159];let ue;e[160]!==fe?(ue=s.jsxs(Qt,{children:[zs,fe]}),e[160]=fe,e[161]=ue):ue=e[161];let je;e[162]!==g||e[163]!==ue?(je=s.jsxs(Wt,{value:g,onValueChange:nl,children:[Bs,ue]}),e[162]=g,e[163]=ue,e[164]=je):je=e[164];let Fs;e[165]===Symbol.for("react.memo_cache_sentinel")?(Fs=s.jsxs(Kt,{className:"w-[180px]",children:[s.jsx(Il,{className:"h-4 w-4 mr-2"}),s.jsx(Ot,{placeholder:"Tous statuts"})]}),e[165]=Fs):Fs=e[165];let Vs;e[166]===Symbol.for("react.memo_cache_sentinel")?(Vs=s.jsxs(Qt,{children:[s.jsx(S,{value:"all",children:"Tous statuts"}),s.jsx(S,{value:"present",children:"Présent"}),s.jsx(S,{value:"absent",children:"Absent"}),s.jsx(S,{value:"retard",children:"Retard"}),s.jsx(S,{value:"malade",children:"Malade"}),s.jsx(S,{value:"exclu",children:"Exclu"})]}),e[166]=Vs):Vs=e[166];let pe;e[167]!==v?(pe=s.jsxs(Wt,{value:v,onValueChange:il,children:[Fs,Vs]}),e[167]=v,e[168]=pe):pe=e[168];let be;e[169]!==je||e[170]!==pe?(be=s.jsxs("div",{className:"flex gap-2",children:[je,pe]}),e[169]=je,e[170]=pe,e[171]=be):be=e[171];let Ne;e[172]!==he||e[173]!==be?(Ne=s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[he,be]}),e[172]=he,e[173]=be,e[174]=Ne):Ne=e[174];const Dt=h.length>1?"s":"",Tt=h.length>1?"s":"";let ge;e[175]!==h.length||e[176]!==Dt||e[177]!==Tt?(ge=s.jsxs("div",{className:"text-sm text-muted-foreground",children:[h.length," élève",Dt," trouvé",Tt]}),e[175]=h.length,e[176]=Dt,e[177]=Tt,e[178]=ge):ge=e[178];let Hs;e[179]===Symbol.for("react.memo_cache_sentinel")?(Hs=s.jsxs(d,{variant:"outline",size:"sm",children:[s.jsx(tl,{className:"h-3 w-3 mr-1"}),"Exporter"]}),e[179]=Hs):Hs=e[179];let Is;e[180]===Symbol.for("react.memo_cache_sentinel")?(Is=s.jsxs("div",{className:"flex items-center gap-2",children:[Hs,s.jsxs(d,{variant:"outline",size:"sm",children:[s.jsx(Xe,{className:"h-3 w-3 mr-1"}),"Notifier absents"]})]}),e[180]=Is):Is=e[180];let ve;e[181]!==ge?(ve=s.jsxs("div",{className:"flex items-center justify-between mt-4",children:[ge,Is]}),e[181]=ge,e[182]=ve):ve=e[182];let _e;e[183]!==ve||e[184]!==Ne?(_e=s.jsx(p,{children:s.jsxs(b,{className:"pt-6",children:[Ne,ve]})}),e[183]=ve,e[184]=Ne,e[185]=_e):_e=e[185];let qs;e[186]===Symbol.for("react.memo_cache_sentinel")?(qs=s.jsxs(Je,{children:[s.jsx(Ge,{children:"Liste des élèves"}),s.jsx(gl,{children:"Cliquez sur les badges pour changer le statut"})]}),e[186]=qs):qs=e[186];const Pt=o.length===h.length&&h.length>0;let ye;e[187]!==pt||e[188]!==Pt?(ye=s.jsx(C,{className:"w-12",children:s.jsx(Zt,{checked:Pt,onCheckedChange:pt})}),e[187]=pt,e[188]=Pt,e[189]=ye):ye=e[189];let Us,Js,Gs,Xs,Ks,Os;e[190]===Symbol.for("react.memo_cache_sentinel")?(Us=s.jsx(C,{children:"Élève"}),Js=s.jsx(C,{children:"Classe"}),Gs=s.jsx(C,{children:"Statut"}),Xs=s.jsx(C,{children:"Horaires"}),Ks=s.jsx(C,{children:"Contact parent"}),Os=s.jsx(C,{className:"text-right",children:"Actions"}),e[190]=Us,e[191]=Js,e[192]=Gs,e[193]=Xs,e[194]=Ks,e[195]=Os):(Us=e[190],Js=e[191],Gs=e[192],Xs=e[193],Ks=e[194],Os=e[195]);let Se;e[196]!==ye?(Se=s.jsx(Sl,{children:s.jsxs(Ft,{children:[ye,Us,Js,Gs,Xs,Ks,Os]})}),e[196]=ye,e[197]=Se):Se=e[197];let we;e[198]!==h||e[199]!==bt||e[200]!==i||e[201]!==o?(we=h.length===0?s.jsx(Ft,{children:s.jsxs(y,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:[s.jsx(qt,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),s.jsx("p",{className:"text-lg",children:"Aucun élève trouvé"}),s.jsx("p",{className:"text-sm mt-2",children:"Modifiez vos critères de recherche"})]})}):h.map(t=>{const r=i.find(c=>c.eleve_id===t.id);return s.jsxs(Ft,{className:"hover:bg-muted/50",children:[s.jsx(y,{children:s.jsx(Zt,{checked:o.includes(t.id),onCheckedChange:c=>bt(t.id,c===!0)})}),s.jsx(y,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center overflow-hidden",children:t.photo?s.jsx("img",{src:t.photo,alt:`${t.prenom} ${t.nom}`,className:"h-full w-full object-cover"}):s.jsx(el,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:[t.prenom," ",t.nom]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.matricule," • ",t.age," ans"]})]})]})}),s.jsx(y,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("div",{className:"font-medium",children:t.classe.nom}),xl(t.classe.niveau)]})}),s.jsxs(y,{children:[s.jsxs(Vt,{children:[s.jsx(Ht,{asChild:!0,children:s.jsx("div",{className:"cursor-pointer",children:Ut(r?r.statut:"absent")})}),s.jsxs(It,{align:"start",children:[s.jsxs(f,{onClick:()=>qe(t.id,"present"),children:[s.jsx(Ke,{className:"h-4 w-4 mr-2 text-green-600"}),"Présent"]}),s.jsxs(f,{onClick:()=>qe(t.id,"absent"),children:[s.jsx(ft,{className:"h-4 w-4 mr-2 text-red-600"}),"Absent"]}),s.jsxs(f,{onClick:()=>qe(t.id,"retard"),children:[s.jsx(Oe,{className:"h-4 w-4 mr-2 text-amber-600"}),"Retard"]}),s.jsxs(f,{onClick:()=>qe(t.id,"malade"),children:[s.jsx(E,{className:"h-4 w-4 mr-2 text-blue-600"}),"Malade"]}),s.jsxs(f,{onClick:()=>qe(t.id,"exclu"),children:[s.jsx(E,{className:"h-4 w-4 mr-2 text-gray-600"}),"Exclu"]})]})]}),r?.raison_absence&&s.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[r.raison_absence,r.justificatif&&s.jsx(M,{variant:"outline",className:"ml-1 text-xs",children:"Justifié"})]})]}),s.jsx(y,{children:r?.heure_arrivee?s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(Oe,{className:"h-3 w-3"}),r.heure_arrivee," - ",r.heure_depart||"--:--"]}),r.retard_minutes&&s.jsxs(M,{variant:"outline",className:"text-xs",children:["+",r.retard_minutes," min"]})]}):s.jsx("span",{className:"text-sm text-muted-foreground",children:"Non applicable"})}),s.jsx(y,{children:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx($l,{className:"h-3 w-3"}),t.parent_contact]}),s.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[s.jsx(Xe,{className:"h-3 w-3"}),s.jsx("span",{className:"truncate max-w-[120px]",children:t.parent_email})]})]})}),s.jsx(y,{className:"text-right",children:s.jsxs(Vt,{children:[s.jsx(Ht,{asChild:!0,children:s.jsx(d,{variant:"ghost",size:"icon",children:s.jsx(Rl,{className:"h-4 w-4"})})}),s.jsxs(It,{align:"end",children:[s.jsxs(f,{children:[s.jsx(Bl,{className:"h-4 w-4 mr-2"}),"Voir profil"]}),s.jsxs(f,{children:[s.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Contacter parent"]}),s.jsxs(f,{children:[s.jsx(zl,{className:"h-4 w-4 mr-2"}),"Justificatif"]}),s.jsx(Yt,{}),s.jsxs(f,{className:"text-destructive",children:[s.jsx(E,{className:"h-4 w-4 mr-2"}),"Signaler problème"]})]})]})})]},t.id)}),e[198]=h,e[199]=bt,e[200]=i,e[201]=o,e[202]=we):we=e[202];let Ce;e[203]!==we?(Ce=s.jsx(wl,{children:we}),e[203]=we,e[204]=Ce):Ce=e[204];let Me;e[205]!==Se||e[206]!==Ce?(Me=s.jsx(b,{children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(Cl,{children:[Se,Ce]})})}),e[205]=Se,e[206]=Ce,e[207]=Me):Me=e[207];const At=o.length>1?"s":"",Lt=o.length>1?"s":"";let Ee;e[208]!==o.length||e[209]!==At||e[210]!==Lt?(Ee=s.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.length," élève",At," sélectionné",Lt]}),e[208]=o.length,e[209]=At,e[210]=Lt,e[211]=Ee):Ee=e[211];let Qs;e[212]===Symbol.for("react.memo_cache_sentinel")?(Qs=s.jsx(d,{variant:"outline",onClick:()=>D([]),children:"Tout désélectionner"}),e[212]=Qs):Qs=e[212];let De;e[213]!==Ee?(De=s.jsxs(vl,{className:"flex justify-between",children:[Ee,Qs]}),e[213]=Ee,e[214]=De):De=e[214];let Te;e[215]!==Me||e[216]!==De?(Te=s.jsxs(p,{children:[qs,Me,De]}),e[215]=Me,e[216]=De,e[217]=Te):Te=e[217];let Pe;e[218]!==_e||e[219]!==Te?(Pe=s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[_e,Te]}),e[218]=_e,e[219]=Te,e[220]=Pe):Pe=e[220];let Ws;e[221]===Symbol.for("react.memo_cache_sentinel")?(Ws=s.jsx(Je,{children:s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(ql,{className:"h-5 w-5"}),"Taux de présence par classe"]})}),e[221]=Ws):Ws=e[221];let Ae;e[222]!==a.par_classe?(Ae=a.par_classe.map(Ql),e[222]=a.par_classe,e[223]=Ae):Ae=e[223];let Le;e[224]!==Ae?(Le=s.jsxs(p,{children:[Ws,s.jsx(b,{children:s.jsx("div",{className:"space-y-4",children:Ae})})]}),e[224]=Ae,e[225]=Le):Le=e[225];let Ys;e[226]===Symbol.for("react.memo_cache_sentinel")?(Ys=s.jsx(Je,{children:s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(ll,{className:"h-5 w-5"}),"Évolution sur 7 jours"]})}),e[226]=Ys):Ys=e[226];let Zs;e[227]===Symbol.for("react.memo_cache_sentinel")?(Zs=s.jsx("div",{className:"space-y-4",children:Array.from({length:7},Ol)}),e[227]=Zs):Zs=e[227];let et;e[228]===Symbol.for("react.memo_cache_sentinel")?(et=s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Moyenne sur 7 jours:"}),s.jsx("span",{className:"font-bold text-green-600",children:"85.4%"})]}),e[228]=et):et=e[228];let st;e[229]===Symbol.for("react.memo_cache_sentinel")?(st=s.jsx("span",{className:"text-muted-foreground",children:"Évolution:"}),e[229]=st):st=e[229];let tt;e[230]===Symbol.for("react.memo_cache_sentinel")?(tt=s.jsxs(p,{children:[Ys,s.jsxs(b,{children:[Zs,s.jsxs("div",{className:"mt-6 pt-6 border-t",children:[et,s.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[st,s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ll,{className:"h-4 w-4 text-green-600"}),s.jsx("span",{className:"font-bold text-green-600",children:"+2.3%"})]})]})]})]})]}),e[230]=tt):tt=e[230];let lt;e[231]===Symbol.for("react.memo_cache_sentinel")?(lt=s.jsx(Je,{children:s.jsxs(Ge,{className:"flex items-center gap-2",children:[s.jsx(E,{className:"h-5 w-5"}),"Absences à justifier"]})}),e[231]=lt):lt=e[231];let ke;if(e[232]!==u||e[233]!==i){let t;e[235]!==u?(t=r=>{const c=u.find(N=>N.id===r.eleve_id);return c?s.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx(el,{className:"h-4 w-4"})}),s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium",children:[c.prenom," ",c.nom.charAt(0),"."]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:c.classe.nom})]})]}),s.jsx(d,{size:"sm",variant:"outline",children:"Demander"})]},r.id):null},e[235]=u,e[236]=t):t=e[236],ke=i.filter(Kl).slice(0,5).map(t),e[232]=u,e[233]=i,e[234]=ke}else ke=e[234];let $e;e[237]!==i?($e=i.filter(Xl).length===0&&s.jsxs("div",{className:"text-center py-4 text-muted-foreground",children:[s.jsx(Ke,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"Toutes les absences sont justifiées"})]}),e[237]=i,e[238]=$e):$e=e[238];let Re;e[239]!==ke||e[240]!==$e?(Re=s.jsxs(p,{children:[lt,s.jsx(b,{children:s.jsxs("div",{className:"space-y-3",children:[ke,$e]})})]}),e[239]=ke,e[240]=$e,e[241]=Re):Re=e[241];let at;e[242]===Symbol.for("react.memo_cache_sentinel")?(at=s.jsx(Je,{children:s.jsx(Ge,{children:"Actions rapides"})}),e[242]=at):at=e[242];let rt;e[243]===Symbol.for("react.memo_cache_sentinel")?(rt=s.jsxs(d,{variant:"outline",className:"w-full justify-start",children:[s.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Notifier tous les absents"]}),e[243]=rt):rt=e[243];let nt;e[244]===Symbol.for("react.memo_cache_sentinel")?(nt=s.jsxs(d,{variant:"outline",className:"w-full justify-start",children:[s.jsx(sl,{className:"h-4 w-4 mr-2"}),"Liste d'appel"]}),e[244]=nt):nt=e[244];let it;e[245]===Symbol.for("react.memo_cache_sentinel")?(it=s.jsxs(d,{variant:"outline",className:"w-full justify-start",children:[s.jsx(tl,{className:"h-4 w-4 mr-2"}),"Exporter en Excel"]}),e[245]=it):it=e[245];let ct;e[246]===Symbol.for("react.memo_cache_sentinel")?(ct=s.jsxs(p,{children:[at,s.jsxs(b,{className:"space-y-3",children:[rt,nt,it,s.jsxs(d,{variant:"outline",className:"w-full justify-start",children:[s.jsx(ht,{className:"h-4 w-4 mr-2"}),"Voir calendrier mensuel"]})]})]}),e[246]=ct):ct=e[246];let Be;e[247]!==Le||e[248]!==Re?(Be=s.jsxs("div",{className:"space-y-6",children:[Le,tt,Re,ct]}),e[247]=Le,e[248]=Re,e[249]=Be):Be=e[249];let ze;e[250]!==Pe||e[251]!==Be?(ze=s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[Pe,Be]}),e[250]=Pe,e[251]=Be,e[252]=ze):ze=e[252];let ot;e[253]===Symbol.for("react.memo_cache_sentinel")?(ot=s.jsx(E,{className:"h-4 w-4 text-blue-600"}),e[253]=ot):ot=e[253];let mt;e[254]===Symbol.for("react.memo_cache_sentinel")?(mt=s.jsx("p",{className:"font-medium",children:"Conseil du jour"}),e[254]=mt):mt=e[254];let Fe;e[255]!==a.taux_presence?(Fe=a.taux_presence.toFixed(1),e[255]=a.taux_presence,e[256]=Fe):Fe=e[256];const kt=a.taux_presence<90&&" Pensez à contacter les parents des élèves fréquemment absents.";let Ve;e[257]!==Fe||e[258]!==kt?(Ve=s.jsxs("div",{children:[mt,s.jsxs("p",{className:"text-sm",children:["Le taux de présence actuel est de ",Fe,"%.",kt]})]}),e[257]=Fe,e[258]=kt,e[259]=Ve):Ve=e[259];let dt;e[260]===Symbol.for("react.memo_cache_sentinel")?(dt=s.jsx(d,{size:"sm",variant:"outline",className:"ml-4",children:"Voir rapport détaillé"}),e[260]=dt):dt=e[260];let He;e[261]!==Ve?(He=s.jsxs(_l,{className:"mt-6 bg-blue-50 border-blue-200",children:[ot,s.jsx(yl,{className:"text-blue-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[Ve,dt]})})]}),e[261]=Ve,e[262]=He):He=e[262];let xt;return e[263]!==ze||e[264]!==He||e[265]!==A||e[266]!==J||e[267]!==xe?(xt=s.jsxs(s.Fragment,{children:[us,s.jsxs(El,{activeRoute:"/presences-eleves",children:[A,J,xe,ze,He]})]}),e[263]=ze,e[264]=He,e[265]=A,e[266]=J,e[267]=xe,e[268]=xt):xt=e[268],xt}function Xl(e){return e.statut==="absent"&&!e.justificatif}function Kl(e){return e.statut==="absent"&&!e.justificatif}function Ol(e,m){const l=rl(new Date,6-m),x=Math.floor(Math.random()*30)+70;return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm",children:[Qe(l,"EEE",{locale:ut}),s.jsx("div",{className:"text-xs text-muted-foreground",children:Qe(l,"dd/MM")})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-32",children:s.jsx(Ie,{value:x,className:`h-2 ${x>=90?"bg-green-500":x>=80?"bg-amber-500":"bg-red-500"}`})}),s.jsxs("span",{className:"text-sm font-medium w-12 text-right",children:[x,"%"]})]})]},m)}function Ql(e,m){return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:e.classe}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.presents," présents / ",e.presents+e.absents," élèves"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`font-bold ${e.taux>=90?"text-green-600":e.taux>=80?"text-amber-600":"text-red-600"}`,children:[e.taux.toFixed(1),"%"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:e.taux>=90?"Excellent":e.taux>=80?"Bon":"À améliorer"})]})]}),s.jsx(Ie,{value:e.taux,className:`h-2 ${e.taux>=90?"bg-green-500":e.taux>=80?"bg-amber-500":"bg-red-500"}`})]},m)}function Wl(e){return s.jsx(S,{value:e.nom,children:e.nom},e.id)}function Yl(e){return Qe(e,"EEEE d MMMM yyyy",{locale:ut})}function Zl(e){const m={Collège:"default",Lycée:"secondary"};return s.jsx(M,{variant:m[e],children:e})}function ea(e){const m={present:{variant:"success",icon:Ke,label:"Présent"},absent:{variant:"destructive",icon:ft,label:"Absent"},retard:{variant:"warning",icon:Oe,label:"Retard"},exclu:{variant:"secondary",icon:E,label:"Exclu"},malade:{variant:"info",icon:E,label:"Malade"}},{variant:l,icon:x,label:n}=m[e];return s.jsxs(M,{variant:l,className:"flex items-center gap-1",children:[s.jsx(x,{className:"h-3 w-3"}),n]})}function sa(e){return e.id}function ta(e){return e.statut==="absent"}function la(e){return e.statut==="present"}function aa(e){return e.statut==="retard"}function ra(e){return e.statut==="absent"}function na(e){return e.statut==="present"}export{Ja as default};
