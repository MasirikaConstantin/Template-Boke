import{c as ce,r as W,R as oe,j as t,L as ne,b as w,H as de}from"./app-CyulpZ4l.js";import{B as C}from"./createLucideIcon-BQY_2rDi.js";import{I as Y}from"./input-DZO_bzLb.js";import{T as Z,a as N,c as me,b as y,e as he,d as fe}from"./table-C6noO-ui.js";import{B as xe}from"./badge-CzRquX7r.js";import{C as pe}from"./checkbox-Bx6-NURT.js";import{A as se,a as ae}from"./alert-C04XUOS6.js";import{P as ue}from"./pagination-DZ5BrUHJ.js";import{c as je,D as ge}from"./DashboardLayout-CJuE1ZNF.js";import{P as ve}from"./PageHeader-kw0-uq8p.js";import{P as be}from"./plus-Cntibx7C.js";import{F as _e}from"./folder-Cu9BHQic.js";import{C as Ne}from"./circle-check-big-B9kmu0mx.js";import{C as Se}from"./circle-x-Dvx7atPi.js";import{S as Ce}from"./square-pen-BP298jC8.js";import{T as ye}from"./trash-2-CVtaWyO2.js";import{S as we}from"./separator-C9WSIPQc.js";/* empty css            */import"./sheet-Cxg_ZlmL.js";import"./index-_vAUJaj-.js";import"./check-CjUWd-kM.js";import"./index-DwM1dw0K.js";import"./users-oYdqotjr.js";import"./calendar-CKoc8gf1.js";import"./file-text-Dg4dGPiw.js";import"./dollar-sign-BTVKeyIs.js";import"./user-B3FC1fbi.js";import"./house-CbOgEd2s.js";function st(D){const e=ce.c(60),{auth:M,categories:a,filters:l,flash:i}=D,[c,re]=W.useState(l.search||""),[n,ee]=W.useState(null);let T;e[0]===Symbol.for("react.memo_cache_sentinel")?(T={nom_categorie:"",code:"",description:"",est_actif:!0},e[0]=T):T=e[0];const[r,S]=W.useState(T);let P,k;e[1]!==c?(P=()=>{const s=setTimeout(()=>{w.get("/categories-depense",{search:c},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(s)},k=[c],e[1]=c,e[2]=P,e[3]=k):(P=e[2],k=e[3]),oe.useEffect(P,k);let A;e[4]!==l?(A=(s,o)=>{w.get("/categories-depense",{...l,[s]:o},{preserveState:!0,replace:!0})},e[4]=l,e[5]=A):A=e[5];const O=A;let F;e[6]===Symbol.for("react.memo_cache_sentinel")?(F=s=>{ee(s.id),S({nom_categorie:s.nom_categorie,code:s.code,description:s.description||"",est_actif:s.est_actif})},e[6]=F):F=e[6];const le=F;let R;e[7]===Symbol.for("react.memo_cache_sentinel")?(R=()=>{ee(null),S({nom_categorie:"",code:"",description:"",est_actif:!0})},e[7]=R):R=e[7];const te=R;let B;e[8]!==r?(B=s=>{w.put(`/categories-depense/${s}`,r,{onSuccess:()=>{te()}})},e[8]=r,e[9]=B):B=e[9];const Q=B,ie=De;let E;e[10]===Symbol.for("react.memo_cache_sentinel")?(E=t.jsx(de,{title:"Catégories de dépenses"}),e[10]=E):E=e[10];const V=`${a.total} catégories`;let I;e[11]===Symbol.for("react.memo_cache_sentinel")?(I=[{label:"Dashboard",href:"/dashboard"},{label:"Budgets",href:"/budgets"},{label:"Catégories",href:"/categories-depense"}],e[11]=I):I=e[11];let H;e[12]===Symbol.for("react.memo_cache_sentinel")?(H=je.create(),e[12]=H):H=e[12];let $;e[13]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(ne,{href:H.url,children:t.jsxs(C,{children:[t.jsx(be,{className:"h-4 w-4 mr-2"}),"Nouvelle catégorie"]})}),e[13]=$):$=e[13];let d;e[14]!==V?(d=t.jsx(ve,{title:"Catégories de dépenses",description:V,breadcrumb:I,actions:$}),e[14]=V,e[15]=d):d=e[15];let m;e[16]!==i?(m=i?.success&&t.jsx(se,{className:"mb-6",children:t.jsx(ae,{children:i.success})}),e[16]=i,e[17]=m):m=e[17];let h;e[18]!==i?(h=i?.error&&t.jsx(se,{variant:"destructive",className:"mb-6",children:t.jsx(ae,{children:i.error})}),e[18]=i,e[19]=h):h=e[19];let z;e[20]===Symbol.for("react.memo_cache_sentinel")?(z=t.jsx(we,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e[20]=z):z=e[20];let L;e[21]===Symbol.for("react.memo_cache_sentinel")?(L=s=>re(s.target.value),e[21]=L):L=e[21];let f;e[22]!==c?(f=t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[z,t.jsx(Y,{placeholder:"Rechercher une catégorie...",value:c,onChange:L,className:"pl-10"})]})}),e[22]=c,e[23]=f):f=e[23];let x;e[24]!==l.per_page?(x=l.per_page?.toString()||"15",e[24]=l.per_page,e[25]=x):x=e[25];let p;e[26]!==O?(p=s=>O("per_page",s.target.value),e[26]=O,e[27]=p):p=e[27];let q,U,X,G;e[28]===Symbol.for("react.memo_cache_sentinel")?(q=t.jsx("option",{value:"10",children:"10"}),U=t.jsx("option",{value:"15",children:"15"}),X=t.jsx("option",{value:"25",children:"25"}),G=t.jsx("option",{value:"50",children:"50"}),e[28]=q,e[29]=U,e[30]=X,e[31]=G):(q=e[28],U=e[29],X=e[30],G=e[31]);let u;e[32]!==x||e[33]!==p?(u=t.jsx("div",{className:"flex gap-2",children:t.jsxs("select",{value:x,onChange:p,className:"border rounded-lg px-3 py-2 text-sm",children:[q,U,X,G]})}),e[32]=x,e[33]=p,e[34]=u):u=e[34];let j;e[35]!==f||e[36]!==u?(j=t.jsx("div",{className:"bg-card rounded-lg border p-4 mb-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[f,u]})}),e[35]=f,e[36]=u,e[37]=j):j=e[37];let J;e[38]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(me,{children:t.jsxs(Z,{children:[t.jsx(y,{children:"Catégorie"}),t.jsx(y,{children:"Code"}),t.jsx(y,{children:"Statut"}),t.jsx(y,{children:"Créé le"}),t.jsx(y,{className:"text-right",children:"Actions"})]})}),e[38]=J):J=e[38];let g;e[39]!==a.data||e[40]!==n||e[41]!==r||e[42]!==Q?(g=a.data.length===0?t.jsx(Z,{children:t.jsxs(N,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:[t.jsx(_e,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),t.jsx("p",{className:"text-lg",children:"Aucune catégorie trouvée"})]})}):a.data.map(s=>t.jsxs(Z,{className:"hover:bg-muted/50",children:[t.jsx(N,{children:n===s.id?t.jsx(Y,{value:r.nom_categorie,onChange:o=>S({...r,nom_categorie:o.target.value}),className:"mb-2"}):t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:s.nom_categorie}),s.description&&t.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.description})]})}),t.jsx(N,{children:n===s.id?t.jsx(Y,{value:r.code,onChange:o=>S({...r,code:o.target.value})}):t.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:s.code})}),t.jsx(N,{children:n===s.id?t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(pe,{checked:r.est_actif,onCheckedChange:o=>S({...r,est_actif:o===!0})}),t.jsx("label",{className:"text-sm",children:r.est_actif?"Actif":"Inactif"})]}):t.jsx(xe,{variant:s.est_actif?"default":"secondary",children:s.est_actif?t.jsxs(t.Fragment,{children:[t.jsx(Ne,{className:"h-3 w-3 mr-1"}),"Actif"]}):t.jsxs(t.Fragment,{children:[t.jsx(Se,{className:"h-3 w-3 mr-1"}),"Inactif"]})})}),t.jsx(N,{children:t.jsx("div",{className:"text-sm",children:new Date(s.created_at).toLocaleDateString("fr-FR")})}),t.jsx(N,{className:"text-right",children:n===s.id?t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(C,{variant:"outline",size:"sm",onClick:te,children:"Annuler"}),t.jsx(C,{size:"sm",onClick:()=>Q(s.id),children:"Sauvegarder"})]}):t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(C,{variant:"ghost",size:"sm",onClick:()=>le(s),children:t.jsx(Ce,{className:"h-4 w-4"})}),t.jsx(C,{variant:"ghost",size:"sm",onClick:()=>ie(s),className:"text-destructive",children:t.jsx(ye,{className:"h-4 w-4"})})]})})]},s.id)),e[39]=a.data,e[40]=n,e[41]=r,e[42]=Q,e[43]=g):g=e[43];let v;e[44]!==g?(v=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs(he,{children:[J,t.jsx(fe,{children:g})]})}),e[44]=g,e[45]=v):v=e[45];let b;e[46]!==a.current_page||e[47]!==a.last_page||e[48]!==l?(b=a.last_page>1&&t.jsx("div",{className:"border-t p-4",children:t.jsx(ue,{currentPage:a.current_page,totalPages:a.last_page,onPageChange:s=>{w.get("/categories-depense",{...l,page:s},{preserveState:!0,replace:!0})}})}),e[46]=a.current_page,e[47]=a.last_page,e[48]=l,e[49]=b):b=e[49];let _;e[50]!==v||e[51]!==b?(_=t.jsxs("div",{className:"bg-card rounded-lg border overflow-hidden",children:[v,b]}),e[50]=v,e[51]=b,e[52]=_):_=e[52];let K;return e[53]!==M||e[54]!==d||e[55]!==m||e[56]!==h||e[57]!==j||e[58]!==_?(K=t.jsxs(t.Fragment,{children:[E,t.jsxs(ge,{activeRoute:"/categories-depense",auth:M,children:[d,m,h,j,_]})]}),e[53]=M,e[54]=d,e[55]=m,e[56]=h,e[57]=j,e[58]=_,e[59]=K):K=e[59],K}function De(D){confirm(`Êtes-vous sûr de vouloir supprimer "${D.nom_categorie}" ?`)&&w.delete(`/categories-depense/${D.id}`)}export{st as default};
