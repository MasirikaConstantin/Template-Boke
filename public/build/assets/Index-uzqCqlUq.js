import{c as os,r as Je,R as ds,j as s,L as Ee,b as X,H as ms}from"./app-CyulpZ4l.js";import{B as Re}from"./createLucideIcon-BQY_2rDi.js";import{I as xs}from"./input-DZO_bzLb.js";import{T as qe,a as d,b as x,c as hs,d as us,e as fs}from"./table-C6noO-ui.js";import{D as Ke,a as Qe,b as We,c as h,d as Xe,S as ps}from"./separator-C9WSIPQc.js";import{S as $e,a as Ie,b as Ve,c as Fe,d as o}from"./select-ltAgklA8.js";import{B as Me}from"./badge-CzRquX7r.js";import{C as Ye}from"./checkbox-Bx6-NURT.js";import{A as Ze,a as es}from"./alert-C04XUOS6.js";import{P as js}from"./progress-_851Ia8p.js";import{P as vs}from"./pagination-DZ5BrUHJ.js";import{D as gs}from"./DashboardLayout-CJuE1ZNF.js";import{P as Ns}from"./PageHeader-kw0-uq8p.js";import{U as ss}from"./users-oYdqotjr.js";import{T as ts}from"./trash-2-CVtaWyO2.js";import{S as ls}from"./school-BrJMGJyi.js";import{E as bs}from"./ellipsis-vertical-DnEz3Ch7.js";import{E as Ss}from"./eye-DDyiKe5G.js";import{S as _s}from"./square-pen-BP298jC8.js";import{F as ws}from"./file-text-Dg4dGPiw.js";import{D as ys}from"./download-CVv9JMZ8.js";import{P as Cs}from"./plus-Cntibx7C.js";import{B as Ps}from"./book-open-BNn02EQd.js";import{G as Ts}from"./graduation-cap-BfqpeUu8.js";import{F as ks}from"./funnel-BRJ9qA-s.js";/* empty css            */import"./sheet-Cxg_ZlmL.js";import"./index-_vAUJaj-.js";import"./check-CjUWd-kM.js";import"./index-DwM1dw0K.js";import"./calendar-CKoc8gf1.js";import"./dollar-sign-BTVKeyIs.js";import"./user-B3FC1fbi.js";import"./house-CbOgEd2s.js";function pt(i){const e=os.c(134),{classes:a,filters:l,stats:c,sections:f,flash:m}=i;let Y;e[0]===Symbol.for("react.memo_cache_sentinel")?(Y=[],e[0]=Y):Y=e[0];const[r,Q]=Je.useState(Y),[u,as]=Je.useState(l.search||"");let Z,ee;e[1]!==u?(Z=()=>{const t=setTimeout(()=>{X.get("/classes",{search:u},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(t)},ee=[u],e[1]=u,e[2]=Z,e[3]=ee):(Z=e[2],ee=e[3]),ds.useEffect(Z,ee);let se;e[4]!==l?(se=(t,W)=>{X.get("/classes",{...l,[t]:W},{preserveState:!0,replace:!0})},e[4]=l,e[5]=se):se=e[5];const n=se;let te;e[6]!==a.data?(te=t=>{Q(t?a.data.map($s):[])},e[6]=a.data,e[7]=te):te=e[7];const He=te;let le;e[8]!==r?(le=(t,W)=>{Q(W?[...r,t]:r.filter(ns=>ns!==t))},e[8]=r,e[9]=le):le=e[9];const ze=le;let ae;e[10]!==r?(ae=t=>{r.length!==0&&confirm(`Êtes-vous sûr de vouloir effectuer cette action sur ${r.length} classe(s) ?`)&&X.post("/classes/bulk-action",{ids:r,action:t},{onSuccess:()=>Q([])})},e[10]=r,e[11]=ae):ae=e[11];const p=ae,rs=Rs,is=Es,cs=Bs;let re;e[12]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(ms,{title:"Gestion des classes"}),e[12]=re):re=e[12];const Ge=`${a.total} classes - ${c.total_eleves} élèves`;let ie;e[13]===Symbol.for("react.memo_cache_sentinel")?(ie=[{label:"Dashboard",href:"/dashboard"},{label:"Classes",href:"/classes"}],e[13]=ie):ie=e[13];let j;e[14]!==p||e[15]!==r.length?(j=r.length>0&&s.jsxs(Ke,{children:[s.jsx(Qe,{asChild:!0,children:s.jsxs(Re,{variant:"outline",children:[s.jsx(ss,{className:"h-4 w-4 mr-2"}),"Actions (",r.length,")"]})}),s.jsxs(We,{align:"end",children:[s.jsx(h,{onClick:()=>p("activate"),children:"Activer"}),s.jsx(h,{onClick:()=>p("deactivate"),children:"Désactiver"}),s.jsx(h,{onClick:()=>p("archive"),children:"Archiver"}),s.jsx(Xe,{}),s.jsxs(h,{onClick:()=>p("delete"),className:"text-destructive",children:[s.jsx(ts,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]}),e[14]=p,e[15]=r.length,e[16]=j):j=e[16];let ce;e[17]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsxs(Re,{variant:"outline",onClick:As,children:[s.jsx(ys,{className:"h-4 w-4 mr-2"}),"Exporter"]}),e[17]=ce):ce=e[17];let ne;e[18]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(Ee,{href:"/classes/create",children:s.jsxs(Re,{children:[s.jsx(Cs,{className:"h-4 w-4 mr-2"}),"Nouvelle classe"]})}),e[18]=ne):ne=e[18];let v;e[19]!==j?(v=s.jsxs("div",{className:"flex items-center gap-2",children:[j,ce,ne]}),e[19]=j,e[20]=v):v=e[20];let g;e[21]!==v||e[22]!==Ge?(g=s.jsx(Ns,{title:"Classes",description:Ge,breadcrumb:ie,actions:v}),e[21]=v,e[22]=Ge,e[23]=g):g=e[23];let N;e[24]!==m?(N=m?.success&&s.jsx(Ze,{className:"mb-6",children:s.jsx(es,{children:m.success})}),e[24]=m,e[25]=N):N=e[25];let b;e[26]!==m?(b=m?.error&&s.jsx(Ze,{variant:"destructive",className:"mb-6",children:s.jsx(es,{children:m.error})}),e[26]=m,e[27]=b):b=e[27];let oe;e[28]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total classes"}),e[28]=oe):oe=e[28];let S;e[29]!==c.total?(S=s.jsxs("div",{children:[oe,s.jsx("p",{className:"text-2xl font-bold",children:c.total})]}),e[29]=c.total,e[30]=S):S=e[30];let de;e[31]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(ls,{className:"h-8 w-8 text-primary"}),e[31]=de):de=e[31];let _;e[32]!==S?(_=s.jsx("div",{className:"bg-card rounded-lg border p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[S,de]})}),e[32]=S,e[33]=_):_=e[33];let me;e[34]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Primaire"}),e[34]=me):me=e[34];let w;e[35]!==c.primaire?(w=s.jsxs("div",{children:[me,s.jsx("p",{className:"text-2xl font-bold",children:c.primaire})]}),e[35]=c.primaire,e[36]=w):w=e[36];let xe;e[37]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(Ps,{className:"h-8 w-8 text-blue-500"}),e[37]=xe):xe=e[37];let y;e[38]!==w?(y=s.jsx("div",{className:"bg-card rounded-lg border p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[w,xe]})}),e[38]=w,e[39]=y):y=e[39];let he;e[40]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Secondaire"}),e[40]=he):he=e[40];let C;e[41]!==c.secondaire?(C=s.jsxs("div",{children:[he,s.jsx("p",{className:"text-2xl font-bold",children:c.secondaire})]}),e[41]=c.secondaire,e[42]=C):C=e[42];let ue;e[43]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx(Ts,{className:"h-8 w-8 text-purple-500"}),e[43]=ue):ue=e[43];let P;e[44]!==C?(P=s.jsx("div",{className:"bg-card rounded-lg border p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[C,ue]})}),e[44]=C,e[45]=P):P=e[45];let fe;e[46]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Élèves total"}),e[46]=fe):fe=e[46];let T;e[47]!==c.total_eleves?(T=s.jsxs("div",{children:[fe,s.jsx("p",{className:"text-2xl font-bold",children:c.total_eleves})]}),e[47]=c.total_eleves,e[48]=T):T=e[48];let pe;e[49]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(ss,{className:"h-8 w-8 text-green-500"}),e[49]=pe):pe=e[49];let k;e[50]!==T?(k=s.jsx("div",{className:"bg-card rounded-lg border p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[T,pe]})}),e[50]=T,e[51]=k):k=e[51];let D;e[52]!==_||e[53]!==y||e[54]!==P||e[55]!==k?(D=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[_,y,P,k]}),e[52]=_,e[53]=y,e[54]=P,e[55]=k,e[56]=D):D=e[56];let je;e[57]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(ps,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e[57]=je):je=e[57];let ve;e[58]===Symbol.for("react.memo_cache_sentinel")?(ve=t=>as(t.target.value),e[58]=ve):ve=e[58];let A;e[59]!==u?(A=s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[je,s.jsx(xs,{placeholder:"Rechercher une classe...",value:u,onChange:ve,className:"pl-10"})]})}),e[59]=u,e[60]=A):A=e[60];const Le=l.niveau||"";let B;e[61]!==n?(B=t=>n("niveau",t),e[61]=n,e[62]=B):B=e[62];let ge;e[63]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsxs(Ie,{className:"w-[140px]",children:[s.jsx(ks,{className:"h-4 w-4 mr-2"}),s.jsx(Ve,{placeholder:"Niveau"})]}),e[63]=ge):ge=e[63];let Ne;e[64]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsxs(Fe,{children:[s.jsx(o,{value:"all",children:"Tous niveaux"}),s.jsx(o,{value:"primaire",children:"Primaire"}),s.jsx(o,{value:"secondaire",children:"Secondaire"})]}),e[64]=Ne):Ne=e[64];let E;e[65]!==Le||e[66]!==B?(E=s.jsxs($e,{value:Le,onValueChange:B,children:[ge,Ne]}),e[65]=Le,e[66]=B,e[67]=E):E=e[67];let R;e[68]!==l.niveau||e[69]!==l.section||e[70]!==n||e[71]!==f?(R=l.niveau==="secondaire"&&s.jsxs($e,{value:l.section||"",onValueChange:t=>n("section",t),children:[s.jsx(Ie,{className:"w-[140px]",children:s.jsx(Ve,{placeholder:"Section"})}),s.jsxs(Fe,{children:[s.jsx(o,{value:"all",children:"Toutes sections"}),Object.entries(f).map(Ds)]})]}),e[68]=l.niveau,e[69]=l.section,e[70]=n,e[71]=f,e[72]=R):R=e[72];const Oe=l.statut||"";let $;e[73]!==n?($=t=>n("statut",t),e[73]=n,e[74]=$):$=e[74];let be;e[75]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx(Ie,{className:"w-[140px]",children:s.jsx(Ve,{placeholder:"Statut"})}),e[75]=be):be=e[75];let Se;e[76]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsxs(Fe,{children:[s.jsx(o,{value:"all",children:"Tous statuts"}),s.jsx(o,{value:"active",children:"Active"}),s.jsx(o,{value:"inactive",children:"Inactive"}),s.jsx(o,{value:"archived",children:"Archivée"})]}),e[76]=Se):Se=e[76];let I;e[77]!==Oe||e[78]!==$?(I=s.jsxs($e,{value:Oe,onValueChange:$,children:[be,Se]}),e[77]=Oe,e[78]=$,e[79]=I):I=e[79];let V;e[80]!==l.per_page?(V=l.per_page?.toString()||"10",e[80]=l.per_page,e[81]=V):V=e[81];let F;e[82]!==n?(F=t=>n("per_page",t),e[82]=n,e[83]=F):F=e[83];let _e;e[84]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(Ie,{className:"w-[100px]",children:s.jsx(Ve,{placeholder:"Par page"})}),e[84]=_e):_e=e[84];let we;e[85]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsxs(Fe,{children:[s.jsx(o,{value:"10",children:"10"}),s.jsx(o,{value:"25",children:"25"}),s.jsx(o,{value:"50",children:"50"})]}),e[85]=we):we=e[85];let M;e[86]!==V||e[87]!==F?(M=s.jsxs($e,{value:V,onValueChange:F,children:[_e,we]}),e[86]=V,e[87]=F,e[88]=M):M=e[88];let H;e[89]!==E||e[90]!==R||e[91]!==I||e[92]!==M?(H=s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[E,R,I,M]}),e[89]=E,e[90]=R,e[91]=I,e[92]=M,e[93]=H):H=e[93];let z;e[94]!==A||e[95]!==H?(z=s.jsx("div",{className:"bg-card rounded-lg border p-4 mb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[A,H]})}),e[94]=A,e[95]=H,e[96]=z):z=e[96];const Ue=r.length===a.data.length&&a.data.length>0;let G;e[97]!==He||e[98]!==Ue?(G=s.jsx(x,{className:"w-12",children:s.jsx(Ye,{checked:Ue,onCheckedChange:He})}),e[97]=He,e[98]=Ue,e[99]=G):G=e[99];let ye,Ce,Pe,Te,ke,De,Ae;e[100]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx(x,{children:"Classe"}),Ce=s.jsx(x,{children:"Niveau/Section"}),Pe=s.jsx(x,{children:"Prof. Principal"}),Te=s.jsx(x,{children:"Élèves"}),ke=s.jsx(x,{children:"Occupation"}),De=s.jsx(x,{children:"Statut"}),Ae=s.jsx(x,{className:"text-right",children:"Actions"}),e[100]=ye,e[101]=Ce,e[102]=Pe,e[103]=Te,e[104]=ke,e[105]=De,e[106]=Ae):(ye=e[100],Ce=e[101],Pe=e[102],Te=e[103],ke=e[104],De=e[105],Ae=e[106]);let L;e[107]!==G?(L=s.jsx(hs,{children:s.jsxs(qe,{children:[G,ye,Ce,Pe,Te,ke,De,Ae]})}),e[107]=G,e[108]=L):L=e[108];let O;e[109]!==a.data||e[110]!==l.search||e[111]!==ze||e[112]!==f||e[113]!==r?(O=a.data.length===0?s.jsx(qe,{children:s.jsxs(d,{colSpan:8,className:"text-center py-8 text-muted-foreground",children:[s.jsx(ls,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),s.jsx("p",{className:"text-lg",children:"Aucune classe trouvée"}),s.jsx("p",{className:"text-sm mt-2",children:l.search?"Essayez avec d'autres termes de recherche":"Commencez par créer une nouvelle classe"})]})}):a.data.map(t=>s.jsxs(qe,{className:"hover:bg-muted/50",children:[s.jsx(d,{children:s.jsx(Ye,{checked:r.includes(t.id),onCheckedChange:W=>ze(t.id,W===!0)})}),s.jsx(d,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:t.nom_classe}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Réf: ",t.ref]}),t.description&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1 truncate max-w-xs",children:t.description})]})}),s.jsx(d,{children:s.jsxs("div",{className:"flex flex-col gap-1",children:[cs(t.niveau),t.section&&s.jsx(Me,{variant:"outline",className:"text-xs",children:f[t.section]||t.section})]})}),s.jsx(d,{children:t.professeur_principal?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-bold",children:t.professeur_principal.name.charAt(0).toUpperCase()})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:t.professeur_principal.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:t.professeur_principal.email})]})]}):s.jsx("span",{className:"text-sm text-muted-foreground",children:"Non assigné"})}),s.jsx(d,{children:s.jsxs("div",{children:[s.jsxs("p",{className:"font-medium",children:[t.nombre_eleves," / ",t.capacite_max]}),t.is_full&&s.jsx(Me,{variant:"destructive",className:"mt-1 text-xs",children:"Complet"})]})}),s.jsx(d,{className:"w-48",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(js,{value:t.pourcentage_occupation,className:"h-2"}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsxs("span",{className:"text-muted-foreground",children:[t.pourcentage_occupation,"%"]}),s.jsx("span",{className:t.pourcentage_occupation>90?"text-destructive":t.pourcentage_occupation>70?"text-amber-600":"text-green-600",children:t.pourcentage_occupation>90?"Surpeuplé":t.pourcentage_occupation>70?"Rempli":"Normal"})]})]})}),s.jsx(d,{children:is(t)}),s.jsx(d,{className:"text-right",children:s.jsxs(Ke,{children:[s.jsx(Qe,{asChild:!0,children:s.jsx(Re,{variant:"ghost",size:"icon",children:s.jsx(bs,{className:"h-4 w-4"})})}),s.jsxs(We,{align:"end",children:[s.jsx(Ee,{href:`/classes/${t.id}`,children:s.jsxs(h,{children:[s.jsx(Ss,{className:"h-4 w-4 mr-2"}),"Voir"]})}),s.jsx(Ee,{href:`/classes/${t.id}/edit`,children:s.jsxs(h,{children:[s.jsx(_s,{className:"h-4 w-4 mr-2"}),"Modifier"]})}),s.jsx(Ee,{href:`/classes/${t.id}/rapport`,children:s.jsxs(h,{children:[s.jsx(ws,{className:"h-4 w-4 mr-2"}),"Rapport"]})}),s.jsx(Xe,{}),s.jsxs(h,{onClick:()=>rs(t),className:"text-destructive",children:[s.jsx(ts,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]})})]},t.id)),e[109]=a.data,e[110]=l.search,e[111]=ze,e[112]=f,e[113]=r,e[114]=O):O=e[114];let U;e[115]!==O?(U=s.jsx(us,{children:O}),e[115]=O,e[116]=U):U=e[116];let q;e[117]!==L||e[118]!==U?(q=s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(fs,{children:[L,U]})}),e[117]=L,e[118]=U,e[119]=q):q=e[119];let J;e[120]!==a.current_page||e[121]!==a.last_page||e[122]!==l?(J=a.last_page>1&&s.jsx("div",{className:"border-t p-4",children:s.jsx(vs,{currentPage:a.current_page,totalPages:a.last_page,onPageChange:t=>{X.get("/classes",{...l,page:t},{preserveState:!0,replace:!0})}})}),e[120]=a.current_page,e[121]=a.last_page,e[122]=l,e[123]=J):J=e[123];let K;e[124]!==q||e[125]!==J?(K=s.jsxs("div",{className:"bg-card rounded-lg border overflow-hidden",children:[q,J]}),e[124]=q,e[125]=J,e[126]=K):K=e[126];let Be;return e[127]!==g||e[128]!==N||e[129]!==b||e[130]!==D||e[131]!==z||e[132]!==K?(Be=s.jsxs(s.Fragment,{children:[re,s.jsxs(gs,{activeRoute:"/classes",children:[g,N,b,D,z,K]})]}),e[127]=g,e[128]=N,e[129]=b,e[130]=D,e[131]=z,e[132]=K,e[133]=Be):Be=e[133],Be}function Ds(i){const[e,a]=i;return s.jsx(o,{value:e,children:a},e)}function As(){return window.open("/classes/export","_blank")}function Bs(i){return s.jsx(Me,{variant:i==="primaire"?"default":"secondary",children:i==="primaire"?"Primaire":"Secondaire"})}function Es(i){const e={active:"default",inactive:"warning",archived:"secondary"};return s.jsx(Me,{variant:e[i.statut]||"outline",children:i.statut_label})}function Rs(i){confirm(`Êtes-vous sûr de vouloir supprimer la classe "${i.nom_complet}" ?`)&&X.delete(`/classes/${i.id}`)}function $s(i){return i.id}export{pt as default};
