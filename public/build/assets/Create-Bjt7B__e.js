import{c as pt,u as jt,r as tt,j as t,H as _t,L as nt}from"./app-DDMw_g-7.js";import{B as re}from"./createLucideIcon-C7XcNYgG.js";import{I as ct}from"./input-BVVymUkR.js";import{L as ae}from"./label-DxjE-o6U.js";import{a as vt,b as bt,c as Nt,S as yt,d as gt}from"./select-PhFBO-_g.js";import{C as St,a as Ct,d as wt,c as Be,b as Je}from"./card-BRng2ntR.js";import{A as st,a as rt}from"./alert-DXCHaI2q.js";import{f as Oe,a as lt,P as Dt,b as Tt,C as Et,c as Ht}from"./popover-DvhJd4lx.js";import{T as Mt,a as ot,b as dt,c as kt}from"./tabs-BLjgY89f.js";import{D as At}from"./DashboardLayout-BZjw1K0F.js";import{P as Pt}from"./PageHeader-mA1M3Sat.js";import{C as at}from"./circle-alert-Dq7F6DDg.js";import{A as $t}from"./arrow-left-DXTD6Zy0.js";import{C as Lt}from"./calendar-days-Dhz15RID.js";import{C as zt}from"./users-BoICQ7jK.js";import{C as le}from"./clock-DguJQkIo.js";import{C as Ft}from"./circle-x-E9Nndj7n.js";import{C as It}from"./circle-check-big-C5IfDX8e.js";/* empty css            */import"./index-F0Ag1TXX.js";import"./index-hWUGqNQR.js";import"./check-C3POMRK3.js";import"./user-B5MWMe6b.js";import"./house-CPwq1_I9.js";function hs(c){const e=pt.c(172),{professeurs:Ue,today:o}=c;let ie;e[0]!==o?(ie={professeur_id:"",date:o,heure_arrivee:"",heure_depart:""},e[0]=o,e[1]=ie):ie=e[1];const{data:r,setData:l,post:We,processing:ne,errors:s}=jt(ie);let ce;e[2]!==o?(ce=new Date(o),e[2]=o,e[3]=ce):ce=e[3];const[i,mt]=tt.useState(ce),[n,ft]=tt.useState("");let oe,de;e[4]===Symbol.for("react.memo_cache_sentinel")?(oe=()=>{const a=()=>{ft(Oe(new Date,"HH:mm"))};a();const it=setInterval(a,6e4);return()=>clearInterval(it)},de=[],e[4]=oe,e[5]=de):(oe=e[4],de=e[5]),tt.useEffect(oe,de);let me;e[6]!==We?(me=a=>{a.preventDefault(),We("/presences")},e[6]=We,e[7]=me):me=e[7];const Xe=me;let fe;e[8]!==n||e[9]!==l?(fe=a=>{l(a,n)},e[8]=n,e[9]=l,e[10]=fe):fe=e[10];const d=fe;let ue;e[11]!==l?(ue=a=>{a&&(mt(a),l("date",Oe(a,"yyyy-MM-dd")))},e[11]=l,e[12]=ue):ue=e[12];const Ge=ue,ut=Vt;let he;e[13]!==i?(he=i?ut(i):{label:"",color:""},e[13]=i,e[14]=he):he=e[14];const xe=he;let pe;e[15]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(_t,{title:"Enregistrer une présence"}),e[15]=pe):pe=e[15];let je;e[16]===Symbol.for("react.memo_cache_sentinel")?(je=[{label:"Dashboard",href:"/dashboard"},{label:"Présences",href:"/presences"},{label:"Créer",href:"/presences/create"}],e[16]=je):je=e[16];let _e;e[17]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx(Pt,{title:"Nouvelle présence",breadcrumb:je,actions:t.jsx(nt,{href:"/presences",children:t.jsxs(re,{variant:"outline",children:[t.jsx($t,{className:"h-4 w-4 mr-2"}),"Retour"]})})}),e[17]=_e):_e=e[17];let ve;e[18]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsxs(St,{children:[t.jsxs(Ct,{className:"flex items-center gap-2",children:[t.jsx(Lt,{className:"h-5 w-5"}),"Enregistrer une présence"]}),t.jsx(wt,{children:"Enregistrez la présence d'un professeur pour une journée spécifique"})]}),e[18]=ve):ve=e[18];let m;e[19]!==s.date||e[20]!==s.professeur_id?(m=(s.professeur_id||s.date)&&t.jsxs(st,{variant:"destructive",children:[t.jsx(at,{className:"h-4 w-4"}),t.jsx(rt,{children:s.professeur_id||s.date})]}),e[19]=s.date,e[20]=s.professeur_id,e[21]=m):m=e[21];let f;e[22]!==s.heure_depart?(f=s.heure_depart&&t.jsxs(st,{variant:"destructive",children:[t.jsx(at,{className:"h-4 w-4"}),t.jsx(rt,{children:s.heure_depart})]}),e[22]=s.heure_depart,e[23]=f):f=e[23];let be;e[24]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsxs(Mt,{className:"grid w-full grid-cols-2",children:[t.jsx(ot,{value:"infos",children:"Informations"}),t.jsx(ot,{value:"heures",children:"Horaires"})]}),e[24]=be):be=e[24];let Ne;e[25]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx(ae,{children:"Date *"}),e[25]=Ne):Ne=e[25];let ye;e[26]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(zt,{className:"mr-2 h-4 w-4"}),e[26]=ye):ye=e[26];let u;e[27]!==i?(u=i?Oe(i,"dd MMMM yyyy",{locale:lt}):t.jsx("span",{children:"Sélectionner une date"}),e[27]=i,e[28]=u):u=e[28];let h;e[29]!==u?(h=t.jsx(Dt,{asChild:!0,children:t.jsxs(re,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[ye,u]})}),e[29]=u,e[30]=h):h=e[30];let x;e[31]!==Ge||e[32]!==i?(x=t.jsx(Tt,{className:"w-auto p-0",children:t.jsx(Et,{mode:"single",selected:i,onSelect:Ge,locale:lt,className:"rounded-md border",disabled:Rt})}),e[31]=Ge,e[32]=i,e[33]=x):x=e[33];let p;e[34]!==h||e[35]!==x?(p=t.jsxs(Ht,{children:[h,x]}),e[34]=h,e[35]=x,e[36]=p):p=e[36];let j;e[37]!==r.date?(j=t.jsx("input",{type:"hidden",name:"date",value:r.date}),e[37]=r.date,e[38]=j):j=e[38];let _;e[39]!==xe||e[40]!==i?(_=i&&t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:`text-sm font-medium ${xe.color}`,children:xe.label}),t.jsx("div",{className:"text-xs text-muted-foreground",children:Oe(i,"EEEE",{locale:lt})})]}),e[39]=xe,e[40]=i,e[41]=_):_=e[41];let v;e[42]!==p||e[43]!==j||e[44]!==_?(v=t.jsxs("div",{className:"flex-1",children:[p,j,_]}),e[42]=p,e[43]=j,e[44]=_,e[45]=v):v=e[45];let ge;e[46]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(le,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Heure actuelle"})]}),e[46]=ge):ge=e[46];let b;e[47]!==n?(b=t.jsx("div",{className:"text-2xl font-bold",children:n}),e[47]=n,e[48]=b):b=e[48];let Se;e[49]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Mise à jour automatique"}),e[49]=Se):Se=e[49];let N;e[50]!==b?(N=t.jsxs("div",{className:"bg-muted/50 rounded-lg p-4",children:[ge,b,Se]}),e[50]=b,e[51]=N):N=e[51];let y;e[52]!==v||e[53]!==N?(y=t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[v,N]}),e[52]=v,e[53]=N,e[54]=y):y=e[54];let g;e[55]!==s.date?(g=s.date&&t.jsx("p",{className:"text-sm text-destructive",children:s.date}),e[55]=s.date,e[56]=g):g=e[56];let S;e[57]!==y||e[58]!==g?(S=t.jsxs("div",{className:"space-y-4",children:[Ne,y,g]}),e[57]=y,e[58]=g,e[59]=S):S=e[59];let Ce;e[60]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx(ae,{htmlFor:"professeur_id",children:"Professeur *"}),e[60]=Ce):Ce=e[60];const ht=r.professeur_id;let C;e[61]!==l?(C=a=>l("professeur_id",a),e[61]=l,e[62]=C):C=e[62];let we;e[63]===Symbol.for("react.memo_cache_sentinel")?(we=t.jsx(vt,{children:t.jsx(bt,{placeholder:"Sélectionner un professeur"})}),e[63]=we):we=e[63];let w;e[64]!==Ue?(w=Ue.map(qt),e[64]=Ue,e[65]=w):w=e[65];let D;e[66]!==w?(D=t.jsx(Nt,{children:w}),e[66]=w,e[67]=D):D=e[67];let T;e[68]!==r.professeur_id||e[69]!==C||e[70]!==D?(T=t.jsxs(yt,{value:ht,onValueChange:C,children:[we,D]}),e[68]=r.professeur_id,e[69]=C,e[70]=D,e[71]=T):T=e[71];let De;e[72]===Symbol.for("react.memo_cache_sentinel")?(De=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Sélectionnez le professeur concerné"}),e[72]=De):De=e[72];let E;e[73]!==s.professeur_id?(E=s.professeur_id&&t.jsx("p",{className:"text-sm text-destructive",children:s.professeur_id}),e[73]=s.professeur_id,e[74]=E):E=e[74];let H;e[75]!==T||e[76]!==E?(H=t.jsxs("div",{className:"space-y-4",children:[Ce,T,De,E]}),e[75]=T,e[76]=E,e[77]=H):H=e[77];let Te;e[78]===Symbol.for("react.memo_cache_sentinel")?(Te=t.jsxs(st,{children:[t.jsx(at,{className:"h-4 w-4"}),t.jsx(rt,{children:"Une présence ne peut être enregistrée qu'une seule fois par professeur et par jour. Vérifiez qu'aucune présence n'existe déjà pour cette date."})]}),e[78]=Te):Te=e[78];let M;e[79]!==S||e[80]!==H?(M=t.jsxs(dt,{value:"infos",className:"space-y-6 pt-6",children:[S,H,Te]}),e[79]=S,e[80]=H,e[81]=M):M=e[81];let Ee;e[82]===Symbol.for("react.memo_cache_sentinel")?(Ee=t.jsx(ae,{htmlFor:"heure_arrivee",children:"Heure d'arrivée"}),e[82]=Ee):Ee=e[82];let k;e[83]!==d?(k=()=>d("heure_arrivee"),e[83]=d,e[84]=k):k=e[84];let He;e[85]===Symbol.for("react.memo_cache_sentinel")?(He=t.jsx(le,{className:"h-3 w-3 mr-1"}),e[85]=He):He=e[85];let A;e[86]!==n||e[87]!==k?(A=t.jsxs("div",{className:"flex items-center justify-between",children:[Ee,t.jsxs(re,{type:"button",size:"sm",variant:"outline",onClick:k,children:[He,"Maintenant (",n,")"]})]}),e[86]=n,e[87]=k,e[88]=A):A=e[88];let P;e[89]!==l?(P=a=>l("heure_arrivee",a.target.value),e[89]=l,e[90]=P):P=e[90];let $;e[91]!==r.heure_arrivee||e[92]!==P?($=t.jsx(ct,{id:"heure_arrivee",type:"time",value:r.heure_arrivee,onChange:P,className:"pl-10"}),e[91]=r.heure_arrivee,e[92]=P,e[93]=$):$=e[93];let Me;e[94]===Symbol.for("react.memo_cache_sentinel")?(Me=t.jsx(le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e[94]=Me):Me=e[94];let L;e[95]!==$?(L=t.jsxs("div",{className:"relative",children:[$,Me]}),e[95]=$,e[96]=L):L=e[96];let ke;e[97]===Symbol.for("react.memo_cache_sentinel")?(ke=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Laissez vide si le professeur est absent"}),e[97]=ke):ke=e[97];let z;e[98]!==s.heure_arrivee?(z=s.heure_arrivee&&t.jsx("p",{className:"text-sm text-destructive",children:s.heure_arrivee}),e[98]=s.heure_arrivee,e[99]=z):z=e[99];let F;e[100]!==A||e[101]!==L||e[102]!==z?(F=t.jsxs("div",{className:"space-y-4",children:[A,L,ke,z]}),e[100]=A,e[101]=L,e[102]=z,e[103]=F):F=e[103];let Ae;e[104]===Symbol.for("react.memo_cache_sentinel")?(Ae=t.jsx(ae,{htmlFor:"heure_depart",children:"Heure de départ"}),e[104]=Ae):Ae=e[104];let I;e[105]!==d?(I=()=>d("heure_depart"),e[105]=d,e[106]=I):I=e[106];let Pe;e[107]===Symbol.for("react.memo_cache_sentinel")?(Pe=t.jsx(le,{className:"h-3 w-3 mr-1"}),e[107]=Pe):Pe=e[107];let q;e[108]!==n||e[109]!==I?(q=t.jsxs("div",{className:"flex items-center justify-between",children:[Ae,t.jsxs(re,{type:"button",size:"sm",variant:"outline",onClick:I,children:[Pe,"Maintenant (",n,")"]})]}),e[108]=n,e[109]=I,e[110]=q):q=e[110];let R;e[111]!==l?(R=a=>l("heure_depart",a.target.value),e[111]=l,e[112]=R):R=e[112];const Ke=!r.heure_arrivee;let V;e[113]!==r.heure_depart||e[114]!==R||e[115]!==Ke?(V=t.jsx(ct,{id:"heure_depart",type:"time",value:r.heure_depart,onChange:R,className:"pl-10",disabled:Ke}),e[113]=r.heure_depart,e[114]=R,e[115]=Ke,e[116]=V):V=e[116];let $e;e[117]===Symbol.for("react.memo_cache_sentinel")?($e=t.jsx(le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e[117]=$e):$e=e[117];let B;e[118]!==V?(B=t.jsxs("div",{className:"relative",children:[V,$e]}),e[118]=V,e[119]=B):B=e[119];let J;e[120]!==r.heure_arrivee||e[121]!==r.heure_depart?(J=r.heure_arrivee&&r.heure_depart&&t.jsx("div",{className:"bg-muted/50 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:"text-sm text-muted-foreground",children:"Temps de présence:"}),t.jsx("span",{className:"font-medium",children:(()=>{const a=new Date(`2000-01-01T${r.heure_arrivee}`);return`${((new Date(`2000-01-01T${r.heure_depart}`).getTime()-a.getTime())/36e5).toFixed(2)} heures`})()})]})}),e[120]=r.heure_arrivee,e[121]=r.heure_depart,e[122]=J):J=e[122];let Le;e[123]===Symbol.for("react.memo_cache_sentinel")?(Le=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Optionnel - Définit la fin de la journée de travail"}),e[123]=Le):Le=e[123];let O;e[124]!==s.heure_depart?(O=s.heure_depart&&t.jsx("p",{className:"text-sm text-destructive",children:s.heure_depart}),e[124]=s.heure_depart,e[125]=O):O=e[125];let U;e[126]!==q||e[127]!==B||e[128]!==J||e[129]!==O?(U=t.jsxs("div",{className:"space-y-4",children:[q,B,J,Le,O]}),e[126]=q,e[127]=B,e[128]=J,e[129]=O,e[130]=U):U=e[130];let ze;e[131]===Symbol.for("react.memo_cache_sentinel")?(ze=t.jsx(ae,{children:"Statut de la journée"}),e[131]=ze):ze=e[131];const Qe=`cursor-pointer transition-all ${!r.heure_arrivee&&!r.heure_depart?"border-primary ring-2 ring-primary/20":"hover:border-border"}`;let W;e[132]!==l?(W=()=>{l("heure_arrivee",""),l("heure_depart","")},e[132]=l,e[133]=W):W=e[133];let Fe;e[134]===Symbol.for("react.memo_cache_sentinel")?(Fe=t.jsxs(Be,{className:"p-4 flex flex-col items-center",children:[t.jsx(Ft,{className:"h-8 w-8 text-red-500 mb-2"}),t.jsx("div",{className:"font-medium",children:"Absent"}),t.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"Non présent ce jour"})]}),e[134]=Fe):Fe=e[134];let X;e[135]!==Qe||e[136]!==W?(X=t.jsx(Je,{className:Qe,onClick:W,children:Fe}),e[135]=Qe,e[136]=W,e[137]=X):X=e[137];const Ye=`cursor-pointer transition-all ${r.heure_arrivee&&!r.heure_depart?"border-primary ring-2 ring-primary/20":"hover:border-border"}`;let G;e[138]!==n||e[139]!==l?(G=()=>{l("heure_arrivee",n),l("heure_depart","")},e[138]=n,e[139]=l,e[140]=G):G=e[140];let Ie;e[141]===Symbol.for("react.memo_cache_sentinel")?(Ie=t.jsxs(Be,{className:"p-4 flex flex-col items-center",children:[t.jsx(le,{className:"h-8 w-8 text-amber-500 mb-2"}),t.jsx("div",{className:"font-medium",children:"Présent"}),t.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"Arrivé, en cours"})]}),e[141]=Ie):Ie=e[141];let K;e[142]!==Ye||e[143]!==G?(K=t.jsx(Je,{className:Ye,onClick:G,children:Ie}),e[142]=Ye,e[143]=G,e[144]=K):K=e[144];const Ze=`cursor-pointer transition-all ${r.heure_arrivee&&r.heure_depart?"border-primary ring-2 ring-primary/20":"hover:border-border"}`;let Q;e[145]!==l?(Q=()=>{l("heure_arrivee","08:00"),l("heure_depart","17:00")},e[145]=l,e[146]=Q):Q=e[146];let qe;e[147]===Symbol.for("react.memo_cache_sentinel")?(qe=t.jsxs(Be,{className:"p-4 flex flex-col items-center",children:[t.jsx(It,{className:"h-8 w-8 text-green-500 mb-2"}),t.jsx("div",{className:"font-medium",children:"Complète"}),t.jsx("div",{className:"text-xs text-muted-foreground text-center",children:"Journée terminée"})]}),e[147]=qe):qe=e[147];let Y;e[148]!==Ze||e[149]!==Q?(Y=t.jsx(Je,{className:Ze,onClick:Q,children:qe}),e[148]=Ze,e[149]=Q,e[150]=Y):Y=e[150];let Z;e[151]!==X||e[152]!==K||e[153]!==Y?(Z=t.jsxs("div",{className:"space-y-2",children:[ze,t.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[X,K,Y]})]}),e[151]=X,e[152]=K,e[153]=Y,e[154]=Z):Z=e[154];let ee;e[155]!==F||e[156]!==U||e[157]!==Z?(ee=t.jsxs(dt,{value:"heures",className:"space-y-6 pt-6",children:[F,U,Z]}),e[155]=F,e[156]=U,e[157]=Z,e[158]=ee):ee=e[158];let te;e[159]!==M||e[160]!==ee?(te=t.jsxs(kt,{defaultValue:"infos",className:"w-full",children:[be,M,ee]}),e[159]=M,e[160]=ee,e[161]=te):te=e[161];let Re;e[162]===Symbol.for("react.memo_cache_sentinel")?(Re=t.jsx(nt,{href:"/presences",children:t.jsx(re,{type:"button",variant:"outline",children:"Annuler"})}),e[162]=Re):Re=e[162];const et=ne?"Enregistrement en cours...":"Enregistrer la présence";let se;e[163]!==ne||e[164]!==et?(se=t.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t",children:[Re,t.jsx(re,{type:"submit",disabled:ne,children:et})]}),e[163]=ne,e[164]=et,e[165]=se):se=e[165];let Ve;return e[166]!==Xe||e[167]!==m||e[168]!==f||e[169]!==te||e[170]!==se?(Ve=t.jsxs(t.Fragment,{children:[pe,t.jsxs(At,{activeRoute:"/presences",children:[_e,t.jsxs(Je,{className:"max-w-3xl mx-auto",children:[ve,t.jsx(Be,{children:t.jsxs("form",{onSubmit:Xe,className:"space-y-6",children:[m,f,te,se]})})]})]})]}),e[166]=Xe,e[167]=m,e[168]=f,e[169]=te,e[170]=se,e[171]=Ve):Ve=e[171],Ve}function qt(c){return t.jsx(gt,{value:c.id.toString(),children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"h-6 w-6 rounded-full bg-primary/10 flex items-center justify-center",children:t.jsx("span",{className:"text-xs font-bold",children:c.nom.charAt(0).toUpperCase()})}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:c.nom}),t.jsx("div",{className:"text-xs text-muted-foreground",children:c.email})]})]})},c.id)}function Rt(c){return c>new Date||c<new Date("2020-01-01")}function Vt(c){const e=c.getDay();return e===0||e===6?{label:"Week-end",color:"text-muted-foreground"}:{label:"Jour ouvré",color:"text-green-600"}}export{hs as default};
