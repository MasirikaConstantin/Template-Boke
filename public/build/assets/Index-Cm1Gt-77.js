import{c as Ke,r as Oe,j as s,L as O,b as ze,H as Qe}from"./app-uqHmN79t.js";import{B as Q}from"./createLucideIcon-DdtqxNsI.js";import{I as Ye}from"./input-DvfwZFkz.js";import{T as He,a as d,c as Ze,b as x,e as es,d as ss}from"./table-DbeKzWTW.js";import{a as Se,b as we,d as c,c as Ce,S as Te}from"./select-BDqdA6RC.js";import{B as Pe}from"./badge-D2zh6Zwh.js";import{A as Me,a as Ue}from"./alert-Bcv8EiY-.js";import{P as Ee}from"./progress-MRebI9yS.js";import{P as ts}from"./pagination-BCebjFlz.js";import{g as ls,S as as,D as rs}from"./DashboardLayout-BR-aq2td.js";import{P as is}from"./PageHeader-Du2510Il.js";import{b as h,C as ns,a as cs,d as os,c as Y}from"./card-D_YRJqod.js";import{C as Le}from"./users-CWldF8sk.js";import{P as ke}from"./plus-YGe1gUz1.js";import{W as qe}from"./wallet-C63R2Jcr.js";import{T as Ve}from"./trending-up-BYRikWhP.js";import{T as ms}from"./trending-down-BfTnw-Kh.js";import{F as ds}from"./funnel-DuKc15-5.js";import{C as xs}from"./circle-check-big-BwaOIu1r.js";import{C as hs}from"./circle-x-CSUn5uPY.js";/* empty css            */import"./index-CapVt91Y.js";import"./index-BII6AP8K.js";import"./check-oMVJ0WoU.js";import"./user-CQKIz47G.js";import"./house-CPHwcq2r.js";function qs(a){const e=Ke.c(122),{budgets:r,filters:i,stats:l,annees:De,mois:$e,flash:m}=a,[Be,We]=Oe.useState("");let Z;e[0]!==i?(Z=(t,Je)=>{ze.get("/budgets",{...i,[t]:Je},{preserveState:!0,replace:!0})},e[0]=i,e[1]=Z):Z=e[1];const n=Z,o=ps,Ge=js;let ee;e[2]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx(Qe,{title:"Gestion des budgets"}),e[2]=ee):ee=e[2];const Xe=r.total;let se;e[3]!==l.total_alloue?(se=o(l.total_alloue),e[3]=l.total_alloue,e[4]=se):se=e[4];const Ae=`${Xe} budgets - Total alloué: ${se}`;let te;e[5]===Symbol.for("react.memo_cache_sentinel")?(te=[{label:"Dashboard",href:"/dashboard"},{label:"Budgets",href:"/budgets"}],e[5]=te):te=e[5];let le;e[6]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(O,{href:"/budgets/create",children:s.jsxs(Q,{children:[s.jsx(ke,{className:"h-4 w-4 mr-2"}),"Nouveau budget"]})})}),e[6]=le):le=e[6];let u;e[7]!==Ae?(u=s.jsx(is,{title:"Budgets mensuels",description:Ae,breadcrumb:te,actions:le}),e[7]=Ae,e[8]=u):u=e[8];let f;e[9]!==m?(f=m?.success&&s.jsx(Me,{className:"mb-6",children:s.jsx(Ue,{children:m.success})}),e[9]=m,e[10]=f):f=e[10];let j;e[11]!==m?(j=m?.error&&s.jsx(Me,{variant:"destructive",className:"mb-6",children:s.jsx(Ue,{children:m.error})}),e[11]=m,e[12]=j):j=e[12];let p;e[13]!==l.budget_courant?(p=l.budget_courant&&s.jsxs(h,{className:"mb-6 border-primary/20 bg-primary/5",children:[s.jsxs(ns,{children:[s.jsxs(cs,{className:"flex items-center gap-2",children:[s.jsx(Le,{className:"h-5 w-5 text-primary"}),"Budget du mois en cours"]}),s.jsx(os,{children:l.budget_courant.nom_complet})]}),s.jsx(Y,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Montant alloué"}),s.jsx("p",{className:"text-2xl font-bold",children:o(l.budget_courant.montant_alloue)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Dépensé"}),s.jsx("p",{className:"text-2xl font-bold",children:o(l.budget_courant.montant_depense)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Restant"}),s.jsx("p",{className:`text-2xl font-bold ${l.budget_courant.montant_restant<0?"text-destructive":l.budget_courant.montant_restant<l.budget_courant.montant_alloue*.2?"text-amber-600":"text-green-600"}`,children:o(l.budget_courant.montant_restant)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Progression"}),s.jsxs("span",{className:"font-medium",children:[l.budget_courant.pourcentage_utilise.toFixed(1),"%"]})]}),s.jsx(Ee,{value:l.budget_courant.pourcentage_utilise,className:`h-2 ${l.budget_courant.pourcentage_utilise>100?"bg-destructive":l.budget_courant.pourcentage_utilise>80?"bg-amber-500":"bg-green-500"}`})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(O,{href:`/depenses?budget_id=${l.budget_courant.id}`,children:s.jsx(Q,{variant:"outline",size:"sm",children:"Voir les dépenses"})}),s.jsx(O,{href:"/depenses/create",children:s.jsxs(Q,{variant:"outline",size:"sm",children:[s.jsx(ke,{className:"h-3 w-3 mr-1"}),"Nouvelle dépense"]})}),s.jsx(O,{href:`/budgets/${l.budget_courant.id}`,children:s.jsx(Q,{size:"sm",children:"Détails"})})]})]})})]}),e[13]=l.budget_courant,e[14]=p):p=e[14];let ae;e[15]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total budgets"}),e[15]=ae):ae=e[15];let g;e[16]!==l.total?(g=s.jsxs("div",{children:[ae,s.jsx("p",{className:"text-2xl font-bold",children:l.total})]}),e[16]=l.total,e[17]=g):g=e[17];let re;e[18]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsx(qe,{className:"h-8 w-8 text-primary"}),e[18]=re):re=e[18];let _;e[19]!==g?(_=s.jsx(h,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[g,re]})})}),e[19]=g,e[20]=_):_=e[20];let ie;e[21]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total alloué"}),e[21]=ie):ie=e[21];let N;e[22]!==l.total_alloue?(N=o(l.total_alloue),e[22]=l.total_alloue,e[23]=N):N=e[23];let b;e[24]!==N?(b=s.jsxs("div",{children:[ie,s.jsx("p",{className:"text-2xl font-bold",children:N})]}),e[24]=N,e[25]=b):b=e[25];let ne;e[26]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(Ve,{className:"h-8 w-8 text-green-500"}),e[26]=ne):ne=e[26];let v;e[27]!==b?(v=s.jsx(h,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[b,ne]})})}),e[27]=b,e[28]=v):v=e[28];let ce;e[29]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total dépensé"}),e[29]=ce):ce=e[29];let y;e[30]!==l.total_depense?(y=o(l.total_depense),e[30]=l.total_depense,e[31]=y):y=e[31];let S;e[32]!==y?(S=s.jsxs("div",{children:[ce,s.jsx("p",{className:"text-2xl font-bold",children:y})]}),e[32]=y,e[33]=S):S=e[33];let oe;e[34]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx(ms,{className:"h-8 w-8 text-blue-500"}),e[34]=oe):oe=e[34];let w;e[35]!==S?(w=s.jsx(h,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[S,oe]})})}),e[35]=S,e[36]=w):w=e[36];let me;e[37]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total restant"}),e[37]=me):me=e[37];let C;e[38]!==l.total_restant?(C=o(l.total_restant),e[38]=l.total_restant,e[39]=C):C=e[39];let T;e[40]!==C?(T=s.jsxs("div",{children:[me,s.jsx("p",{className:"text-2xl font-bold",children:C})]}),e[40]=C,e[41]=T):T=e[41];let de;e[42]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(ls,{className:"h-8 w-8 text-purple-500"}),e[42]=de):de=e[42];let P;e[43]!==T?(P=s.jsx(h,{children:s.jsx(Y,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[T,de]})})}),e[43]=T,e[44]=P):P=e[44];let D;e[45]!==_||e[46]!==v||e[47]!==w||e[48]!==P?(D=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[_,v,w,P]}),e[45]=_,e[46]=v,e[47]=w,e[48]=P,e[49]=D):D=e[49];let xe;e[50]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(as,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e[50]=xe):xe=e[50];let he;e[51]===Symbol.for("react.memo_cache_sentinel")?(he=t=>We(t.target.value),e[51]=he):he=e[51];let $;e[52]!==Be?($=s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[xe,s.jsx(Ye,{placeholder:"Rechercher...",value:Be,onChange:he,className:"pl-10"})]})}),e[52]=Be,e[53]=$):$=e[53];const Fe=i.annee||"";let B;e[54]!==n?(B=t=>n("annee",t),e[54]=n,e[55]=B):B=e[55];let ue;e[56]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsxs(Se,{className:"w-[120px]",children:[s.jsx(Le,{className:"h-4 w-4 mr-2"}),s.jsx(we,{placeholder:"Année"})]}),e[56]=ue):ue=e[56];let fe;e[57]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx(c,{value:"all",children:"Toutes années"}),e[57]=fe):fe=e[57];let A;e[58]!==De?(A=De.map(fs),e[58]=De,e[59]=A):A=e[59];let F;e[60]!==A?(F=s.jsxs(Ce,{children:[fe,A]}),e[60]=A,e[61]=F):F=e[61];let R;e[62]!==Fe||e[63]!==B||e[64]!==F?(R=s.jsxs(Te,{value:Fe,onValueChange:B,children:[ue,F]}),e[62]=Fe,e[63]=B,e[64]=F,e[65]=R):R=e[65];const Re=i.mois||"";let I;e[66]!==n?(I=t=>n("mois",t),e[66]=n,e[67]=I):I=e[67];let je;e[68]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx(Se,{className:"w-[140px]",children:s.jsx(we,{placeholder:"Mois"})}),e[68]=je):je=e[68];let pe;e[69]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(c,{value:"all",children:"Tous mois"}),e[69]=pe):pe=e[69];let H;e[70]!==$e?(H=$e.map(us),e[70]=$e,e[71]=H):H=e[71];let V;e[72]!==H?(V=s.jsxs(Ce,{children:[pe,H]}),e[72]=H,e[73]=V):V=e[73];let z;e[74]!==Re||e[75]!==I||e[76]!==V?(z=s.jsxs(Te,{value:Re,onValueChange:I,children:[je,V]}),e[74]=Re,e[75]=I,e[76]=V,e[77]=z):z=e[77];const Ie=i.est_actif||"";let M;e[78]!==n?(M=t=>n("est_actif",t),e[78]=n,e[79]=M):M=e[79];let ge;e[80]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsxs(Se,{className:"w-[120px]",children:[s.jsx(ds,{className:"h-4 w-4 mr-2"}),s.jsx(we,{placeholder:"Statut"})]}),e[80]=ge):ge=e[80];let _e;e[81]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsxs(Ce,{children:[s.jsx(c,{value:"all",children:"Tous statuts"}),s.jsx(c,{value:"true",children:"Actif"}),s.jsx(c,{value:"false",children:"Inactif"})]}),e[81]=_e):_e=e[81];let U;e[82]!==Ie||e[83]!==M?(U=s.jsxs(Te,{value:Ie,onValueChange:M,children:[ge,_e]}),e[82]=Ie,e[83]=M,e[84]=U):U=e[84];let E;e[85]!==i.per_page?(E=i.per_page?.toString()||"15",e[85]=i.per_page,e[86]=E):E=e[86];let L;e[87]!==n?(L=t=>n("per_page",t),e[87]=n,e[88]=L):L=e[88];let Ne;e[89]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsx(Se,{className:"w-[100px]",children:s.jsx(we,{placeholder:"Par page"})}),e[89]=Ne):Ne=e[89];let be;e[90]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsxs(Ce,{children:[s.jsx(c,{value:"10",children:"10"}),s.jsx(c,{value:"15",children:"15"}),s.jsx(c,{value:"25",children:"25"}),s.jsx(c,{value:"50",children:"50"})]}),e[90]=be):be=e[90];let k;e[91]!==E||e[92]!==L?(k=s.jsxs(Te,{value:E,onValueChange:L,children:[Ne,be]}),e[91]=E,e[92]=L,e[93]=k):k=e[93];let q;e[94]!==R||e[95]!==z||e[96]!==U||e[97]!==k?(q=s.jsxs("div",{className:"flex gap-2 flex-wrap",children:[R,z,U,k]}),e[94]=R,e[95]=z,e[96]=U,e[97]=k,e[98]=q):q=e[98];let W;e[99]!==$||e[100]!==q?(W=s.jsx(h,{className:"mb-6",children:s.jsx(Y,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[$,q]})})}),e[99]=$,e[100]=q,e[101]=W):W=e[101];let ve;e[102]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(Ze,{children:s.jsxs(He,{children:[s.jsx(x,{children:"Période"}),s.jsx(x,{children:"Statut"}),s.jsx(x,{className:"text-right",children:"Montant alloué"}),s.jsx(x,{className:"text-right",children:"Dépensé"}),s.jsx(x,{className:"text-right",children:"Restant"}),s.jsx(x,{children:"Utilisation"}),s.jsx(x,{className:"text-right",children:"Actions"})]})}),e[102]=ve):ve=e[102];let G;e[103]!==r.data?(G=r.data.length===0?s.jsx(He,{children:s.jsxs(d,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:[s.jsx(qe,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),s.jsx("p",{className:"text-lg",children:"Aucun budget trouvé"})]})}):r.data.map(t=>s.jsxs(He,{className:"hover:bg-muted/50",children:[s.jsx(d,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:t.nom_complet}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Réf: ",t.ref]}),t.description&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1 truncate max-w-xs",children:t.description})]})}),s.jsx(d,{children:Ge(t)}),s.jsx(d,{className:"text-right font-semibold",children:o(t.montant_alloue)}),s.jsxs(d,{className:"text-right",children:[s.jsx("div",{className:"font-medium",children:o(t.montant_depense)}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[Number(t.pourcentage_utilise).toFixed(1),"%"]})]}),s.jsx(d,{className:`text-right font-semibold ${t.montant_restant<0?"text-destructive":t.montant_restant<t.montant_alloue*.2?"text-amber-600":"text-green-600"}`,children:o(t.montant_restant)}),s.jsx(d,{className:"w-48",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ee,{value:Math.min(100,t.pourcentage_utilise),className:`h-2 ${t.pourcentage_utilise>100?"bg-destructive":t.pourcentage_utilise>80?"bg-amber-500":"bg-green-500"}`}),s.jsxs("div",{className:"flex justify-between text-xs",children:[s.jsxs("span",{className:"text-muted-foreground",children:[t.pourcentage_utilise.toFixed(1),"%"]}),s.jsx("span",{className:t.est_depasse?"text-destructive":t.pourcentage_utilise>80?"text-amber-600":"text-green-600",children:t.est_depasse?"Dépassé":t.pourcentage_utilise>80?"Presque épuisé":"Normal"})]})]})}),s.jsx(d,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(O,{href:`/budgets/${t.id}`,children:s.jsx(Q,{variant:"outline",size:"sm",children:"Détails"})}),s.jsx(O,{href:`/depenses?budget_id=${t.id}`,children:s.jsx(Q,{variant:"outline",size:"sm",children:"Dépenses"})})]})})]},t.id)),e[103]=r.data,e[104]=G):G=e[104];let X;e[105]!==G?(X=s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(es,{children:[ve,s.jsx(ss,{children:G})]})}),e[105]=G,e[106]=X):X=e[106];let J;e[107]!==r.current_page||e[108]!==r.last_page||e[109]!==i?(J=r.last_page>1&&s.jsx("div",{className:"border-t p-4",children:s.jsx(ts,{currentPage:r.current_page,totalPages:r.last_page,onPageChange:t=>{ze.get("/budgets",{...i,page:t},{preserveState:!0,replace:!0})}})}),e[107]=r.current_page,e[108]=r.last_page,e[109]=i,e[110]=J):J=e[110];let K;e[111]!==X||e[112]!==J?(K=s.jsxs(h,{children:[X,J]}),e[111]=X,e[112]=J,e[113]=K):K=e[113];let ye;return e[114]!==j||e[115]!==p||e[116]!==D||e[117]!==W||e[118]!==K||e[119]!==u||e[120]!==f?(ye=s.jsxs(s.Fragment,{children:[ee,s.jsxs(rs,{activeRoute:"/budgets",children:[u,f,j,p,D,W,K]})]}),e[114]=j,e[115]=p,e[116]=D,e[117]=W,e[118]=K,e[119]=u,e[120]=f,e[121]=ye):ye=e[121],ye}function us(a){return s.jsx(c,{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a)}function fs(a){return s.jsx(c,{value:a,children:a},a)}function js(a){return a.est_depasse?s.jsxs(Pe,{variant:"destructive",children:[s.jsx(Ve,{className:"h-3 w-3 mr-1"}),"Dépassé"]}):Number(a.pourcentage_utilise)>80?s.jsxs(Pe,{variant:"warning",children:[s.jsx(Ve,{className:"h-3 w-3 mr-1"}),"Presque épuisé"]}):a.est_actif?s.jsxs(Pe,{variant:"default",children:[s.jsx(xs,{className:"h-3 w-3 mr-1"}),"Actif"]}):s.jsxs(Pe,{variant:"secondary",children:[s.jsx(hs,{className:"h-3 w-3 mr-1"}),"Inactif"]})}function ps(a){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD"}).format(a).replace("$US","$")}export{qs as default};
