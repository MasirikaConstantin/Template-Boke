import{c as vs,a as _s,r as Oe,R as Ns,j as s,L as Qe,b as ne,H as ys}from"./app-uwTh8kc8.js";import{B as h}from"./createLucideIcon-DSBG54g9.js";import{I as Ss}from"./input-DaOSUk8-.js";import{T as We,a as x,b as j,c as ws,d as Cs,e as ks}from"./table-C2CgaAXS.js";import{a as ls,b as as,c as rs,d as ce,e as is,S as As,D as Ds}from"./DashboardLayout-K8fs0Cfm.js";import{a as Ye,b as Ze,c as es,d as o,S as ss}from"./select-CmGp7lbF.js";import{B as oe}from"./badge-BVM5geEs.js";import{C as cs}from"./checkbox-CmvZIZGZ.js";import{A as ns,a as os}from"./alert-CtmFnCz8.js";import{P as Ts}from"./pagination-0UGVirS4.js";import{P as Es}from"./PageHeader-DJwfSSVd.js";import{U as ts}from"./users-pKpEsxQA.js";import{U as ds,a as ms}from"./user-x-B97xkjti.js";import{T as hs}from"./trash-2-onJN5Qfj.js";import{C as xs}from"./circle-check-big-BZmKZYr2.js";import{C as fs}from"./circle-x-D76Ytpwo.js";import{E as Ps}from"./ellipsis-vertical-DxT3aIZF.js";import{E as Us}from"./eye-ChVLLqBL.js";import{S as Is}from"./square-pen-DLsfdjJI.js";import{D as Rs}from"./download-CHi0mhGI.js";import{P as Bs}from"./plus-C7rdBEGQ.js";import{F as Ms}from"./funnel-BXXw9MbH.js";import{C as Vs}from"./clock-BP-e3cJ4.js";/* empty css            */import"./index-CAUyR_uV.js";import"./user-B129w1wL.js";import"./index-B9MI8Zig.js";import"./check-_y--m_do.js";import"./house-Cqq7iTIU.js";function bt(i){const e=vs.c(161),{auth:p,users:a,filters:t,stats:c,flash:m}=i;_s();let he;e[0]===Symbol.for("react.memo_cache_sentinel")?(he=[],e[0]=he):he=e[0];const[r,de]=Oe.useState(he),[f,us]=Oe.useState(t.search||"");Oe.useState(!1);let xe,fe;e[1]!==f?(xe=()=>{const l=setTimeout(()=>{ne.get("/admin/users",{search:f},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(l)},fe=[f],e[1]=f,e[2]=xe,e[3]=fe):(xe=e[2],fe=e[3]),Ns.useEffect(xe,fe);let ue;e[4]!==t?(ue=(l,u)=>{ne.get("/admin/users",{...t,[l]:u},{preserveState:!0,replace:!0})},e[4]=t,e[5]=ue):ue=e[5];const d=ue;let je;e[6]!==t?(je=l=>{const u=t.sort_by===l&&t.sort_direction==="asc"?"desc":"asc";ne.get("/admin/users",{...t,sort_by:l,sort_direction:u},{preserveState:!0,replace:!0})},e[6]=t,e[7]=je):je=e[7];const n=je;let pe;e[8]!==a.data?(pe=l=>{de(l?a.data.map(zs):[])},e[8]=a.data,e[9]=pe):pe=e[9];const ze=pe;let ge;e[10]!==r?(ge=(l,u)=>{de(u?[...r,l]:r.filter(bs=>bs!==l))},e[10]=r,e[11]=ge):ge=e[11];const Xe=ge;let be;e[12]!==r?(be=l=>{r.length!==0&&ne.post("/admin/users/bulk-action",{ids:r,action:l},{onSuccess:()=>de([])})},e[12]=r,e[13]=be):be=e[13];const me=be,js=Ls,ps=Hs,gs=Fs;let ve;e[14]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx(ys,{title:"Gestion des utilisateurs"}),e[14]=ve):ve=e[14];const qe=`${a.total} utilisateurs trouvés`;let _e;e[15]===Symbol.for("react.memo_cache_sentinel")?(_e=[{label:"Dashboard",href:"/dashboard"},{label:"Utilisateurs",href:"/admin/users"}],e[15]=_e):_e=e[15];let g;e[16]!==me||e[17]!==r.length?(g=r.length>0&&s.jsxs(ls,{children:[s.jsx(as,{asChild:!0,children:s.jsxs(h,{variant:"outline",children:[s.jsx(ts,{className:"h-4 w-4 mr-2"}),"Actions (",r.length,")"]})}),s.jsxs(rs,{align:"end",children:[s.jsxs(ce,{onClick:()=>me("activate"),children:[s.jsx(ds,{className:"h-4 w-4 mr-2"}),"Activer"]}),s.jsxs(ce,{onClick:()=>me("deactivate"),children:[s.jsx(ms,{className:"h-4 w-4 mr-2"}),"Désactiver"]}),s.jsx(is,{}),s.jsxs(ce,{onClick:()=>me("delete"),className:"text-destructive",children:[s.jsx(hs,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]}),e[16]=me,e[17]=r.length,e[18]=g):g=e[18];let Ne;e[19]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsxs(h,{variant:"outline",onClick:$s,children:[s.jsx(Rs,{className:"h-4 w-4 mr-2"}),"Exporter"]}),e[19]=Ne):Ne=e[19];let ye;e[20]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx(Qe,{href:"/admin/users/create",children:s.jsxs(h,{children:[s.jsx(Bs,{className:"h-4 w-4 mr-2"}),"Nouvel utilisateur"]})}),e[20]=ye):ye=e[20];let b;e[21]!==g?(b=s.jsxs("div",{className:"flex items-center gap-2",children:[g,Ne,ye]}),e[21]=g,e[22]=b):b=e[22];let v;e[23]!==qe||e[24]!==b?(v=s.jsx(Es,{title:"Utilisateurs",description:qe,breadcrumb:_e,actions:b}),e[23]=qe,e[24]=b,e[25]=v):v=e[25];let _;e[26]!==m?(_=m?.success&&s.jsxs(ns,{className:"mb-6",children:[s.jsx(xs,{className:"h-4 w-4"}),s.jsx(os,{children:m.success})]}),e[26]=m,e[27]=_):_=e[27];let N;e[28]!==m?(N=m?.error&&s.jsxs(ns,{variant:"destructive",className:"mb-6",children:[s.jsx(fs,{className:"h-4 w-4"}),s.jsx(os,{children:m.error})]}),e[28]=m,e[29]=N):N=e[29];let Se;e[30]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e[30]=Se):Se=e[30];let y;e[31]!==c.total?(y=s.jsxs("div",{children:[Se,s.jsx("p",{className:"text-2xl font-bold",children:c.total})]}),e[31]=c.total,e[32]=y):y=e[32];let we;e[33]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsx(ts,{className:"h-8 w-8 text-muted-foreground"}),e[33]=we):we=e[33];let S;e[34]!==y?(S=s.jsx("div",{className:"bg-card rounded-lg border p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[y,we]})}),e[34]=y,e[35]=S):S=e[35];let Ce;e[36]===Symbol.for("react.memo_cache_sentinel")?(Ce=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Actifs"}),e[36]=Ce):Ce=e[36];let w;e[37]!==c.active?(w=s.jsxs("div",{children:[Ce,s.jsx("p",{className:"text-2xl font-bold",children:c.active})]}),e[37]=c.active,e[38]=w):w=e[38];let ke;e[39]===Symbol.for("react.memo_cache_sentinel")?(ke=s.jsx(ds,{className:"h-8 w-8 text-green-500"}),e[39]=ke):ke=e[39];let C;e[40]!==w?(C=s.jsx("div",{className:"bg-card rounded-lg border p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[w,ke]})}),e[40]=w,e[41]=C):C=e[41];let Ae;e[42]===Symbol.for("react.memo_cache_sentinel")?(Ae=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Inactifs"}),e[42]=Ae):Ae=e[42];let k;e[43]!==c.inactive?(k=s.jsxs("div",{children:[Ae,s.jsx("p",{className:"text-2xl font-bold",children:c.inactive})]}),e[43]=c.inactive,e[44]=k):k=e[44];let De;e[45]===Symbol.for("react.memo_cache_sentinel")?(De=s.jsx(ms,{className:"h-8 w-8 text-red-500"}),e[45]=De):De=e[45];let A;e[46]!==k?(A=s.jsx("div",{className:"bg-card rounded-lg border p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[k,De]})}),e[46]=k,e[47]=A):A=e[47];let Te;e[48]===Symbol.for("react.memo_cache_sentinel")?(Te=s.jsx("p",{className:"text-sm text-muted-foreground",children:"Admins"}),e[48]=Te):Te=e[48];let D;e[49]!==c.admins?(D=s.jsxs("div",{children:[Te,s.jsx("p",{className:"text-2xl font-bold",children:c.admins})]}),e[49]=c.admins,e[50]=D):D=e[50];let Ee;e[51]===Symbol.for("react.memo_cache_sentinel")?(Ee=s.jsx(oe,{variant:"default",children:"Admin"}),e[51]=Ee):Ee=e[51];let T;e[52]!==D?(T=s.jsx("div",{className:"bg-card rounded-lg border p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[D,Ee]})}),e[52]=D,e[53]=T):T=e[53];let E;e[54]!==S||e[55]!==C||e[56]!==A||e[57]!==T?(E=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[S,C,A,T]}),e[54]=S,e[55]=C,e[56]=A,e[57]=T,e[58]=E):E=e[58];let Pe;e[59]===Symbol.for("react.memo_cache_sentinel")?(Pe=s.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e[59]=Pe):Pe=e[59];let Ue;e[60]===Symbol.for("react.memo_cache_sentinel")?(Ue=l=>us(l.target.value),e[60]=Ue):Ue=e[60];let P;e[61]!==f?(P=s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[Pe,s.jsx(Ss,{placeholder:"Rechercher par nom ou email...",value:f,onChange:Ue,className:"pl-10"})]})}),e[61]=f,e[62]=P):P=e[62];const Ge=t.role||"";let U;e[63]!==d?(U=l=>d("role",l),e[63]=d,e[64]=U):U=e[64];let Ie;e[65]===Symbol.for("react.memo_cache_sentinel")?(Ie=s.jsxs(Ye,{className:"w-[150px]",children:[s.jsx(Ms,{className:"h-4 w-4 mr-2"}),s.jsx(Ze,{placeholder:"Rôle"})]}),e[65]=Ie):Ie=e[65];let Re;e[66]===Symbol.for("react.memo_cache_sentinel")?(Re=s.jsxs(es,{children:[s.jsx(o,{value:"all",children:"Tous les rôles"}),s.jsx(o,{value:"admin",children:"Administrateur"}),s.jsx(o,{value:"moderator",children:"Modérateur"}),s.jsx(o,{value:"user",children:"Utilisateur"})]}),e[66]=Re):Re=e[66];let I;e[67]!==Ge||e[68]!==U?(I=s.jsxs(ss,{value:Ge,onValueChange:U,children:[Ie,Re]}),e[67]=Ge,e[68]=U,e[69]=I):I=e[69];const Je=t.status||"";let R;e[70]!==d?(R=l=>d("status",l),e[70]=d,e[71]=R):R=e[71];let Be;e[72]===Symbol.for("react.memo_cache_sentinel")?(Be=s.jsx(Ye,{className:"w-[150px]",children:s.jsx(Ze,{placeholder:"Statut"})}),e[72]=Be):Be=e[72];let Me;e[73]===Symbol.for("react.memo_cache_sentinel")?(Me=s.jsxs(es,{children:[s.jsx(o,{value:"all",children:"Tous les statuts"}),s.jsx(o,{value:"active",children:"Actif"}),s.jsx(o,{value:"inactive",children:"Inactif"}),s.jsx(o,{value:"pending",children:"En attente"})]}),e[73]=Me):Me=e[73];let B;e[74]!==Je||e[75]!==R?(B=s.jsxs(ss,{value:Je,onValueChange:R,children:[Be,Me]}),e[74]=Je,e[75]=R,e[76]=B):B=e[76];let M;e[77]!==t.per_page?(M=t.per_page?.toString()||"10",e[77]=t.per_page,e[78]=M):M=e[78];let V;e[79]!==d?(V=l=>d("per_page",l),e[79]=d,e[80]=V):V=e[80];let Ve;e[81]===Symbol.for("react.memo_cache_sentinel")?(Ve=s.jsx(Ye,{className:"w-[100px]",children:s.jsx(Ze,{placeholder:"Par page"})}),e[81]=Ve):Ve=e[81];let $e;e[82]===Symbol.for("react.memo_cache_sentinel")?($e=s.jsxs(es,{children:[s.jsx(o,{value:"10",children:"10"}),s.jsx(o,{value:"25",children:"25"}),s.jsx(o,{value:"50",children:"50"}),s.jsx(o,{value:"100",children:"100"})]}),e[82]=$e):$e=e[82];let $;e[83]!==M||e[84]!==V?($=s.jsxs(ss,{value:M,onValueChange:V,children:[Ve,$e]}),e[83]=M,e[84]=V,e[85]=$):$=e[85];let F;e[86]!==I||e[87]!==B||e[88]!==$?(F=s.jsxs("div",{className:"flex gap-2",children:[I,B,$]}),e[86]=I,e[87]=B,e[88]=$,e[89]=F):F=e[89];let H;e[90]!==P||e[91]!==F?(H=s.jsx("div",{className:"bg-card rounded-lg border p-4 mb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[P,F]})}),e[90]=P,e[91]=F,e[92]=H):H=e[92];const Ke=r.length===a.data.length&&a.data.length>0;let L;e[93]!==ze||e[94]!==Ke?(L=s.jsx(j,{className:"w-12",children:s.jsx(cs,{checked:Ke,onCheckedChange:ze})}),e[93]=ze,e[94]=Ke,e[95]=L):L=e[95];let z;e[96]!==n?(z=()=>n("name"),e[96]=n,e[97]=z):z=e[97];let X;e[98]!==t.sort_by||e[99]!==t.sort_direction?(X=t.sort_by==="name"&&s.jsx("span",{className:"ml-1",children:t.sort_direction==="asc"?"↑":"↓"}),e[98]=t.sort_by,e[99]=t.sort_direction,e[100]=X):X=e[100];let q;e[101]!==z||e[102]!==X?(q=s.jsx(j,{children:s.jsxs(h,{variant:"ghost",onClick:z,className:"font-semibold p-0 h-auto",children:["Nom",X]})}),e[101]=z,e[102]=X,e[103]=q):q=e[103];let Fe;e[104]===Symbol.for("react.memo_cache_sentinel")?(Fe=s.jsx(j,{children:"Email"}),e[104]=Fe):Fe=e[104];let G;e[105]!==n?(G=()=>n("role"),e[105]=n,e[106]=G):G=e[106];let J;e[107]!==t.sort_by||e[108]!==t.sort_direction?(J=t.sort_by==="role"&&s.jsx("span",{className:"ml-1",children:t.sort_direction==="asc"?"↑":"↓"}),e[107]=t.sort_by,e[108]=t.sort_direction,e[109]=J):J=e[109];let K;e[110]!==G||e[111]!==J?(K=s.jsx(j,{children:s.jsxs(h,{variant:"ghost",onClick:G,className:"font-semibold p-0 h-auto",children:["Rôle",J]})}),e[110]=G,e[111]=J,e[112]=K):K=e[112];let O;e[113]!==n?(O=()=>n("status"),e[113]=n,e[114]=O):O=e[114];let Q;e[115]!==t.sort_by||e[116]!==t.sort_direction?(Q=t.sort_by==="status"&&s.jsx("span",{className:"ml-1",children:t.sort_direction==="asc"?"↑":"↓"}),e[115]=t.sort_by,e[116]=t.sort_direction,e[117]=Q):Q=e[117];let W;e[118]!==O||e[119]!==Q?(W=s.jsx(j,{children:s.jsxs(h,{variant:"ghost",onClick:O,className:"font-semibold p-0 h-auto",children:["Statut",Q]})}),e[118]=O,e[119]=Q,e[120]=W):W=e[120];let Y;e[121]!==n?(Y=()=>n("created_at"),e[121]=n,e[122]=Y):Y=e[122];let Z;e[123]!==t.sort_by||e[124]!==t.sort_direction?(Z=t.sort_by==="created_at"&&s.jsx("span",{className:"ml-1",children:t.sort_direction==="asc"?"↑":"↓"}),e[123]=t.sort_by,e[124]=t.sort_direction,e[125]=Z):Z=e[125];let ee;e[126]!==Y||e[127]!==Z?(ee=s.jsx(j,{children:s.jsxs(h,{variant:"ghost",onClick:Y,className:"font-semibold p-0 h-auto",children:["Date d'inscription",Z]})}),e[126]=Y,e[127]=Z,e[128]=ee):ee=e[128];let He;e[129]===Symbol.for("react.memo_cache_sentinel")?(He=s.jsx(j,{className:"text-right",children:"Actions"}),e[129]=He):He=e[129];let se;e[130]!==L||e[131]!==q||e[132]!==K||e[133]!==W||e[134]!==ee?(se=s.jsx(ws,{children:s.jsxs(We,{children:[L,q,Fe,K,W,ee,He]})}),e[130]=L,e[131]=q,e[132]=K,e[133]=W,e[134]=ee,e[135]=se):se=e[135];let te;e[136]!==p||e[137]!==t.search||e[138]!==Xe||e[139]!==r||e[140]!==a.data?(te=a.data.length===0?s.jsx(We,{children:s.jsxs(x,{colSpan:7,className:"text-center py-8 text-muted-foreground",children:[s.jsx(ts,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),s.jsx("p",{className:"text-lg",children:"Aucun utilisateur trouvé"}),s.jsx("p",{className:"text-sm mt-1",children:t.search?"Essayez avec d'autres termes de recherche":"Commencez par créer un nouvel utilisateur"})]})}):a.data.map(l=>s.jsxs(We,{className:"hover:bg-muted/50",children:[s.jsx(x,{children:s.jsx(cs,{checked:r.includes(l.id),onCheckedChange:u=>Xe(l.id,u===!0)})}),s.jsx(x,{className:"font-medium",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-bold text-primary",children:l.name.charAt(0).toUpperCase()})}),s.jsxs("div",{children:[s.jsx("p",{children:l.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["ID: ",l.id]})]})]})}),s.jsx(x,{children:l.email}),s.jsx(x,{children:gs(l.role)}),s.jsx(x,{children:ps(l.status)}),s.jsx(x,{children:new Date(l.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})}),s.jsx(x,{className:"text-right",children:s.jsxs(ls,{children:[s.jsx(as,{asChild:!0,children:s.jsx(h,{variant:"ghost",size:"icon",children:s.jsx(Ps,{className:"h-4 w-4"})})}),s.jsxs(rs,{align:"end",children:[s.jsx(Qe,{href:`/admin/users/${l.id}`,children:s.jsxs(ce,{children:[s.jsx(Us,{className:"h-4 w-4 mr-2"}),"Voir"]})}),s.jsx(Qe,{href:`/admin/users/${l.id}/edit`,children:s.jsxs(ce,{children:[s.jsx(Is,{className:"h-4 w-4 mr-2"}),"Modifier"]})}),s.jsx(is,{}),p.user.id!==l.id&&s.jsxs(ce,{onClick:()=>js(l),className:"text-destructive",children:[s.jsx(hs,{className:"h-4 w-4 mr-2"}),"Supprimer"]})]})]})})]},l.id)),e[136]=p,e[137]=t.search,e[138]=Xe,e[139]=r,e[140]=a.data,e[141]=te):te=e[141];let le;e[142]!==te?(le=s.jsx(Cs,{children:te}),e[142]=te,e[143]=le):le=e[143];let ae;e[144]!==se||e[145]!==le?(ae=s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(ks,{children:[se,le]})}),e[144]=se,e[145]=le,e[146]=ae):ae=e[146];let re;e[147]!==t||e[148]!==a.current_page||e[149]!==a.last_page?(re=a.last_page>1&&s.jsx("div",{className:"border-t p-4",children:s.jsx(Ts,{currentPage:a.current_page,totalPages:a.last_page,onPageChange:l=>{ne.get("/admin/users",{...t,page:l},{preserveState:!0,replace:!0})}})}),e[147]=t,e[148]=a.current_page,e[149]=a.last_page,e[150]=re):re=e[150];let ie;e[151]!==ae||e[152]!==re?(ie=s.jsxs("div",{className:"bg-card rounded-lg border overflow-hidden",children:[ae,re]}),e[151]=ae,e[152]=re,e[153]=ie):ie=e[153];let Le;return e[154]!==v||e[155]!==_||e[156]!==N||e[157]!==E||e[158]!==H||e[159]!==ie?(Le=s.jsxs(s.Fragment,{children:[ve,s.jsxs(Ds,{activeRoute:"/admin/users",children:[v,_,N,E,H,ie]})]}),e[154]=v,e[155]=_,e[156]=N,e[157]=E,e[158]=H,e[159]=ie,e[160]=Le):Le=e[160],Le}function $s(){return window.open("/admin/users/export","_blank")}function Fs(i){const p={admin:{label:"Administrateur",variant:"default"},moderator:{label:"Modérateur",variant:"secondary"},user:{label:"Utilisateur",variant:"outline"}}[i]||{label:i,variant:"outline"};return s.jsx(oe,{variant:p.variant,children:p.label})}function Hs(i){switch(i){case"active":return s.jsxs(oe,{variant:"success",className:"gap-1",children:[s.jsx(xs,{className:"h-3 w-3"}),"Actif"]});case"inactive":return s.jsxs(oe,{variant:"destructive",className:"gap-1",children:[s.jsx(fs,{className:"h-3 w-3"}),"Inactif"]});case"pending":return s.jsxs(oe,{variant:"secondary",className:"gap-1",children:[s.jsx(Vs,{className:"h-3 w-3"}),"En attente"]});default:return s.jsx(oe,{variant:"outline",children:i})}}function Ls(i){confirm(`Êtes-vous sûr de vouloir supprimer l'utilisateur "${i.name}" ?`)&&ne.delete(`/admin/users/${i.id}`)}function zs(i){return i.id}export{bt as default};
