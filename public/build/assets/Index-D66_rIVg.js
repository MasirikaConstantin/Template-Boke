import{c as mt,r as Xe,R as ft,j as t,L as Je,b as se,H as xt}from"./app-DDMw_g-7.js";import{B as te}from"./createLucideIcon-C7XcNYgG.js";import{I as Ke}from"./input-BVVymUkR.js";import{T as Qe,a as n,b as o,c as ht,d as ut,e as jt}from"./table-BFLeCcHg.js";import{a as pt,b as gt,c as bt,d as Le,S as Nt}from"./select-PhFBO-_g.js";import{B as at}from"./badge-DAYzwe6v.js";import{C as Ze}from"./checkbox-C4SlgxsE.js";import{A as et,a as tt}from"./alert-DXCHaI2q.js";import{P as vt}from"./pagination-C2Sj6n88.js";import{S as _t,D as St,F as yt}from"./DashboardLayout-BZjw1K0F.js";import{P as wt}from"./PageHeader-mA1M3Sat.js";import{T as st}from"./trending-down-BG06Mktb.js";import{E as Ct}from"./eye-aOIcTJaY.js";import{S as Dt}from"./square-pen-CSSow74p.js";import{T as Tt}from"./trash-2-BUASJmiQ.js";import{P as Rt}from"./plus-C-N2Cfxq.js";import{C as Ft}from"./users-BoICQ7jK.js";import{W as Pt}from"./wallet-C5gNUsYV.js";import{F as kt}from"./folder-Bq7xZ5oQ.js";import{F as At}from"./funnel-DJahoFwD.js";import{C as lt}from"./circle-check-big-C5IfDX8e.js";import{C as Bt}from"./circle-x-E9Nndj7n.js";import{C as $t}from"./clock-DguJQkIo.js";/* empty css            */import"./index-F0Ag1TXX.js";import"./index-hWUGqNQR.js";import"./check-C3POMRK3.js";import"./user-B5MWMe6b.js";import"./house-CPwq1_I9.js";function ps(c){const e=mt.c(151),{depenses:a,filters:i,stats:l,flash:d}=c;let le;e[0]===Symbol.for("react.memo_cache_sentinel")?(le=[],e[0]=le):le=e[0];const[m,ae]=Xe.useState(le),[f,rt]=Xe.useState(i.search||""),ze=i.date_debut||"",Ue=i.date_fin||"";let re;e[1]!==ze||e[2]!==Ue?(re={debut:ze,fin:Ue},e[1]=ze,e[2]=Ue,e[3]=re):re=e[3];const[r,Ye]=Xe.useState(re);let ie,ce;e[4]!==f?(ie=()=>{const s=setTimeout(()=>{se.get("/depenses",{search:f},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(s)},ce=[f],e[4]=f,e[5]=ie,e[6]=ce):(ie=e[5],ce=e[6]),ft.useEffect(ie,ce);let ne;e[7]!==i?(ne=(s,ee)=>{se.get("/depenses",{...i,[s]:ee},{preserveState:!0,replace:!0})},e[7]=i,e[8]=ne):ne=e[8];const Me=ne;let oe;e[9]!==r.debut||e[10]!==r.fin||e[11]!==i?(oe=()=>{se.get("/depenses",{...i,date_debut:r.debut,date_fin:r.fin},{preserveState:!0,replace:!0})},e[9]=r.debut,e[10]=r.fin,e[11]=i,e[12]=oe):oe=e[12];const Ve=oe;let de;e[13]!==a.data?(de=s=>{ae(s?a.data.map(Ut):[])},e[13]=a.data,e[14]=de):de=e[14];const We=de;let me;e[15]!==m?(me=(s,ee)=>{ae(ee?[...m,s]:m.filter(dt=>dt!==s))},e[15]=m,e[16]=me):me=e[16];const qe=me,it=zt,Z=Lt,ct=Ht,nt=Et;let fe;e[17]===Symbol.for("react.memo_cache_sentinel")?(fe=t.jsx(xt,{title:"Gestion des dépenses"}),e[17]=fe):fe=e[17];const ot=a.total;let xe;e[18]!==l.montant_total?(xe=Z(l.montant_total),e[18]=l.montant_total,e[19]=xe):xe=e[19];const Ge=`${ot} dépenses - Total: ${xe}`;let he;e[20]===Symbol.for("react.memo_cache_sentinel")?(he=[{label:"Dashboard",href:"/dashboard"},{label:"Budgets",href:"/budgets"},{label:"Dépenses",href:"/depenses"}],e[20]=he):he=e[20];let ue;e[21]===Symbol.for("react.memo_cache_sentinel")?(ue=t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(Je,{href:"/depenses/create",children:t.jsxs(te,{children:[t.jsx(Rt,{className:"h-4 w-4 mr-2"}),"Nouvelle dépense"]})})}),e[21]=ue):ue=e[21];let x;e[22]!==Ge?(x=t.jsx(wt,{title:"Dépenses",description:Ge,breadcrumb:he,actions:ue}),e[22]=Ge,e[23]=x):x=e[23];let h;e[24]!==d?(h=d?.success&&t.jsx(et,{className:"mb-6",children:t.jsx(tt,{children:d.success})}),e[24]=d,e[25]=h):h=e[25];let u;e[26]!==d?(u=d?.error&&t.jsx(et,{variant:"destructive",className:"mb-6",children:t.jsx(tt,{children:d.error})}),e[26]=d,e[27]=u):u=e[27];let je;e[28]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Total dépenses"}),e[28]=je):je=e[28];let j;e[29]!==l.total?(j=t.jsx("p",{className:"text-2xl font-bold",children:l.total}),e[29]=l.total,e[30]=j):j=e[30];let p;e[31]!==l.montant_total?(p=Z(l.montant_total),e[31]=l.montant_total,e[32]=p):p=e[32];let g;e[33]!==p?(g=t.jsx("p",{className:"text-sm text-muted-foreground",children:p}),e[33]=p,e[34]=g):g=e[34];let b;e[35]!==j||e[36]!==g?(b=t.jsxs("div",{children:[je,j,g]}),e[35]=j,e[36]=g,e[37]=b):b=e[37];let pe;e[38]===Symbol.for("react.memo_cache_sentinel")?(pe=t.jsx(st,{className:"h-8 w-8 text-primary"}),e[38]=pe):pe=e[38];let N;e[39]!==b?(N=t.jsx("div",{className:"bg-card rounded-lg border p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[b,pe]})}),e[39]=b,e[40]=N):N=e[40];let ge;e[41]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Aujourd'hui"}),e[41]=ge):ge=e[41];let v;e[42]!==l.aujourdhui.count?(v=t.jsx("p",{className:"text-2xl font-bold",children:l.aujourdhui.count}),e[42]=l.aujourdhui.count,e[43]=v):v=e[43];let _;e[44]!==l.aujourdhui.total?(_=Z(l.aujourdhui.total),e[44]=l.aujourdhui.total,e[45]=_):_=e[45];let S;e[46]!==_?(S=t.jsx("p",{className:"text-sm text-muted-foreground",children:_}),e[46]=_,e[47]=S):S=e[47];let y;e[48]!==v||e[49]!==S?(y=t.jsxs("div",{children:[ge,v,S]}),e[48]=v,e[49]=S,e[50]=y):y=e[50];let be;e[51]===Symbol.for("react.memo_cache_sentinel")?(be=t.jsx(Ft,{className:"h-8 w-8 text-green-500"}),e[51]=be):be=e[51];let w;e[52]!==y?(w=t.jsx("div",{className:"bg-card rounded-lg border p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[y,be]})}),e[52]=y,e[53]=w):w=e[53];let Ne;e[54]===Symbol.for("react.memo_cache_sentinel")?(Ne=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Ce mois"}),e[54]=Ne):Ne=e[54];let C;e[55]!==l.ce_mois.count?(C=t.jsx("p",{className:"text-2xl font-bold",children:l.ce_mois.count}),e[55]=l.ce_mois.count,e[56]=C):C=e[56];let D;e[57]!==l.ce_mois.total?(D=Z(l.ce_mois.total),e[57]=l.ce_mois.total,e[58]=D):D=e[58];let T;e[59]!==D?(T=t.jsx("p",{className:"text-sm text-muted-foreground",children:D}),e[59]=D,e[60]=T):T=e[60];let R;e[61]!==C||e[62]!==T?(R=t.jsxs("div",{children:[Ne,C,T]}),e[61]=C,e[62]=T,e[63]=R):R=e[63];let ve;e[64]===Symbol.for("react.memo_cache_sentinel")?(ve=t.jsx(Pt,{className:"h-8 w-8 text-blue-500"}),e[64]=ve):ve=e[64];let F;e[65]!==R?(F=t.jsx("div",{className:"bg-card rounded-lg border p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[R,ve]})}),e[65]=R,e[66]=F):F=e[66];let _e;e[67]===Symbol.for("react.memo_cache_sentinel")?(_e=t.jsx("p",{className:"text-sm text-muted-foreground",children:"Par statut"}),e[67]=_e):_e=e[67];let P;e[68]!==l.par_statut?(P=t.jsxs("div",{children:[_e,t.jsx("div",{className:"flex gap-1 mt-1",children:Object.entries(l.par_statut).map(It)})]}),e[68]=l.par_statut,e[69]=P):P=e[69];let Se;e[70]===Symbol.for("react.memo_cache_sentinel")?(Se=t.jsx(kt,{className:"h-8 w-8 text-purple-500"}),e[70]=Se):Se=e[70];let k;e[71]!==P?(k=t.jsx("div",{className:"bg-card rounded-lg border p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[P,Se]})}),e[71]=P,e[72]=k):k=e[72];let A;e[73]!==N||e[74]!==w||e[75]!==F||e[76]!==k?(A=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[N,w,F,k]}),e[73]=N,e[74]=w,e[75]=F,e[76]=k,e[77]=A):A=e[77];let ye;e[78]===Symbol.for("react.memo_cache_sentinel")?(ye=t.jsx(_t,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e[78]=ye):ye=e[78];let we;e[79]===Symbol.for("react.memo_cache_sentinel")?(we=s=>rt(s.target.value),e[79]=we):we=e[79];let B;e[80]!==f?(B=t.jsx("div",{className:"flex flex-col md:flex-row gap-4",children:t.jsx("div",{className:"flex-1",children:t.jsxs("div",{className:"relative",children:[ye,t.jsx(Ke,{placeholder:"Rechercher par référence, libellé ou bénéficiaire...",value:f,onChange:we,className:"pl-10"})]})})}),e[80]=f,e[81]=B):B=e[81];let $;e[82]!==r?($=s=>Ye({...r,debut:s.target.value}),e[82]=r,e[83]=$):$=e[83];let I;e[84]!==r.debut||e[85]!==$?(I=t.jsx("div",{className:"flex-1",children:t.jsx(Ke,{type:"date",value:r.debut,onChange:$,placeholder:"Date début",className:"w-full"})}),e[84]=r.debut,e[85]=$,e[86]=I):I=e[86];let E;e[87]!==r?(E=s=>Ye({...r,fin:s.target.value}),e[87]=r,e[88]=E):E=e[88];let H;e[89]!==r.fin||e[90]!==E?(H=t.jsx("div",{className:"flex-1",children:t.jsx(Ke,{type:"date",value:r.fin,onChange:E,placeholder:"Date fin",className:"w-full"})}),e[89]=r.fin,e[90]=E,e[91]=H):H=e[91];let Ce;e[92]===Symbol.for("react.memo_cache_sentinel")?(Ce=t.jsx(At,{className:"h-4 w-4 mr-2"}),e[92]=Ce):Ce=e[92];let L;e[93]!==Ve?(L=t.jsxs(te,{onClick:Ve,variant:"outline",children:[Ce,"Filtrer"]}),e[93]=Ve,e[94]=L):L=e[94];let z;e[95]!==I||e[96]!==H||e[97]!==L?(z=t.jsxs("div",{className:"flex gap-2",children:[I,H,L]}),e[95]=I,e[96]=H,e[97]=L,e[98]=z):z=e[98];let U;e[99]!==i.per_page?(U=i.per_page?.toString()||"15",e[99]=i.per_page,e[100]=U):U=e[100];let M;e[101]!==Me?(M=s=>Me("per_page",s),e[101]=Me,e[102]=M):M=e[102];let De;e[103]===Symbol.for("react.memo_cache_sentinel")?(De=t.jsx(pt,{className:"w-[100px]",children:t.jsx(gt,{placeholder:"Par page"})}),e[103]=De):De=e[103];let Te;e[104]===Symbol.for("react.memo_cache_sentinel")?(Te=t.jsxs(bt,{children:[t.jsx(Le,{value:"10",children:"10"}),t.jsx(Le,{value:"15",children:"15"}),t.jsx(Le,{value:"25",children:"25"}),t.jsx(Le,{value:"50",children:"50"})]}),e[104]=Te):Te=e[104];let V;e[105]!==U||e[106]!==M?(V=t.jsx("div",{className:"flex gap-2 ml-auto",children:t.jsxs(Nt,{value:U,onValueChange:M,children:[De,Te]})}),e[105]=U,e[106]=M,e[107]=V):V=e[107];let W;e[108]!==z||e[109]!==V?(W=t.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[z,V]}),e[108]=z,e[109]=V,e[110]=W):W=e[110];let q;e[111]!==B||e[112]!==W?(q=t.jsx("div",{className:"bg-card rounded-lg border p-4 mb-6",children:t.jsxs("div",{className:"flex flex-col gap-4",children:[B,W]})}),e[111]=B,e[112]=W,e[113]=q):q=e[113];const Oe=m.length===a.data.length&&a.data.length>0;let G;e[114]!==We||e[115]!==Oe?(G=t.jsx(o,{className:"w-12",children:t.jsx(Ze,{checked:Oe,onCheckedChange:We})}),e[114]=We,e[115]=Oe,e[116]=G):G=e[116];let Re,Fe,Pe,ke,Ae,Be,$e,Ie,Ee;e[117]===Symbol.for("react.memo_cache_sentinel")?(Re=t.jsx(o,{children:"Référence"}),Fe=t.jsx(o,{children:"Libellé"}),Pe=t.jsx(o,{children:"Budget"}),ke=t.jsx(o,{children:"Catégorie"}),Ae=t.jsx(o,{children:"Montant"}),Be=t.jsx(o,{children:"Bénéficiaire"}),$e=t.jsx(o,{children:"Date"}),Ie=t.jsx(o,{children:"Statut"}),Ee=t.jsx(o,{className:"text-right",children:"Actions"}),e[117]=Re,e[118]=Fe,e[119]=Pe,e[120]=ke,e[121]=Ae,e[122]=Be,e[123]=$e,e[124]=Ie,e[125]=Ee):(Re=e[117],Fe=e[118],Pe=e[119],ke=e[120],Ae=e[121],Be=e[122],$e=e[123],Ie=e[124],Ee=e[125]);let O;e[126]!==G?(O=t.jsx(ht,{children:t.jsxs(Qe,{children:[G,Re,Fe,Pe,ke,Ae,Be,$e,Ie,Ee]})}),e[126]=G,e[127]=O):O=e[127];let X;e[128]!==a.data||e[129]!==qe||e[130]!==m?(X=a.data.length===0?t.jsx(Qe,{children:t.jsxs(n,{colSpan:10,className:"text-center py-8 text-muted-foreground",children:[t.jsx(st,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),t.jsx("p",{className:"text-lg",children:"Aucune dépense trouvée"})]})}):a.data.map(s=>t.jsxs(Qe,{className:"hover:bg-muted/50",children:[t.jsx(n,{children:t.jsx(Ze,{checked:m.includes(s.id),onCheckedChange:ee=>qe(s.id,ee===!0)})}),t.jsx(n,{children:t.jsx("div",{className:"font-mono",children:s.reference})}),t.jsxs(n,{children:[t.jsx("div",{className:"font-medium",children:s.libelle}),s.description&&t.jsx("div",{className:"text-xs text-muted-foreground truncate max-w-xs",children:s.description})]}),t.jsx(n,{children:s.budget?t.jsx("div",{className:"text-sm",children:s.budget.nom_complet}):t.jsx("span",{className:"text-sm text-muted-foreground",children:"N/A"})}),t.jsx(n,{children:s.categorie?t.jsx("div",{className:"text-sm",children:s.categorie.nom_categorie}):t.jsx("span",{className:"text-sm text-muted-foreground",children:"N/A"})}),t.jsx(n,{className:"font-semibold",children:Z(s.montant)}),t.jsx(n,{children:t.jsx("div",{className:"text-sm",children:s.beneficiaire})}),t.jsx(n,{children:t.jsx("div",{className:"text-sm",children:ct(s.date_depense)})}),t.jsx(n,{children:nt(s.statut)}),t.jsx(n,{className:"text-right",children:t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(Je,{href:`/depenses/${s.id}`,children:t.jsx(te,{variant:"ghost",size:"sm",children:t.jsx(Ct,{className:"h-4 w-4"})})}),t.jsx(Je,{href:`/depenses/${s.id}/edit`,children:t.jsx(te,{variant:"ghost",size:"sm",children:t.jsx(Dt,{className:"h-4 w-4"})})}),t.jsx(te,{variant:"ghost",size:"sm",onClick:()=>it(s),className:"text-destructive",children:t.jsx(Tt,{className:"h-4 w-4"})})]})})]},s.id)),e[128]=a.data,e[129]=qe,e[130]=m,e[131]=X):X=e[131];let J;e[132]!==X?(J=t.jsx(ut,{children:X}),e[132]=X,e[133]=J):J=e[133];let K;e[134]!==O||e[135]!==J?(K=t.jsx("div",{className:"overflow-x-auto",children:t.jsxs(jt,{children:[O,J]})}),e[134]=O,e[135]=J,e[136]=K):K=e[136];let Q;e[137]!==a.current_page||e[138]!==a.last_page||e[139]!==i?(Q=a.last_page>1&&t.jsx("div",{className:"border-t p-4",children:t.jsx(vt,{currentPage:a.current_page,totalPages:a.last_page,onPageChange:s=>{se.get("/depenses",{...i,page:s},{preserveState:!0,replace:!0})}})}),e[137]=a.current_page,e[138]=a.last_page,e[139]=i,e[140]=Q):Q=e[140];let Y;e[141]!==K||e[142]!==Q?(Y=t.jsxs("div",{className:"bg-card rounded-lg border overflow-hidden",children:[K,Q]}),e[141]=K,e[142]=Q,e[143]=Y):Y=e[143];let He;return e[144]!==x||e[145]!==h||e[146]!==u||e[147]!==A||e[148]!==q||e[149]!==Y?(He=t.jsxs(t.Fragment,{children:[fe,t.jsxs(St,{activeRoute:"/depenses",children:[x,h,u,A,q,Y]})]}),e[144]=x,e[145]=h,e[146]=u,e[147]=A,e[148]=q,e[149]=Y,e[150]=He):He=e[150],He}function It(c){const[e,a]=c;return t.jsx(at,{variant:"outline",className:"text-xs",children:a.count},e)}function Et(c){const a={brouillon:{variant:"secondary",icon:t.jsx(yt,{className:"h-3 w-3 mr-1"})},en_attente:{variant:"warning",icon:t.jsx($t,{className:"h-3 w-3 mr-1"})},approuve:{variant:"default",icon:t.jsx(lt,{className:"h-3 w-3 mr-1"})},rejete:{variant:"destructive",icon:t.jsx(Bt,{className:"h-3 w-3 mr-1"})},paye:{variant:"success",icon:t.jsx(lt,{className:"h-3 w-3 mr-1"})}}[c]||{variant:"secondary",icon:null},i=c.charAt(0).toUpperCase()+c.slice(1).replace("_"," ");return t.jsxs(at,{variant:a.variant,children:[a.icon,i]})}function Ht(c){return new Date(c).toLocaleDateString("fr-FR")}function Lt(c){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD"}).format(c).replace("$US","$")}function zt(c){confirm(`Êtes-vous sûr de vouloir supprimer "${c.libelle}" ?`)&&se.delete(`/depenses/${c.id}`)}function Ut(c){return c.id}export{ps as default};
