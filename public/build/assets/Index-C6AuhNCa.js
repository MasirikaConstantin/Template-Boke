import{c as ce,r as W,R as oe,j as s,L as ne,b as w,H as de}from"./app-DZJrMNxY.js";import{B as C}from"./createLucideIcon-BS6ALbkr.js";import{I as Y}from"./input-BckMPTlJ.js";import{T as Z,a as N,c as me,b as y,e as he,d as fe}from"./table-CCFYgkA5.js";import{B as xe}from"./badge-CeBFvwGD.js";import{C as pe}from"./checkbox-BKAAZ-oL.js";import{A as te,a as ae}from"./alert-TWt91VRb.js";import{P as ue}from"./pagination-DQr5AstA.js";import{i as je,S as ge,D as ve}from"./DashboardLayout-vWMxdFqe.js";import{P as be}from"./PageHeader-7wFCOOoD.js";import{P as _e}from"./plus-B4tHpUlF.js";import{F as Ne}from"./folder-RNxcS7VE.js";import{C as Se}from"./circle-check-big-BJ2O629Z.js";import{C as Ce}from"./circle-x-CD4Hroly.js";import{S as ye}from"./square-pen-CqzDT6RU.js";import{T as we}from"./trash-2-DjSieKno.js";/* empty css            */import"./index-DPdNmvR6.js";import"./index-ehOYwFgY.js";import"./check-BQdHNVlQ.js";import"./users-suUgY7hg.js";import"./user-BrzOplp3.js";import"./house-CA3_dIaa.js";function We(D){const e=ce.c(60),{auth:M,categories:a,filters:l,flash:i}=D,[c,re]=W.useState(l.search||""),[n,ee]=W.useState(null);let T;e[0]===Symbol.for("react.memo_cache_sentinel")?(T={nom_categorie:"",code:"",description:"",est_actif:!0},e[0]=T):T=e[0];const[r,S]=W.useState(T);let P,k;e[1]!==c?(P=()=>{const t=setTimeout(()=>{w.get("/categories-depense",{search:c},{preserveState:!0,replace:!0})},500);return()=>clearTimeout(t)},k=[c],e[1]=c,e[2]=P,e[3]=k):(P=e[2],k=e[3]),oe.useEffect(P,k);let A;e[4]!==l?(A=(t,o)=>{w.get("/categories-depense",{...l,[t]:o},{preserveState:!0,replace:!0})},e[4]=l,e[5]=A):A=e[5];const O=A;let F;e[6]===Symbol.for("react.memo_cache_sentinel")?(F=t=>{ee(t.id),S({nom_categorie:t.nom_categorie,code:t.code,description:t.description||"",est_actif:t.est_actif})},e[6]=F):F=e[6];const le=F;let R;e[7]===Symbol.for("react.memo_cache_sentinel")?(R=()=>{ee(null),S({nom_categorie:"",code:"",description:"",est_actif:!0})},e[7]=R):R=e[7];const se=R;let B;e[8]!==r?(B=t=>{w.put(`/categories-depense/${t}`,r,{onSuccess:()=>{se()}})},e[8]=r,e[9]=B):B=e[9];const Q=B,ie=De;let E;e[10]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(de,{title:"Catégories de dépenses"}),e[10]=E):E=e[10];const V=`${a.total} catégories`;let I;e[11]===Symbol.for("react.memo_cache_sentinel")?(I=[{label:"Dashboard",href:"/dashboard"},{label:"Budgets",href:"/budgets"},{label:"Catégories",href:"/categories-depense"}],e[11]=I):I=e[11];let H;e[12]===Symbol.for("react.memo_cache_sentinel")?(H=je.create(),e[12]=H):H=e[12];let $;e[13]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(ne,{href:H.url,children:s.jsxs(C,{children:[s.jsx(_e,{className:"h-4 w-4 mr-2"}),"Nouvelle catégorie"]})}),e[13]=$):$=e[13];let d;e[14]!==V?(d=s.jsx(be,{title:"Catégories de dépenses",description:V,breadcrumb:I,actions:$}),e[14]=V,e[15]=d):d=e[15];let m;e[16]!==i?(m=i?.success&&s.jsx(te,{className:"mb-6",children:s.jsx(ae,{children:i.success})}),e[16]=i,e[17]=m):m=e[17];let h;e[18]!==i?(h=i?.error&&s.jsx(te,{variant:"destructive",className:"mb-6",children:s.jsx(ae,{children:i.error})}),e[18]=i,e[19]=h):h=e[19];let z;e[20]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e[20]=z):z=e[20];let L;e[21]===Symbol.for("react.memo_cache_sentinel")?(L=t=>re(t.target.value),e[21]=L):L=e[21];let f;e[22]!==c?(f=s.jsx("div",{className:"flex-1",children:s.jsxs("div",{className:"relative",children:[z,s.jsx(Y,{placeholder:"Rechercher une catégorie...",value:c,onChange:L,className:"pl-10"})]})}),e[22]=c,e[23]=f):f=e[23];let x;e[24]!==l.per_page?(x=l.per_page?.toString()||"15",e[24]=l.per_page,e[25]=x):x=e[25];let p;e[26]!==O?(p=t=>O("per_page",t.target.value),e[26]=O,e[27]=p):p=e[27];let q,U,X,G;e[28]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx("option",{value:"10",children:"10"}),U=s.jsx("option",{value:"15",children:"15"}),X=s.jsx("option",{value:"25",children:"25"}),G=s.jsx("option",{value:"50",children:"50"}),e[28]=q,e[29]=U,e[30]=X,e[31]=G):(q=e[28],U=e[29],X=e[30],G=e[31]);let u;e[32]!==x||e[33]!==p?(u=s.jsx("div",{className:"flex gap-2",children:s.jsxs("select",{value:x,onChange:p,className:"border rounded-lg px-3 py-2 text-sm",children:[q,U,X,G]})}),e[32]=x,e[33]=p,e[34]=u):u=e[34];let j;e[35]!==f||e[36]!==u?(j=s.jsx("div",{className:"bg-card rounded-lg border p-4 mb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[f,u]})}),e[35]=f,e[36]=u,e[37]=j):j=e[37];let J;e[38]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx(me,{children:s.jsxs(Z,{children:[s.jsx(y,{children:"Catégorie"}),s.jsx(y,{children:"Code"}),s.jsx(y,{children:"Statut"}),s.jsx(y,{children:"Créé le"}),s.jsx(y,{className:"text-right",children:"Actions"})]})}),e[38]=J):J=e[38];let g;e[39]!==a.data||e[40]!==n||e[41]!==r||e[42]!==Q?(g=a.data.length===0?s.jsx(Z,{children:s.jsxs(N,{colSpan:5,className:"text-center py-8 text-muted-foreground",children:[s.jsx(Ne,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),s.jsx("p",{className:"text-lg",children:"Aucune catégorie trouvée"})]})}):a.data.map(t=>s.jsxs(Z,{className:"hover:bg-muted/50",children:[s.jsx(N,{children:n===t.id?s.jsx(Y,{value:r.nom_categorie,onChange:o=>S({...r,nom_categorie:o.target.value}),className:"mb-2"}):s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:t.nom_categorie}),t.description&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:t.description})]})}),s.jsx(N,{children:n===t.id?s.jsx(Y,{value:r.code,onChange:o=>S({...r,code:o.target.value})}):s.jsx("code",{className:"text-sm bg-muted px-2 py-1 rounded",children:t.code})}),s.jsx(N,{children:n===t.id?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(pe,{checked:r.est_actif,onCheckedChange:o=>S({...r,est_actif:o===!0})}),s.jsx("label",{className:"text-sm",children:r.est_actif?"Actif":"Inactif"})]}):s.jsx(xe,{variant:t.est_actif?"default":"secondary",children:t.est_actif?s.jsxs(s.Fragment,{children:[s.jsx(Se,{className:"h-3 w-3 mr-1"}),"Actif"]}):s.jsxs(s.Fragment,{children:[s.jsx(Ce,{className:"h-3 w-3 mr-1"}),"Inactif"]})})}),s.jsx(N,{children:s.jsx("div",{className:"text-sm",children:new Date(t.created_at).toLocaleDateString("fr-FR")})}),s.jsx(N,{className:"text-right",children:n===t.id?s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(C,{variant:"outline",size:"sm",onClick:se,children:"Annuler"}),s.jsx(C,{size:"sm",onClick:()=>Q(t.id),children:"Sauvegarder"})]}):s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(C,{variant:"ghost",size:"sm",onClick:()=>le(t),children:s.jsx(ye,{className:"h-4 w-4"})}),s.jsx(C,{variant:"ghost",size:"sm",onClick:()=>ie(t),className:"text-destructive",children:s.jsx(we,{className:"h-4 w-4"})})]})})]},t.id)),e[39]=a.data,e[40]=n,e[41]=r,e[42]=Q,e[43]=g):g=e[43];let v;e[44]!==g?(v=s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(he,{children:[J,s.jsx(fe,{children:g})]})}),e[44]=g,e[45]=v):v=e[45];let b;e[46]!==a.current_page||e[47]!==a.last_page||e[48]!==l?(b=a.last_page>1&&s.jsx("div",{className:"border-t p-4",children:s.jsx(ue,{currentPage:a.current_page,totalPages:a.last_page,onPageChange:t=>{w.get("/categories-depense",{...l,page:t},{preserveState:!0,replace:!0})}})}),e[46]=a.current_page,e[47]=a.last_page,e[48]=l,e[49]=b):b=e[49];let _;e[50]!==v||e[51]!==b?(_=s.jsxs("div",{className:"bg-card rounded-lg border overflow-hidden",children:[v,b]}),e[50]=v,e[51]=b,e[52]=_):_=e[52];let K;return e[53]!==M||e[54]!==d||e[55]!==m||e[56]!==h||e[57]!==j||e[58]!==_?(K=s.jsxs(s.Fragment,{children:[E,s.jsxs(ve,{activeRoute:"/categories-depense",auth:M,children:[d,m,h,j,_]})]}),e[53]=M,e[54]=d,e[55]=m,e[56]=h,e[57]=j,e[58]=_,e[59]=K):K=e[59],K}function De(D){confirm(`Êtes-vous sûr de vouloir supprimer "${D.nom_categorie}" ?`)&&w.delete(`/categories-depense/${D.id}`)}export{We as default};
