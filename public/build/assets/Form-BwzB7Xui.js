import{c as Be,u as He,r as $e,j as t,H as ze,L as Fe,b as Ie}from"./app-uwTh8kc8.js";import{B as de}from"./createLucideIcon-DSBG54g9.js";import{I as Ae}from"./input-DaOSUk8-.js";import{L as me}from"./label-RJwncgua.js";import{T as Ue}from"./textarea-D0KQKO-r.js";import{C as Pe}from"./checkbox-CmvZIZGZ.js";import{A as we,a as Ee}from"./alert-CtmFnCz8.js";import{a as Le,C as Re,d as Te,c as ke,e as Ze,b as Me}from"./card-BU11wq9A.js";import{h as Ge,D as Ke}from"./DashboardLayout-K8fs0Cfm.js";import{P as Ve}from"./PageHeader-DJwfSSVd.js";import{A as Xe}from"./arrow-left-tIpnA9bm.js";import{F as Je}from"./folder-BiqWVdBK.js";import{X as Oe}from"./index-CAUyR_uV.js";import{S as Qe}from"./save-ByI6Z74q.js";import{T as We}from"./trash-2-onJN5Qfj.js";/* empty css            */import"./index-B9MI8Zig.js";import"./check-_y--m_do.js";import"./users-pKpEsxQA.js";import"./user-B129w1wL.js";import"./house-Cqq7iTIU.js";function bt(qe){const e=Be.c(127),{categorie:l,flash:o}=qe,c=!!l,n=c?"Modifier la catégorie":"Nouvelle catégorie",U=c?`/categories-depense/${l.id}`:"/categories-depense",fe=l?.nom_categorie||"",pe=l?.code||"",ue=l?.description||"",xe=l?.est_actif??!0;let P;e[0]!==fe||e[1]!==pe||e[2]!==ue||e[3]!==xe?(P={nom_categorie:fe,code:pe,description:ue,est_actif:xe},e[0]=fe,e[1]=pe,e[2]=ue,e[3]=xe,e[4]=P):P=e[4];const{data:s,setData:i,post:he,put:ge,processing:Z,errors:r,reset:G}=He(P);let K;e[5]!==o?.success?(K=()=>{o?.success&&setTimeout(Ye,2e3)},e[5]=o?.success,e[6]=K):K=e[6];const je=o?.success;let V;e[7]!==je?(V=[je],e[7]=je,e[8]=V):V=e[8],$e.useEffect(K,V);let X;e[9]!==c||e[10]!==he||e[11]!==ge||e[12]!==G||e[13]!==U?(X=a=>{a.preventDefault(),c?ge(U,{preserveScroll:!0,onSuccess:()=>G()}):he(U,{preserveScroll:!0,onSuccess:()=>G()})},e[9]=c,e[10]=he,e[11]=ge,e[12]=G,e[13]=U,e[14]=X):X=e[14];const _e=X;let J;e[15]!==s.code||e[16]!==s.nom_categorie||e[17]!==i?(J=()=>{if(!s.nom_categorie||s.code)return;const a=s.nom_categorie.toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^A-Z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"").slice(0,20);i("code",a)},e[15]=s.code,e[16]=s.nom_categorie,e[17]=i,e[18]=J):J=e[18];const ve=J;let d;e[19]!==n?(d=t.jsx(ze,{title:n}),e[19]=n,e[20]=d):d=e[20];const be=c?"Modifier les informations de la catégorie":"Créer une nouvelle catégorie de dépense";let O,Q,W;e[21]===Symbol.for("react.memo_cache_sentinel")?(O={label:"Dashboard",href:"/dashboard"},Q={label:"Budgets",href:"/budgets"},W={label:"Catégories",href:"/categories-depense"},e[21]=O,e[22]=Q,e[23]=W):(O=e[21],Q=e[22],W=e[23]);let m;e[24]!==n?(m=[O,Q,W,{label:n,href:"#"}],e[24]=n,e[25]=m):m=e[25];let Y;e[26]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx("div",{className:"flex items-center gap-2",children:t.jsx(Fe,{href:"/categories-depense",children:t.jsxs(de,{variant:"outline",children:[t.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Retour"]})})}),e[26]=Y):Y=e[26];let f;e[27]!==be||e[28]!==m||e[29]!==n?(f=t.jsx(Ve,{title:n,description:be,breadcrumb:m,actions:Y}),e[27]=be,e[28]=m,e[29]=n,e[30]=f):f=e[30];let p;e[31]!==o?(p=o?.success&&t.jsx(we,{className:"mb-6",children:t.jsx(Ee,{children:o.success})}),e[31]=o,e[32]=p):p=e[32];let u;e[33]!==o?(u=o?.error&&t.jsx(we,{variant:"destructive",className:"mb-6",children:t.jsx(Ee,{children:o.error})}),e[33]=o,e[34]=u):u=e[34];let ee;e[35]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsxs(Le,{className:"flex items-center gap-2",children:[t.jsx(Je,{className:"h-5 w-5 text-primary"}),"Informations de la catégorie"]}),e[35]=ee):ee=e[35];const Ne=c?"modifier":"créer";let x;e[36]!==Ne?(x=t.jsxs(Re,{children:[ee,t.jsxs(Te,{children:["Remplissez les informations ci-dessous pour ",Ne," la catégorie de dépense"]})]}),e[36]=Ne,e[37]=x):x=e[37];let h;e[38]!==l||e[39]!==c?(h=c&&l.ref&&t.jsxs("div",{className:"text-sm text-muted-foreground",children:["Référence: ",l.ref]}),e[38]=l,e[39]=c,e[40]=h):h=e[40];let te;e[41]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(me,{htmlFor:"nom_categorie",children:"Nom de la catégorie *"}),e[41]=te):te=e[41];let g;e[42]!==i?(g=a=>i("nom_categorie",a.target.value),e[42]=i,e[43]=g):g=e[43];const Ce=r.nom_categorie?"border-destructive":"";let j;e[44]!==s.nom_categorie||e[45]!==ve||e[46]!==g||e[47]!==Ce?(j=t.jsx(Ae,{id:"nom_categorie",value:s.nom_categorie,onChange:g,onBlur:ve,placeholder:"Ex: Marketing, Développement, Administration",className:Ce,required:!0}),e[44]=s.nom_categorie,e[45]=ve,e[46]=g,e[47]=Ce,e[48]=j):j=e[48];let _;e[49]!==r.nom_categorie?(_=r.nom_categorie&&t.jsx("p",{className:"text-sm text-destructive",children:r.nom_categorie}),e[49]=r.nom_categorie,e[50]=_):_=e[50];let v;e[51]!==j||e[52]!==_?(v=t.jsxs("div",{className:"space-y-2",children:[te,j,_]}),e[51]=j,e[52]=_,e[53]=v):v=e[53];let se;e[54]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(me,{htmlFor:"code",children:"Code unique *"}),e[54]=se):se=e[54];let b;e[55]!==i?(b=a=>i("code",a.target.value),e[55]=i,e[56]=b):b=e[56];const ye=r.code?"border-destructive":"";let N;e[57]!==s.code||e[58]!==b||e[59]!==ye?(N=t.jsx(Ae,{id:"code",value:s.code,onChange:b,placeholder:"Ex: MARKETING, DEV, ADMIN",className:ye,required:!0}),e[57]=s.code,e[58]=b,e[59]=ye,e[60]=N):N=e[60];let C;e[61]!==r.code?(C=r.code&&t.jsx("p",{className:"text-sm text-destructive",children:r.code}),e[61]=r.code,e[62]=C):C=e[62];let re;e[63]===Symbol.for("react.memo_cache_sentinel")?(re=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Code unique en majuscules (utilisé pour les références)"}),e[63]=re):re=e[63];let y;e[64]!==N||e[65]!==C?(y=t.jsxs("div",{className:"space-y-2",children:[se,N,C,re]}),e[64]=N,e[65]=C,e[66]=y):y=e[66];let S;e[67]!==v||e[68]!==y?(S=t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v,y]}),e[67]=v,e[68]=y,e[69]=S):S=e[69];let ie;e[70]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(me,{htmlFor:"description",children:"Description"}),e[70]=ie):ie=e[70];let D;e[71]!==i?(D=a=>i("description",a.target.value),e[71]=i,e[72]=D):D=e[72];const Se=r.description?"border-destructive":"";let F;e[73]!==s.description||e[74]!==D||e[75]!==Se?(F=t.jsx(Ue,{id:"description",value:s.description,onChange:D,placeholder:"Description détaillée de la catégorie...",rows:3,className:Se}),e[73]=s.description,e[74]=D,e[75]=Se,e[76]=F):F=e[76];let A;e[77]!==r.description?(A=r.description&&t.jsx("p",{className:"text-sm text-destructive",children:r.description}),e[77]=r.description,e[78]=A):A=e[78];let w;e[79]!==F||e[80]!==A?(w=t.jsxs("div",{className:"space-y-2",children:[ie,F,A]}),e[79]=F,e[80]=A,e[81]=w):w=e[81];let E;e[82]!==i?(E=a=>i("est_actif",a===!0),e[82]=i,e[83]=E):E=e[83];let L;e[84]!==s.est_actif||e[85]!==E?(L=t.jsx(Pe,{id:"est_actif",checked:s.est_actif,onCheckedChange:E}),e[84]=s.est_actif,e[85]=E,e[86]=L):L=e[86];let ce;e[87]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(me,{htmlFor:"est_actif",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Catégorie active"}),e[87]=ce):ce=e[87];let R;e[88]!==L?(R=t.jsxs("div",{className:"flex items-center space-x-2 pt-4",children:[L,ce]}),e[88]=L,e[89]=R):R=e[89];let T;e[90]!==r.est_actif?(T=r.est_actif&&t.jsx("p",{className:"text-sm text-destructive",children:r.est_actif}),e[90]=r.est_actif,e[91]=T):T=e[91];let k;e[92]!==S||e[93]!==w||e[94]!==R||e[95]!==T?(k=t.jsxs("div",{className:"space-y-4",children:[S,w,R,T]}),e[92]=S,e[93]=w,e[94]=R,e[95]=T,e[96]=k):k=e[96];let M;e[97]!==h||e[98]!==k?(M=t.jsxs(ke,{className:"space-y-6",children:[h,k]}),e[97]=h,e[98]=k,e[99]=M):M=e[99];let le;e[100]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx(Ge,{}),e[100]=le):le=e[100];let oe;e[101]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsx(Fe,{href:"/categories-depense",children:t.jsxs(de,{type:"button",variant:"outline",children:[t.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Annuler"]})}),e[101]=oe):oe=e[101];let ae;e[102]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(Qe,{className:"h-4 w-4 mr-2"}),e[102]=ae):ae=e[102];const De=Z?"Enregistrement...":c?"Mettre à jour":"Créer";let I;e[103]!==Z||e[104]!==De?(I=t.jsxs(Ze,{className:"flex justify-between p-6",children:[oe,t.jsxs(de,{type:"submit",disabled:Z,children:[ae,De]})]}),e[103]=Z,e[104]=De,e[105]=I):I=e[105];let q;e[106]!==_e||e[107]!==M||e[108]!==I?(q=t.jsxs("form",{onSubmit:_e,children:[M,le,I]}),e[106]=_e,e[107]=M,e[108]=I,e[109]=q):q=e[109];let B;e[110]!==x||e[111]!==q?(B=t.jsxs(Me,{children:[x,q]}),e[110]=x,e[111]=q,e[112]=B):B=e[112];let H;e[113]!==l||e[114]!==c?(H=c&&t.jsxs(Me,{className:"mt-6 border-destructive/20",children:[t.jsxs(Re,{children:[t.jsx(Le,{className:"text-destructive",children:"Zone dangereuse"}),t.jsx(Te,{children:"Actions irréversibles sur cette catégorie"})]}),t.jsx(ke,{children:t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"p-4 border border-destructive/20 rounded-lg",children:[t.jsx("h4",{className:"font-medium text-destructive mb-2",children:"Supprimer la catégorie"}),t.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Une fois supprimée, cette catégorie ne pourra plus être utilisée pour les nouvelles dépenses. Les dépenses existantes conserveront cette catégorie."}),t.jsxs(de,{variant:"destructive",size:"sm",onClick:()=>{confirm("Êtes-vous sûr de vouloir supprimer cette catégorie ?")&&Ie.delete(`/categories-depense/${l.id}`)},children:[t.jsx(We,{className:"h-4 w-4 mr-2"}),"Supprimer la catégorie"]})]})})})]}),e[113]=l,e[114]=c,e[115]=H):H=e[115];let $;e[116]!==B||e[117]!==H?($=t.jsxs("div",{className:"max-w-2xl mx-auto",children:[B,H]}),e[116]=B,e[117]=H,e[118]=$):$=e[118];let z;e[119]!==f||e[120]!==p||e[121]!==u||e[122]!==$?(z=t.jsxs(Ke,{activeRoute:"/categories-depense",children:[f,p,u,$]}),e[119]=f,e[120]=p,e[121]=u,e[122]=$,e[123]=z):z=e[123];let ne;return e[124]!==d||e[125]!==z?(ne=t.jsxs(t.Fragment,{children:[d,z]}),e[124]=d,e[125]=z,e[126]=ne):ne=e[126],ne}function Ye(){Ie.visit("/categories-depense")}export{bt as default};
