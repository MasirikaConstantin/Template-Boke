import{c as es,r as ss,j as s,L as ee,H as ts}from"./app-CaSuT9_N.js";import{c as as,B as i}from"./createLucideIcon-Ba_n5wzm.js";import{B as Ie}from"./badge-BycwKJGT.js";import{b as ke,c as qe,C as $e,a as Pe,d as ls}from"./card-DXDaqayI.js";import{F as Oe,h as He,D as is}from"./DashboardLayout-D3biXWsh.js";import{b as Je,a as Qe,T as rs,c as cs}from"./tabs-CCO3yjqj.js";import{l as ns}from"./index-Ce4F7OWD.js";import ms from"./PrintPaiementFrais-C7kV3vbQ.js";import{U as Ge}from"./user-CaRkRDV5.js";import{H as Be}from"./history-wyfLHpfZ.js";import{P as ds}from"./printer-Czq0KO4h.js";import{A as Ke}from"./arrow-left-DbNJAoRv.js";import{S as We}from"./square-pen-D_NNKCOr.js";import{R as Xe}from"./receipt-BteJoy9w.js";import{C as Ee}from"./users-BBd633YC.js";import{C as os}from"./clock-DWHLeP7W.js";/* empty css            */import"./index-t60Ru8hF.js";/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],xs=as("circle-user",fs);function As(a){const e=es.c(150),{paiement:t}=a,se=Ns,Ve=js,Ye=us,Ze=ps,ze=ss.useRef(null),Fe=`Quittance_${t.reference}_${t.eleve.nom_complet}`;let te;e[0]!==Fe?(te={contentRef:ze,documentTitle:Fe},e[0]=Fe,e[1]=te):te=e[1];const Le=ns.useReactToPrint(te),Ue=`Détails: ${t.reference}`;let r;e[2]!==Ue?(r=s.jsx(ts,{title:Ue}),e[2]=Ue,e[3]=r):r=e[3];let c;e[4]!==t.reference?(c=s.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:["Paiement ",t.reference]}),e[4]=t.reference,e[5]=c):c=e[5];let n;e[6]!==t.montant?(n=Ve(t.montant),e[6]=t.montant,e[7]=n):n=e[7];let m;e[8]!==t.date_paiement?(m=se(t.date_paiement),e[8]=t.date_paiement,e[9]=m):m=e[9];let d;e[10]!==n||e[11]!==m?(d=s.jsxs("p",{className:"text-muted-foreground",children:[n," • ",m]}),e[10]=n,e[11]=m,e[12]=d):d=e[12];let o;e[13]!==c||e[14]!==d?(o=s.jsxs("div",{children:[c,d]}),e[13]=c,e[14]=d,e[15]=o):o=e[15];let ae;e[16]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx(ds,{className:"h-4 w-4 mr-2"}),e[16]=ae):ae=e[16];let f;e[17]!==Le?(f=s.jsxs(i,{variant:"outline",size:"sm",onClick:Le,children:[ae,"Imprimer"]}),e[17]=Le,e[18]=f):f=e[18];let le;e[19]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsx(ee,{href:"/paiements",children:s.jsxs(i,{variant:"outline",size:"sm",children:[s.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Retour"]})}),e[19]=le):le=e[19];const Ae=`/paiements/${t.id}/edit`;let ie;e[20]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsxs(i,{size:"sm",children:[s.jsx(We,{className:"h-4 w-4 mr-2"}),"Modifier"]}),e[20]=ie):ie=e[20];let x;e[21]!==Ae?(x=s.jsx(ee,{href:Ae,children:ie}),e[21]=Ae,e[22]=x):x=e[22];let h;e[23]!==f||e[24]!==x?(h=s.jsxs("div",{className:"flex items-center gap-2",children:[f,le,x]}),e[23]=f,e[24]=x,e[25]=h):h=e[25];let p;e[26]!==h||e[27]!==o?(p=s.jsxs("div",{className:"flex items-center justify-between",children:[o,h]}),e[26]=h,e[27]=o,e[28]=p):p=e[28];let re;e[29]===Symbol.for("react.memo_cache_sentinel")?(re=s.jsxs(Qe,{value:"details",className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"h-4 w-4"}),"Détails"]}),e[29]=re):re=e[29];let ce;e[30]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsx(Be,{className:"h-4 w-4"}),e[30]=ce):ce=e[30];let u;e[31]!==t.historique_paiements?(u=t.historique_paiements&&s.jsx(Ie,{variant:"outline",className:"ml-1",children:t.historique_paiements.length}),e[31]=t.historique_paiements,e[32]=u):u=e[32];let j;e[33]!==u?(j=s.jsxs(rs,{children:[re,s.jsxs(Qe,{value:"history",className:"flex items-center gap-2",children:[ce,"Historique",u]})]}),e[33]=u,e[34]=j):j=e[34];let ne;e[35]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx($e,{children:s.jsxs(Pe,{className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"h-5 w-5"}),"Informations principales"]})}),e[35]=ne):ne=e[35];let me;e[36]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Référence"}),e[36]=me):me=e[36];let N;e[37]!==t.reference?(N=s.jsxs("div",{className:"space-y-2",children:[me,s.jsx("div",{className:"font-mono text-lg font-semibold",children:t.reference})]}),e[37]=t.reference,e[38]=N):N=e[38];let de;e[39]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Montant"}),e[39]=de):de=e[39];let _;e[40]!==t.montant?(_=Ve(t.montant),e[40]=t.montant,e[41]=_):_=e[41];let v;e[42]!==_?(v=s.jsxs("div",{className:"space-y-2",children:[de,s.jsx("div",{className:"text-2xl font-bold text-primary",children:_})]}),e[42]=_,e[43]=v):v=e[43];let oe;e[44]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Mode de paiement"}),e[44]=oe):oe=e[44];let g;e[45]!==t.mode_paiement?(g=Ye(t.mode_paiement),e[45]=t.mode_paiement,e[46]=g):g=e[46];let y;e[47]!==t.numero_cheque?(y=t.numero_cheque&&s.jsxs("span",{className:"text-sm text-muted-foreground",children:["• N° ",t.numero_cheque]}),e[47]=t.numero_cheque,e[48]=y):y=e[48];let b;e[49]!==g||e[50]!==y?(b=s.jsxs("div",{className:"space-y-2",children:[oe,s.jsxs("div",{className:"flex items-center gap-2",children:[g,y]})]}),e[49]=g,e[50]=y,e[51]=b):b=e[51];let fe;e[52]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Date de paiement"}),e[52]=fe):fe=e[52];let xe;e[53]===Symbol.for("react.memo_cache_sentinel")?(xe=s.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"}),e[53]=xe):xe=e[53];let w;e[54]!==t.date_paiement?(w=se(t.date_paiement),e[54]=t.date_paiement,e[55]=w):w=e[55];let S;e[56]!==w?(S=s.jsxs("div",{className:"space-y-2",children:[fe,s.jsxs("div",{className:"flex items-center gap-2",children:[xe,s.jsx("span",{className:"font-medium",children:w})]})]}),e[56]=w,e[57]=S):S=e[57];let C;e[58]!==N||e[59]!==v||e[60]!==b||e[61]!==S?(C=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[N,v,b,S]}),e[58]=N,e[59]=v,e[60]=b,e[61]=S,e[62]=C):C=e[62];let he;e[63]===Symbol.for("react.memo_cache_sentinel")?(he=s.jsx(He,{}),e[63]=he):he=e[63];let D;e[64]!==t.eleve?(D=t.eleve&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ge,{className:"h-5 w-5 text-primary"}),s.jsx("h3",{className:"font-semibold",children:"Élève"})]}),s.jsx("div",{className:"space-y-2 pl-7",children:s.jsxs("div",{children:[s.jsxs("div",{className:"font-medium",children:[t.eleve.nom," ",t.eleve.prenom]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Réf: ",t.eleve.ref]})]})})]}),e[64]=t.eleve,e[65]=D):D=e[65];let R;e[66]!==t.tranche?(R=t.tranche&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Oe,{className:"h-5 w-5 text-primary"}),s.jsx("h3",{className:"font-semibold",children:"Tranche"})]}),s.jsx("div",{className:"space-y-2 pl-7",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:t.tranche.nom_tranche}),s.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[s.jsxs("div",{children:["Ordre: #",t.tranche.ordre]}),s.jsxs("div",{children:["Limite: ",new Date(t.tranche.date_limite).toLocaleDateString("fr-FR")]}),t.tranche.configuration_frais&&s.jsxs("div",{children:["Configuration: ",t.tranche.configuration_frais.nom_frais]})]})]})})]}),e[66]=t.tranche,e[67]=R):R=e[67];let T;e[68]!==D||e[69]!==R?(T=s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[D,R]}),e[68]=D,e[69]=R,e[70]=T):T=e[70];let k;e[71]!==t.commentaire?(k=t.commentaire&&s.jsxs(s.Fragment,{children:[s.jsx(He,{}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Commentaire"}),s.jsx("div",{className:"bg-muted/50 p-4 rounded-lg",children:s.jsx("p",{className:"whitespace-pre-wrap",children:t.commentaire})})]})]}),e[71]=t.commentaire,e[72]=k):k=e[72];let pe;e[73]===Symbol.for("react.memo_cache_sentinel")?(pe=s.jsx(He,{}),e[73]=pe):pe=e[73];let ue;e[74]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xs,{className:"h-5 w-5 text-primary"}),s.jsx("h3",{className:"font-semibold",children:"Enregistré par"})]}),e[74]=ue):ue=e[74];let q;e[75]!==t.user.name?(q=t.user.name.charAt(0).toUpperCase(),e[75]=t.user.name,e[76]=q):q=e[76];let $;e[77]!==q?($=s.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-bold",children:q})}),e[77]=q,e[78]=$):$=e[78];let P;e[79]!==t.user.name?(P=s.jsx("div",{className:"font-medium",children:t.user.name}),e[79]=t.user.name,e[80]=P):P=e[80];let F;e[81]!==t.user.email?(F=s.jsx("div",{className:"text-sm text-muted-foreground",children:t.user.email}),e[81]=t.user.email,e[82]=F):F=e[82];let L;e[83]!==P||e[84]!==F?(L=s.jsxs("div",{children:[P,F]}),e[83]=P,e[84]=F,e[85]=L):L=e[85];let U;e[86]!==$||e[87]!==L?(U=s.jsxs("div",{className:"space-y-3",children:[ue,s.jsxs("div",{className:"flex items-center gap-3 pl-7",children:[$,L]})]}),e[86]=$,e[87]=L,e[88]=U):U=e[88];let A;e[89]!==C||e[90]!==T||e[91]!==k||e[92]!==U?(A=s.jsxs(ke,{className:"lg:col-span-2",children:[ne,s.jsxs(qe,{className:"space-y-6",children:[C,he,T,k,pe,U]})]}),e[89]=C,e[90]=T,e[91]=k,e[92]=U,e[93]=A):A=e[93];let je;e[94]===Symbol.for("react.memo_cache_sentinel")?(je=s.jsx($e,{children:s.jsxs(Pe,{className:"flex items-center gap-2",children:[s.jsx(os,{className:"h-5 w-5"}),"Métadonnées"]})}),e[94]=je):je=e[94];let Ne;e[95]===Symbol.for("react.memo_cache_sentinel")?(Ne=s.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Créé le"}),e[95]=Ne):Ne=e[95];let _e;e[96]===Symbol.for("react.memo_cache_sentinel")?(_e=s.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"}),e[96]=_e):_e=e[96];let M;e[97]!==t.created_at?(M=se(t.created_at),e[97]=t.created_at,e[98]=M):M=e[98];let H;e[99]!==M?(H=s.jsxs("div",{className:"space-y-2",children:[Ne,s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[_e,M]})]}),e[99]=M,e[100]=H):H=e[100];let ve;e[101]===Symbol.for("react.memo_cache_sentinel")?(ve=s.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Dernière modification"}),e[101]=ve):ve=e[101];let ge;e[102]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"}),e[102]=ge):ge=e[102];let B;e[103]!==t.updated_at?(B=se(t.updated_at),e[103]=t.updated_at,e[104]=B):B=e[104];let E;e[105]!==B?(E=s.jsxs("div",{className:"space-y-2",children:[ve,s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[ge,B]})]}),e[105]=B,e[106]=E):E=e[106];let ye;e[107]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"ID"}),e[107]=ye):ye=e[107];let I;e[108]!==t.id?(I=s.jsxs("div",{className:"space-y-2",children:[ye,s.jsx("div",{className:"font-mono text-sm bg-muted p-2 rounded",children:t.id})]}),e[108]=t.id,e[109]=I):I=e[109];let V;e[110]!==H||e[111]!==E||e[112]!==I?(V=s.jsxs(ke,{children:[je,s.jsxs(qe,{className:"space-y-4",children:[H,E,I]})]}),e[110]=H,e[111]=E,e[112]=I,e[113]=V):V=e[113];let be;e[114]===Symbol.for("react.memo_cache_sentinel")?(be=s.jsx($e,{children:s.jsx(Pe,{className:"text-base",children:"Actions rapides"})}),e[114]=be):be=e[114];const Me=`/paiements/${t.id}/edit`;let we;e[115]===Symbol.for("react.memo_cache_sentinel")?(we=s.jsxs(i,{variant:"outline",className:"w-full justify-start",children:[s.jsx(We,{className:"h-4 w-4 mr-2"}),"Modifier ce paiement"]}),e[115]=we):we=e[115];let z;e[116]!==Me?(z=s.jsx(ee,{href:Me,className:"block",children:we}),e[116]=Me,e[117]=z):z=e[117];let O;e[118]!==t.eleve?(O=t.eleve&&s.jsx(ee,{href:`/eleves/${t.eleve.id}`,className:"block",children:s.jsxs(i,{variant:"outline",className:"w-full justify-start",children:[s.jsx(Ge,{className:"h-4 w-4 mr-2"}),"Voir l'élève"]})}),e[118]=t.eleve,e[119]=O):O=e[119];let J;e[120]!==t.tranche?(J=t.tranche&&s.jsx(ee,{href:`/tranches/${t.tranche.id}`,className:"block",children:s.jsxs(i,{variant:"outline",className:"w-full justify-start",children:[s.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Voir la tranche"]})}),e[120]=t.tranche,e[121]=J):J=e[121];let Se;e[122]===Symbol.for("react.memo_cache_sentinel")?(Se=s.jsx(ee,{href:"/paiements",className:"block",children:s.jsxs(i,{variant:"outline",className:"w-full justify-start",children:[s.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Retour à la liste"]})}),e[122]=Se):Se=e[122];let Q;e[123]!==z||e[124]!==O||e[125]!==J?(Q=s.jsxs(ke,{children:[be,s.jsxs(qe,{className:"space-y-3",children:[z,O,J,Se]})]}),e[123]=z,e[124]=O,e[125]=J,e[126]=Q):Q=e[126];let G;e[127]!==V||e[128]!==Q?(G=s.jsxs("div",{className:"space-y-6",children:[V,Q]}),e[127]=V,e[128]=Q,e[129]=G):G=e[129];let K;e[130]!==A||e[131]!==G?(K=s.jsx(Je,{value:"details",className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[A,G]})}),e[130]=A,e[131]=G,e[132]=K):K=e[132];let Ce;e[133]===Symbol.for("react.memo_cache_sentinel")?(Ce=s.jsxs($e,{children:[s.jsxs(Pe,{className:"flex items-center gap-2",children:[s.jsx(Be,{className:"h-5 w-5"}),"Historique des modifications"]}),s.jsx(ls,{children:"Suivi complet des actions sur ce paiement"})]}),e[133]=Ce):Ce=e[133];let W;e[134]!==t.historique_paiements?(W=s.jsx(Je,{value:"history",className:"space-y-6",children:s.jsxs(ke,{children:[Ce,s.jsx(qe,{children:t.historique_paiements&&t.historique_paiements.length>0?s.jsx("div",{className:"space-y-4",children:t.historique_paiements.sort(hs).map(l=>{const Te=Ze(l.details);return s.jsxs("div",{className:"flex gap-4 pb-4 border-b last:border-0 last:pb-0",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"h-10 w-10 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx("span",{className:"text-sm font-bold",children:l.user.name.charAt(0).toUpperCase()})})}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"font-medium",children:l.user.name}),s.jsx("div",{className:"text-sm text-muted-foreground",children:se(l.created_at)})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(Ie,{variant:l.action==="création"?"default":l.action==="modification"?"secondary":"destructive",children:l.action.charAt(0).toUpperCase()+l.action.slice(1)})}),Te&&s.jsx("div",{className:"text-sm text-muted-foreground bg-muted/50 p-3 rounded",children:typeof Te=="string"?s.jsx("p",{children:Te}):s.jsx("pre",{className:"whitespace-pre-wrap text-xs",children:JSON.stringify(Te,null,2)})})]})]},l.id)})}):s.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[s.jsx(Be,{className:"h-12 w-12 mx-auto mb-4 opacity-20"}),s.jsx("p",{children:"Aucun historique disponible"})]})})]})}),e[134]=t.historique_paiements,e[135]=W):W=e[135];let X;e[136]!==j||e[137]!==K||e[138]!==W?(X=s.jsxs(cs,{defaultValue:"details",className:"space-y-6",children:[j,K,W]}),e[136]=j,e[137]=K,e[138]=W,e[139]=X):X=e[139];let De;e[140]===Symbol.for("react.memo_cache_sentinel")?(De={display:"none"},e[140]=De):De=e[140];let Y;e[141]!==t?(Y=s.jsx("div",{style:De,children:s.jsx(ms,{ref:ze,paiement:t})}),e[141]=t,e[142]=Y):Y=e[142];let Z;e[143]!==p||e[144]!==X||e[145]!==Y?(Z=s.jsx(is,{activeRoute:"/paiements",children:s.jsxs("div",{className:"space-y-6",children:[p,X,Y]})}),e[143]=p,e[144]=X,e[145]=Y,e[146]=Z):Z=e[146];let Re;return e[147]!==r||e[148]!==Z?(Re=s.jsxs(s.Fragment,{children:[r,Z]}),e[147]=r,e[148]=Z,e[149]=Re):Re=e[149],Re}function hs(a,e){return new Date(e.created_at).getTime()-new Date(a.created_at).getTime()}function ps(a){if(!a)return null;try{return JSON.parse(a)}catch{return a}}function us(a){const e={espèce:"bg-green-100 text-green-800 border-green-200",chèque:"bg-blue-100 text-blue-800 border-blue-200",virement:"bg-purple-100 text-purple-800 border-purple-200",mobile_money:"bg-orange-100 text-orange-800 border-orange-200"};return s.jsx(Ie,{variant:"outline",className:`${e[a]} border`,children:a.charAt(0).toUpperCase()+a.slice(1)})}function js(a){return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"USD"}).format(a).replace("$US","$")}function Ns(a){return new Date(a).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})}export{As as default};
