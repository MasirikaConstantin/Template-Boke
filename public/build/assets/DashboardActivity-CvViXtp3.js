import{c as A,j as e,r as x,H as v,L as h}from"./app-DZJrMNxY.js";import{b as c,c as d,C as b,a as w,d as y}from"./card-BBrqGEX4.js";import{c as E,a as S,B as j}from"./createLucideIcon-BS6ALbkr.js";import{A as T,a as L}from"./alert-TWt91VRb.js";import{C as U}from"./circle-alert-CpBjwd-Z.js";import{R as F}from"./refresh-cw-CziV05-4.js";import{C as _,a as u,U as C}from"./users-suUgY7hg.js";import{W as f}from"./wallet-CpkGRNbZ.js";import{T as N}from"./trending-down-DKewER_5.js";import{T as k}from"./trending-up-CEovwgWH.js";import{S as B}from"./school-B3KBvopg.js";/* empty css            *//**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],I=E("arrow-down-right",H);/**
 * @license lucide-react v0.559.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],z=E("arrow-up-right",M);function t(i){const r=A.c(8);let l,n;r[0]!==i?({className:l,...n}=i,r[0]=i,r[1]=l,r[2]=n):(l=r[1],n=r[2]);let a;r[3]!==l?(a=S("bg-accent animate-pulse rounded-md",l),r[3]=l,r[4]=a):a=r[4];let m;return r[5]!==n||r[6]!==a?(m=e.jsx("div",{"data-slot":"skeleton",className:a,...n}),r[5]=n,r[6]=a,r[7]=m):m=r[7],m}function ee(){const[i,r]=x.useState(!0),[l,n]=x.useState(null),[a,m]=x.useState({stats:[],recent_activities:[],system_overview:{eleves_actifs:0,paiements_mois:0,depenses_mois:0,budget_restant:"0 $",taux_utilisation_budget:0}}),[g,D]=x.useState(""),p=async()=>{r(!0),n(null);try{const s=await fetch("/api/v1/dashboard/stats",{headers:{Accept:"application/json","Content-Type":"application/json"}});if(!s.ok)throw console.log("Response not ok:",s),new Error(`Erreur ${s.status}: ${s.statusText}`);const o=await s.json();if(o.success)m(o.data),D(new Date().toLocaleTimeString("fr-FR"));else throw new Error(o.message||"Erreur inconnue")}catch(s){n(s instanceof Error?s.message:"Erreur de connexion"),console.error("Erreur lors du chargement des données:",s)}finally{r(!1)}};x.useEffect(()=>{p();const s=setInterval(p,300*1e3);return()=>clearInterval(s)},[]);const $={Users:C,School:B,TrendingUp:k,TrendingDown:N,CreditCard:u,Wallet:f,Calendar:_};return i&&a.stats.length===0?e.jsxs(e.Fragment,{children:[e.jsx(v,{title:"Tableau de bord"}),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsx(c,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"h-4 w-[100px]"}),e.jsx(t,{className:"h-8 w-[80px]"}),e.jsx(t,{className:"h-4 w-[120px]"})]}),e.jsx(t,{className:"h-12 w-12 rounded-full"})]})})},s))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsx(c,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(t,{className:"h-4 w-[100px]"}),e.jsx(t,{className:"h-3 w-[80px]"})]})]})})},s))})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{title:"Tableau de bord"}),e.jsxs(e.Fragment,{children:[l&&e.jsxs(T,{variant:"destructive",className:"mb-6",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsxs(L,{children:[l,".",e.jsx(j,{variant:"link",onClick:p,className:"ml-2 p-0 h-auto",children:"Réessayer"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{children:g&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Dernière mise à jour: ",g]})}),e.jsxs(j,{variant:"outline",size:"sm",onClick:p,disabled:i,children:[e.jsx(F,{className:`h-4 w-4 mr-2 ${i?"animate-spin":""}`}),i?"Chargement...":"Rafraîchir"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.stats.map((s,o)=>{const R=$[s.icon]||k;return e.jsx(c,{children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:s.title}),e.jsx("p",{className:"text-2xl font-bold mt-2",children:s.value}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.trend==="up"?e.jsx(z,{className:"h-4 w-4 text-green-600"}):e.jsx(I,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:`text-sm ${s.trend==="up"?"text-green-600":"text-red-600"}`,children:s.change}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"depuis le mois dernier"})]})]}),e.jsx("div",{className:`h-12 w-12 rounded-full ${s.bg_color} flex items-center justify-center`,children:e.jsx(R,{className:`h-6 w-6 ${s.color}`})})]})})},o)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(h,{href:"/paiements/create",children:e.jsx(c,{className:"cursor-pointer hover:border-primary transition-colors",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:e.jsx(u,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Nouveau paiement"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enregistrer un paiement"})]})]})})})}),e.jsx(h,{href:"/depenses/create",children:e.jsx(c,{className:"cursor-pointer hover:border-primary transition-colors",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(N,{className:"h-5 w-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Nouvelle dépense"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Enregistrer une dépense"})]})]})})})}),e.jsx(h,{href:"/recouvrement",children:e.jsx(c,{className:"cursor-pointer hover:border-primary transition-colors",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center",children:e.jsx(f,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Recouvrement"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Suivi des paiements"})]})]})})})}),e.jsx(h,{href:"/budgets",children:e.jsx(c,{className:"cursor-pointer hover:border-primary transition-colors",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-full bg-amber-100 flex items-center justify-center",children:e.jsx(_,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Budgets"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Gestion des budgets"})]})]})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(c,{className:"lg:col-span-2",children:[e.jsxs(b,{children:[e.jsx(w,{children:"Activités récentes"}),e.jsx(y,{children:"Les dernières actions sur le système"})]}),e.jsx(d,{children:i?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(s=>e.jsx("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(t,{className:"h-8 w-8 rounded-full"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(t,{className:"h-4 w-[200px]"}),e.jsx(t,{className:"h-3 w-[80px]"})]})]})},s))}):e.jsx("div",{className:"space-y-4",children:a.recent_activities.length===0?e.jsx("p",{className:"text-center text-muted-foreground py-4",children:"Aucune activité récente"}):a.recent_activities.map(s=>e.jsx("div",{className:"flex items-center justify-between py-2 border-b last:border-0",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`h-8 w-8 rounded-full ${s.type==="paiement"?"bg-green-100 text-green-600":s.type==="depense"?"bg-blue-100 text-blue-600":s.type==="inscription"?"bg-purple-100 text-purple-600":"bg-amber-100 text-amber-600"} flex items-center justify-center`,children:[s.type==="paiement"&&e.jsx(u,{className:"h-4 w-4"}),s.type==="depense"&&e.jsx(N,{className:"h-4 w-4"}),s.type==="inscription"&&e.jsx(C,{className:"h-4 w-4"}),s.type==="budget"&&e.jsx(f,{className:"h-4 w-4"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.description}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.time})]})]})},s.id))})})]}),e.jsxs(c,{children:[e.jsxs(b,{children:[e.jsx(w,{children:"Statut du système"}),e.jsx(y,{children:"Vue d'ensemble"})]}),e.jsx(d,{children:i?e.jsx("div",{className:"space-y-4",children:[1,2,3,4].map(s=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(t,{className:"h-4 w-[100px]"}),e.jsx(t,{className:"h-4 w-[50px]"})]},s))}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Élèves actifs"}),e.jsx("span",{className:"font-medium",children:a.system_overview.eleves_actifs})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Paiements ce mois"}),e.jsx("span",{className:"font-medium",children:a.system_overview.paiements_mois})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Dépenses ce mois"}),e.jsx("span",{className:"font-medium",children:a.system_overview.depenses_mois})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Budget restant"}),e.jsx("span",{className:"font-medium text-green-600",children:a.system_overview.budget_restant})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Utilisation du budget"}),e.jsxs("span",{children:[a.system_overview.taux_utilisation_budget,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${a.system_overview.taux_utilisation_budget>80?"bg-red-500":a.system_overview.taux_utilisation_budget>50?"bg-amber-500":"bg-green-500"}`,style:{width:`${Math.min(a.system_overview.taux_utilisation_budget,100)}%`}})})]}),e.jsx(h,{href:"/paiements/rapport",className:"block",children:e.jsx(j,{variant:"outline",className:"w-full",children:"Voir le rapport complet"})})]})]})})]})]})]})]})]})}export{ee as default};
